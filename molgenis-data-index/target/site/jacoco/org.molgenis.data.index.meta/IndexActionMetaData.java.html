<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>IndexActionMetaData.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">data-index</a> &gt; <a href="index.source.html" class="el_package">org.molgenis.data.index.meta</a> &gt; <span class="el_source">IndexActionMetaData.java</span></div><h1>IndexActionMetaData.java</h1><pre class="source lang-java linenums">package org.molgenis.data.index.meta;

import org.molgenis.data.meta.AttributeType;
import org.molgenis.data.meta.SystemEntityType;
import org.springframework.stereotype.Component;

import static java.util.Objects.requireNonNull;
import static org.molgenis.data.index.meta.IndexPackage.PACKAGE_INDEX;
import static org.molgenis.data.meta.AttributeType.*;
import static org.molgenis.data.meta.model.EntityType.AttributeRole.ROLE_ID;
import static org.molgenis.data.meta.model.EntityType.AttributeRole.ROLE_LABEL;
import static org.molgenis.data.meta.model.Package.PACKAGE_SEPARATOR;

/**
 * The index action is used to describe the action that needs to be done to make a
 * {@link org.molgenis.data.Repository}'s index consistent again.
 */
@Component
public class IndexActionMetaData extends SystemEntityType
{
	private static final String SIMPLE_NAME = &quot;IndexAction&quot;;
	public static final String INDEX_ACTION = PACKAGE_INDEX + PACKAGE_SEPARATOR + SIMPLE_NAME;

	/**
	 * Is auto generated
	 */
	public static final String ID = &quot;id&quot;;

	/**
	 * The creation time of the index action.
	 */
	public static final String CREATION_DATE_TIME = &quot;creationDateTime&quot;;

	/**
	 * The group that this index action belongs to.
	 */
	public static final String INDEX_ACTION_GROUP_ATTR = &quot;indexActionGroup&quot;;

	/**
	 * The order in which the action is registered within its IndexActionJob
	 */
	public static final String ACTION_ORDER = &quot;actionOrder&quot;;

	/**
	 * The name of the entity type ID that needs to be indexed
	 */
	public static final String ENTITY_TYPE_ID = &quot;entityTypeId&quot;;

	/**
	 * Entity is filled when only one row of the entity &quot;entityFullName&quot; is indexed
	 */
	public static final String ENTITY_ID = &quot;entityId&quot;;

	/**
	 * Enum: the status of index action.
	 *
	 * @see IndexStatus
	 */
	public static final String INDEX_STATUS = &quot;indexStatus&quot;;

	private final IndexPackage indexPackage;
	private IndexActionGroupMetaData indexActionGroupMetaData;

	public IndexActionMetaData(IndexPackage indexPackage, IndexActionGroupMetaData indexActionGroupMetaData)
	{
<span class="fc" id="L66">		super(SIMPLE_NAME, PACKAGE_INDEX);</span>
<span class="fc" id="L67">		this.indexPackage = requireNonNull(indexPackage);</span>
<span class="fc" id="L68">		this.indexActionGroupMetaData = requireNonNull(indexActionGroupMetaData);</span>
<span class="fc" id="L69">	}</span>

	@Override
	public void init()
	{
<span class="fc" id="L74">		setLabel(&quot;Index action&quot;);</span>
<span class="fc" id="L75">		setPackage(indexPackage);</span>

<span class="fc" id="L77">		addAttribute(ID, ROLE_ID).setAuto(true).setVisible(false);</span>
<span class="fc" id="L78">		addAttribute(CREATION_DATE_TIME, ROLE_LABEL).setDataType(AttributeType.DATE_TIME).setAuto(true);</span>
<span class="fc" id="L79">		addAttribute(INDEX_ACTION_GROUP_ATTR).setDescription(&quot;The group that this index action belongs to&quot;)</span>
<span class="fc" id="L80">											 .setDataType(XREF)</span>
<span class="fc" id="L81">											 .setRefEntity(indexActionGroupMetaData);</span>
<span class="fc" id="L82">		addAttribute(ACTION_ORDER).setDataType(INT)</span>
<span class="fc" id="L83">								  .setDescription(</span>
										  &quot;The order in which the action is registered within its IndexActionJob&quot;)
<span class="fc" id="L85">								  .setNillable(false);</span>
<span class="fc" id="L86">		addAttribute(ENTITY_TYPE_ID).setDescription(</span>
<span class="fc" id="L87">				&quot;The id of the entity type that needs to be indexed (e.g. myEntityType).&quot;).setNillable(false);</span>
<span class="fc" id="L88">		addAttribute(ENTITY_ID).setDescription(&quot;The id of the entity that needs to be indexed&quot;)</span>
<span class="fc" id="L89">							   .setDataType(TEXT)</span>
<span class="fc" id="L90">							   .setNillable(true);</span>
<span class="fc" id="L91">		addAttribute(INDEX_STATUS).setDescription(&quot;The status of index action&quot;)</span>
<span class="fc" id="L92">								  .setDataType(ENUM)</span>
<span class="fc" id="L93">								  .setEnumOptions(IndexStatus.class)</span>
<span class="fc" id="L94">								  .setNillable(false);</span>
<span class="fc" id="L95">	}</span>

	/**
	 * Index action status
	 */
<span class="fc" id="L100">	public enum IndexStatus</span>
	{
		/**
		 * index action is finished
		 */
<span class="fc" id="L105">		FINISHED, /**</span>
	 * index action is canceled
	 */
<span class="fc" id="L108">	CANCELED, /**</span>
	 * index action failed
	 */
<span class="fc" id="L111">	FAILED, /**</span>
	 * index action is started
	 */
<span class="fc" id="L114">	STARTED, /**</span>
	 * index action is just created and is not yet processed
	 */
<span class="fc" id="L117">	PENDING</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.1.201803210924</span></div></body></html>