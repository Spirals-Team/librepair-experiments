package {{{ context.package }}};

import junit.framework.TestCase;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.remote.RemoteWebDriver;

{{#if needs_to_import_actionwords? }}import {{{ context.package }}}.Actionwords;
import {{{ context.package }}}.SeleniumDriverGetter;
{{/if}}
public class {{{ clear_extension context.filename }}} extends TestCase {{#curly}}
{{#indent}}{{#if has_tags?}}{{#comment '//'}}Tags: {{join rendered_children.tags ' '}}
{{/comment}}{{/if}}
public Actionwords {{{ context.call_prefix }}};
public WebDriver driver;
private CloudHelper cloudHelper;
public String score = "fail";
public String featureName = "{{escape_double_quotes rendered_children.name }}";

protected void setUp() throws Exception {{#curly}}{{#indent}}
super.setUp();
{{{ context.call_prefix }}} = new Actionwords();
if (System.getenv("USE_CBT") != null) {{#curly}}{{#indent}}
cloudHelper = new CBTHelper();{{/indent}}
{{/curly}} else if (System.getenv("USE_SAUCELABS") != null) {{#curly}}{{#indent}}
cloudHelper = new SauceLabsHelper();{{/indent}}
{{/curly}} else {{#curly}}{{#indent}}
cloudHelper = new CloudHelper();{{/indent}}
{{/curly}}{{/indent}}
{{/curly}}

protected void scenarioSetup(String testName)  throws Exception {{#curly}}{{#indent}}
driver = new SeleniumDriverGetter().getDriver(featureName, testName);
cloudHelper.setDriver((RemoteWebDriver) driver);
actionwords.setDriver(driver);{{/indent}}
{{> body}}
{{/curly}}

protected void tearDown() throws Exception {{#curly}}{{#indent}}
cloudHelper.setScore(score);
driver.quit();{{/indent}}
{{/curly}}

{{#each rendered_children.scenarios}}{{{this}}}
{{/each}}
{{/indent}}
{{/curly}}