[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] Singularity
[INFO] SingularityBase
[INFO] SingularityMesosClient
[INFO] SingularityUI
[INFO] SingularityService
[INFO] SingularityRunnerBase
[INFO] SingularityS3Base
[INFO] SingularityClient
[INFO] SingularityExecutor
[INFO] SingularityExecutorCleanup
[INFO] SingularityS3Uploader
[INFO] SingularityS3Downloader
[INFO] EmbedSingularityExample
[INFO] SingularityServiceIntegrationTests
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Singularity 0.20.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- property-helper-maven-plugin:2.0:get (get-build-id) @ Singularity ---
[INFO] 
[INFO] --- dependency-scope-maven-plugin:0.8:check (check) @ Singularity ---
[INFO] No test dependency scope issues found
[INFO] 
[INFO] --- maven-enforcer-plugin:1.4.1:enforce (default) @ Singularity ---
[INFO] 
[INFO] --- maven-enforcer-plugin:1.4.1:enforce (basepom-banned-dependencies) @ Singularity ---
[INFO] 
[INFO] --- maven-dependency-versions-check-plugin:2.0.2:check (default) @ Singularity ---
[INFO] Checking dependency versions
[INFO] 
[INFO] --- dependency-management-maven-plugin:0.8:analyze (default) @ Singularity ---
[INFO] No dependency management issues found
[INFO] 
[INFO] --- maven-checkstyle-plugin:2.17:check (default) @ Singularity ---
[INFO] Starting audit...
Audit done.
[INFO] 
[INFO] --- git-commit-id-plugin:2.2.1:revision (default) @ Singularity ---
[INFO] 
[INFO] --- jacoco-maven-plugin:0.7.6.201602180812:prepare-agent (default) @ Singularity ---
[INFO] argLine set to -javaagent:/root/./workspace/HubSpot/Singularity/347821232/.m2/org/jacoco/org.jacoco.agent/0.7.6.201602180812/org.jacoco.agent-0.7.6.201602180812-runtime.jar=destfile=/root/workspace/HubSpot/Singularity/347821232/target/jacoco.exec
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building SingularityBase 0.20.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- property-helper-maven-plugin:2.0:get (get-build-id) @ SingularityBase ---
[INFO] 
[INFO] --- dependency-scope-maven-plugin:0.8:check (check) @ SingularityBase ---
[INFO] No test dependency scope issues found
[INFO] 
[INFO] --- maven-enforcer-plugin:1.4.1:enforce (default) @ SingularityBase ---
[INFO] 
[INFO] --- maven-enforcer-plugin:1.4.1:enforce (basepom-banned-dependencies) @ SingularityBase ---
[INFO] 
[INFO] --- maven-dependency-versions-check-plugin:2.0.2:check (default) @ SingularityBase ---
[INFO] Checking dependency versions
[INFO] 
[INFO] --- dependency-management-maven-plugin:0.8:analyze (default) @ SingularityBase ---
[INFO] No dependency management issues found
[INFO] 
[INFO] --- maven-checkstyle-plugin:2.17:check (default) @ SingularityBase ---
[INFO] Starting audit...
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityBase/src/main/java/com/hubspot/singularity/api/request/RequestType.java:13:3: Redundant 'private' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityBase/src/main/java/com/hubspot/singularity/api/request/RequestCleanupType.java:17:3: Redundant 'private' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityBase/src/main/java/com/hubspot/singularity/api/request/RequestState.java:12:3: Redundant 'private' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityBase/src/main/java/com/hubspot/singularity/api/deploy/HealthcheckProtocol.java:12:3: Redundant 'private' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityBase/src/main/java/com/hubspot/singularity/api/deploy/DeployState.java:14:3: Redundant 'private' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityBase/src/main/java/com/hubspot/singularity/api/task/TaskCleanupType.java:18:3: Redundant 'private' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityBase/src/main/java/com/hubspot/singularity/api/machines/SlaveMatchState.java:18:3: Redundant 'private' modifier. [RedundantModifier]
Audit done.
[INFO] 
[INFO] --- git-commit-id-plugin:2.2.1:revision (default) @ SingularityBase ---
[INFO] 
[INFO] --- jacoco-maven-plugin:0.7.6.201602180812:prepare-agent (default) @ SingularityBase ---
[INFO] argLine set to -javaagent:/root/./workspace/HubSpot/Singularity/347821232/.m2/org/jacoco/org.jacoco.agent/0.7.6.201602180812/org.jacoco.agent-0.7.6.201602180812-runtime.jar=destfile=/root/workspace/HubSpot/Singularity/347821232/SingularityBase/target/jacoco.exec
[INFO] 
[INFO] --- maven-resources-plugin:3.0.2:resources (default-resources) @ SingularityBase ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/HubSpot/Singularity/347821232/SingularityBase/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:compile (default-compile) @ SingularityBase ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:3.0.2:testResources (default-testResources) @ SingularityBase ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/HubSpot/Singularity/347821232/SingularityBase/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:testCompile (default-testCompile) @ SingularityBase ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.19.1:test (default-test) @ SingularityBase ---
[INFO] No tests to run.
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building SingularityMesosClient 0.20.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- property-helper-maven-plugin:2.0:get (get-build-id) @ SingularityMesosClient ---
[INFO] 
[INFO] --- dependency-scope-maven-plugin:0.8:check (check) @ SingularityMesosClient ---
[INFO] No test dependency scope issues found
[INFO] 
[INFO] --- maven-enforcer-plugin:1.4.1:enforce (default) @ SingularityMesosClient ---
[INFO] 
[INFO] --- maven-enforcer-plugin:1.4.1:enforce (basepom-banned-dependencies) @ SingularityMesosClient ---
[INFO] 
[INFO] --- maven-dependency-versions-check-plugin:2.0.2:check (default) @ SingularityMesosClient ---
[INFO] Checking dependency versions
[INFO] 
[INFO] --- dependency-management-maven-plugin:0.8:analyze (default) @ SingularityMesosClient ---
[INFO] No dependency management issues found
[INFO] 
[INFO] --- maven-checkstyle-plugin:2.17:check (default) @ SingularityMesosClient ---
[INFO] Starting audit...
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityMesosClient/src/main/java/com/hubspot/mesos/client/MesosClient.java:13:3: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityMesosClient/src/main/java/com/hubspot/mesos/client/MesosClient.java:19:3: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityMesosClient/src/main/java/com/hubspot/mesos/client/MesosClient.java:21:3: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityMesosClient/src/main/java/com/hubspot/mesos/client/MesosClient.java:34:3: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityMesosClient/src/main/java/com/hubspot/mesos/client/MesosClient.java:36:3: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityMesosClient/src/main/java/com/hubspot/mesos/client/MesosClient.java:38:3: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityMesosClient/src/main/java/com/hubspot/mesos/client/MesosClient.java:40:3: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityMesosClient/src/main/java/com/hubspot/mesos/client/MesosClient.java:42:3: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityMesosClient/src/main/java/com/hubspot/mesos/client/MesosClient.java:44:3: Redundant 'public' modifier. [RedundantModifier]
Audit done.
[INFO] 
[INFO] --- git-commit-id-plugin:2.2.1:revision (default) @ SingularityMesosClient ---
[INFO] 
[INFO] --- jacoco-maven-plugin:0.7.6.201602180812:prepare-agent (default) @ SingularityMesosClient ---
[INFO] argLine set to -javaagent:/root/./workspace/HubSpot/Singularity/347821232/.m2/org/jacoco/org.jacoco.agent/0.7.6.201602180812/org.jacoco.agent-0.7.6.201602180812-runtime.jar=destfile=/root/workspace/HubSpot/Singularity/347821232/SingularityMesosClient/target/jacoco.exec
[INFO] 
[INFO] --- maven-resources-plugin:3.0.2:resources (default-resources) @ SingularityMesosClient ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/HubSpot/Singularity/347821232/SingularityMesosClient/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:compile (default-compile) @ SingularityMesosClient ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:3.0.2:testResources (default-testResources) @ SingularityMesosClient ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/HubSpot/Singularity/347821232/SingularityMesosClient/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:testCompile (default-testCompile) @ SingularityMesosClient ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.19.1:test (default-test) @ SingularityMesosClient ---
[INFO] No tests to run.
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building SingularityUI 0.20.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- property-helper-maven-plugin:2.0:get (get-build-id) @ SingularityUI ---
[INFO] 
[INFO] --- dependency-scope-maven-plugin:0.8:check (check) @ SingularityUI ---
[INFO] No test dependency scope issues found
[INFO] 
[INFO] --- maven-enforcer-plugin:1.4.1:enforce (default) @ SingularityUI ---
[INFO] 
[INFO] --- maven-enforcer-plugin:1.4.1:enforce (basepom-banned-dependencies) @ SingularityUI ---
[INFO] 
[INFO] --- maven-dependency-versions-check-plugin:2.0.2:check (default) @ SingularityUI ---
[INFO] Checking dependency versions
[INFO] 
[INFO] --- dependency-management-maven-plugin:0.8:analyze (default) @ SingularityUI ---
[INFO] No dependency management issues found
[INFO] 
[INFO] --- maven-checkstyle-plugin:2.17:check (default) @ SingularityUI ---
[INFO] Starting audit...
Audit done.
[INFO] 
[INFO] --- git-commit-id-plugin:2.2.1:revision (default) @ SingularityUI ---
[INFO] 
[INFO] --- jacoco-maven-plugin:0.7.6.201602180812:prepare-agent (default) @ SingularityUI ---
[INFO] argLine set to -javaagent:/root/./workspace/HubSpot/Singularity/347821232/.m2/org/jacoco/org.jacoco.agent/0.7.6.201602180812/org.jacoco.agent-0.7.6.201602180812-runtime.jar=destfile=/root/workspace/HubSpot/Singularity/347821232/SingularityUI/target/jacoco.exec
[INFO] 
[INFO] --- frontend-maven-plugin:0.0.23:install-node-and-npm (install node and npm) @ SingularityUI ---
[INFO] Node v6.2.1 is already installed.
[INFO] Found NPM version 3.9.3
[INFO] 
[INFO] --- frontend-maven-plugin:0.0.23:npm (npm install) @ SingularityUI ---
[INFO] Running 'npm install --color=false' in /root/workspace/HubSpot/Singularity/347821232/SingularityUI
[INFO] SingularityUI@0.3.0 /root/workspace/HubSpot/Singularity/347821232/SingularityUI
[INFO] ├── UNMET PEER DEPENDENCY react@15.6.2
[INFO] └─┬ swagger-ui@3.11.0
[INFO]   ├─┬ react-hot-loader@1.3.1 
[INFO]   │ ├── react-hot-api@0.4.7 
[INFO]   │ └── source-map@0.4.4 
[INFO]   ├── UNMET PEER DEPENDENCY webpack@^2.2.0
[INFO]   └─┬ webpack-dev-server@2.5.0 
[INFO]     ├─┬ bonjour@3.5.0 
[INFO]     │ ├── array-flatten@2.1.1 
[INFO]     │ ├── dns-equal@1.0.0 
[INFO]     │ ├─┬ dns-txt@2.0.2 
[INFO]     │ │ └── buffer-indexof@1.1.1 
[INFO]     │ ├─┬ multicast-dns@6.2.3 
[INFO]     │ │ ├─┬ dns-packet@1.3.1 
[INFO]     │ │ │ └── ip@1.1.5 
[INFO]     │ │ └── thunky@1.0.2 
[INFO]     │ └── multicast-dns-service-types@1.1.0 
[INFO]     ├─┬ del@3.0.0 
[INFO]     │ ├─┬ globby@6.1.0 
[INFO]     │ │ └── pify@2.3.0 
[INFO]     │ ├── p-map@1.2.0 
[INFO]     │ └── pify@3.0.0 
[INFO]     ├── internal-ip@1.2.0 
[INFO]     ├─┬ portfinder@1.0.13 
[INFO]     │ └── async@1.5.2 
[INFO]     ├─┬ selfsigned@1.10.2 
[INFO]     │ └── node-forge@0.7.1 
[INFO]     ├─┬ sockjs@0.3.18 
[INFO]     │ └── uuid@2.0.3 
[INFO]     ├─┬ sockjs-client@1.1.2 
[INFO]     │ └── faye-websocket@0.11.1 
[INFO]     ├─┬ spdy@3.4.7 
[INFO]     │ ├── handle-thing@1.2.5 
[INFO]     │ ├── http-deceiver@1.2.7 
[INFO]     │ ├── select-hose@2.0.0 
[INFO]     │ └─┬ spdy-transport@2.0.20 
[INFO]     │   ├── detect-node@2.0.3 
[INFO]     │   ├── hpack.js@2.1.6 
[INFO]     │   ├── obuf@1.1.1 
[INFO]     │   └─┬ wbuf@1.7.2 
[INFO]     │     └── minimalistic-assert@1.0.0 
[INFO]     └─┬ supports-color@3.2.3 
[INFO]       └── has-flag@1.0.0 
[INFO] 
[ERROR] npm WARN optional Skipping failed optional dependency /chokidar/fsevents:
[ERROR] npm WARN notsup Not compatible with your operating system or architecture: fsevents@1.1.3
[ERROR] npm WARN commonmark-react-renderer@4.3.4 requires a peer of commonmark@^0.27.0 || ^0.26.0 || ^0.24.0 but none was installed.
[ERROR] npm WARN react-object-inspector@0.2.1 requires a peer of react@^0.14.0 but none was installed.
[ERROR] npm WARN react-addons-shallow-compare@0.14.8 requires a peer of react@^0.14.8 but none was installed.
[ERROR] npm WARN webpack-dev-server@2.5.0 requires a peer of webpack@^2.2.0 but none was installed.
[INFO] 
[INFO] --- frontend-maven-plugin:0.0.23:npm (npm test) @ SingularityUI ---
[INFO] Running 'npm test --color=false' in /root/workspace/HubSpot/Singularity/347821232/SingularityUI
[INFO] 
[INFO] > SingularityUI@0.3.0 test /root/workspace/HubSpot/Singularity/347821232/SingularityUI
[INFO] > mocha --compilers js:babel-core/register test/index.test
[INFO] 
[ERROR] Warning: Accessing PropTypes via the main React package is deprecated, and will be removed in  React v16.0. Use the latest available v15.* prop-types package from npm instead. For info on usage, compatibility, migration and more, see https://fb.me/prop-types-docs
[INFO] 
[INFO] 
[INFO]   Utils
[INFO]     getTaskDataFromTaskId()
[INFO]       ✓ should grab all fields from a valid task id
[INFO] 
[INFO]   Reducers
[INFO]     tailerView
[INFO]       ✓ should be properly initialized
[INFO]       ✓ should populate the tailerId field
[INFO]       ✓ should auto-populate the requestIds, taskIds, and paths fields
[INFO]       ✓ should add tailer groups
[INFO]       ✓ should remove tailer groups
[INFO]       ✓ should pick an individual tailer group
[INFO] 
[INFO] 
[INFO]   7 passing (31ms)
[INFO] 
[INFO] 
[INFO] --- frontend-maven-plugin:0.0.23:gulp (gulp build) @ SingularityUI ---
[INFO] Running 'gulp build --no-color' in /root/workspace/HubSpot/Singularity/347821232/SingularityUI
[INFO] [16:09:38] Using gulpfile ~/workspace/HubSpot/Singularity/347821232/SingularityUI/gulpfile.js
[INFO] [16:09:38] Starting 'clean'...
[INFO] [16:09:38] Finished 'clean' after 41 ms
[INFO] [16:09:38] Starting 'static'...
[INFO] [16:09:38] Finished 'static' after 38 ms
[INFO] [16:09:38] Starting 'html'...
[INFO] [16:09:38] Finished 'html' after 19 ms
[INFO] [16:09:38] Starting 'build'...
[INFO] [16:12:02] Version: webpack [1m1.13.1[22m
[INFO] Time: [1m143767[22mms
[INFO]                                [1mAsset[22m     [1mSize[22m  [1mChunks[22m  [1m[22m           [1mChunk Names[22m
[INFO] [1m[32m89889688147bd7575d6327160d64e760.svg[39m[22m   109 kB        [1m[22m  [1m[32m[emitted][39m[22m  
[INFO]                  [1m[32mjs/vendor.bundle.js[39m[22m   613 kB       [1m0[22m  [1m[32m[emitted][39m[22m  js/vendor
[INFO]                     [1m[32mjs/app.bundle.js[39m[22m  3.54 MB       [1m1[22m  [1m[32m[emitted][39m[22m  js/app
[INFO]                          [1m[32mcss/app.css[39m[22m   377 kB       [1m1[22m  [1m[32m[emitted][39m[22m  js/app
[INFO]              [1m[32mjs/vendor.bundle.js.map[39m[22m  4.57 MB       [1m0[22m  [1m[32m[emitted][39m[22m  js/vendor
[INFO]                 [1m[32mjs/app.bundle.js.map[39m[22m  19.1 MB       [1m1[22m  [1m[32m[emitted][39m[22m  js/app
[INFO]                      [1m[32mcss/app.css.map[39m[22m   459 kB       [1m1[22m  [1m[32m[emitted][39m[22m  js/app
[INFO] Child [1mextract-text-webpack-plugin[22m:
[INFO]     
[INFO] Child [1mextract-text-webpack-plugin[22m:
[INFO]     
[INFO] Child [1mextract-text-webpack-plugin[22m:
[INFO]     
[INFO] Child [1mextract-text-webpack-plugin[22m:
[INFO]     
[INFO] Child [1mextract-text-webpack-plugin[22m:
[INFO]     
[INFO] Child [1mextract-text-webpack-plugin[22m:
[INFO]     
[INFO] Child [1mextract-text-webpack-plugin[22m:
[INFO]     
[INFO] [16:12:02] Finished 'build' after 2.4 min
[INFO] 
[INFO] --- maven-resources-plugin:3.0.2:copy-resources (copy-index.html-template) @ SingularityUI ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-resources-plugin:3.0.2:copy-resources (copy-ui) @ SingularityUI ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 17 resources
[INFO] 
[INFO] --- build-helper-maven-plugin:1.10:add-resource (add-generated-resources) @ SingularityUI ---
[INFO] 
[INFO] --- maven-resources-plugin:3.0.2:resources (default-resources) @ SingularityUI ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/HubSpot/Singularity/347821232/SingularityUI/src/main/resources
[INFO] Copying 18 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:compile (default-compile) @ SingularityUI ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-resources-plugin:3.0.2:testResources (default-testResources) @ SingularityUI ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/HubSpot/Singularity/347821232/SingularityUI/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:testCompile (default-testCompile) @ SingularityUI ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.19.1:test (default-test) @ SingularityUI ---
[INFO] No tests to run.
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building SingularityService 0.20.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- property-helper-maven-plugin:2.0:get (get-build-id) @ SingularityService ---
[INFO] 
[INFO] --- dependency-scope-maven-plugin:0.8:check (check) @ SingularityService ---
[INFO] No test dependency scope issues found
[INFO] 
[INFO] --- maven-enforcer-plugin:1.4.1:enforce (default) @ SingularityService ---
[INFO] 
[INFO] --- maven-enforcer-plugin:1.4.1:enforce (basepom-banned-dependencies) @ SingularityService ---
[INFO] 
[INFO] --- maven-dependency-versions-check-plugin:2.0.2:check (default) @ SingularityService ---
[INFO] Checking dependency versions
[INFO] 
[INFO] --- dependency-management-maven-plugin:0.8:analyze (default) @ SingularityService ---
[INFO] No dependency management issues found
[INFO] 
[INFO] --- maven-checkstyle-plugin:2.17:check (default) @ SingularityService ---
[INFO] Starting audit...
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/config/UIConfiguration.java:22:10: Redundant 'static' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/data/zkmigrations/SingularityCmdLineArgsMigration.java:56:5: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/data/zkmigrations/SingularityRequestTypeMigration.java:83:9: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/data/zkmigrations/SingularityRequestTypeMigration.java:138:9: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/data/history/SingularityHistoryModule.java:126:5: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/data/CuratorManager.java:63:5: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/data/CuratorAsyncManager.java:45:5: Redundant 'private' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/mesos/OfferCache.java:12:3: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/mesos/OfferCache.java:14:3: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/mesos/OfferCache.java:16:3: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/mesos/OfferCache.java:18:3: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/mesos/OfferCache.java:20:3: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/mesos/OfferCache.java:22:3: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/mesos/OfferCache.java:24:3: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/mesos/OfferCache.java:26:3: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/mesos/SingularitySlaveUsageWithCalculatedScores.java:27:3: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/scheduler/SingularityExpiringUserActionPoller.java:174:5: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/scheduler/SingularityExpiringUserActionPoller.java:223:5: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/scheduler/SingularityExpiringUserActionPoller.java:248:5: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/scheduler/SingularityExpiringUserActionPoller.java:288:5: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/scheduler/SingularityExpiringUserActionPoller.java:314:5: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/hooks/LoadBalancerClientImpl.java:113:5: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/smtp/SmtpMailer.java:366:5: Redundant 'private' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/async/PermitSource.java:13:3: Redundant 'public' modifier. [RedundantModifier]
[WARN] /root/workspace/HubSpot/Singularity/347821232/SingularityService/src/main/java/com/hubspot/singularity/async/CompletableFutures.java:180:5: Redundant 'public' modifier. [RedundantModifier]
Audit done.
[INFO] 
[INFO] --- git-commit-id-plugin:2.2.1:revision (default) @ SingularityService ---
[INFO] 
[INFO] --- jacoco-maven-plugin:0.7.6.201602180812:prepare-agent (default) @ SingularityService ---
[INFO] argLine set to -javaagent:/root/./workspace/HubSpot/Singularity/347821232/.m2/org/jacoco/org.jacoco.agent/0.7.6.201602180812/org.jacoco.agent-0.7.6.201602180812-runtime.jar=destfile=/root/workspace/HubSpot/Singularity/347821232/SingularityService/target/jacoco.exec
[INFO] 
[INFO] --- maven-resources-plugin:3.0.2:resources (default-resources) @ SingularityService ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 9 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:compile (default-compile) @ SingularityService ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:3.0.2:testResources (default-testResources) @ SingularityService ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:testCompile (default-testCompile) @ SingularityService ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19.1:test (default-test) @ SingularityService ---
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.19.1/surefire-junit4-2.19.1.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.19.1/surefire-junit4-2.19.1.pom (4 KB at 13.3 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-providers/2.19.1/surefire-providers-2.19.1.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-providers/2.19.1/surefire-providers-2.19.1.pom (3 KB at 125.1 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.19.1/surefire-junit4-2.19.1.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.19.1/surefire-junit4-2.19.1.jar (74 KB at 1503.1 KB/sec)

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running com.hubspot.singularity.scheduler.SingularitySlavePlacementTest
Running com.hubspot.singularity.data.ValidatorTest
Running com.hubspot.singularity.scheduler.SingularityCachedOffersTest
Running com.hubspot.singularity.config.MergingSourceProviderTest
Running com.hubspot.singularity.data.zkmigrations.ZkMigrationTest
Running com.hubspot.singularity.mesos.SingularityMesosOfferSchedulerTest
Running com.hubspot.singularity.scheduler.MesosUtilsTest
Running com.hubspot.singularity.JavaUtilsTest
Running com.hubspot.singularity.scheduler.SingularityMachineStatesTest
Running com.hubspot.singularity.mesos.SingularityMesosTaskBuilderTest
Running com.hubspot.singularity.scheduler.SingularityDeploysTest
Running com.hubspot.singularity.SingularityS3Test
Running com.hubspot.singularity.data.BlendedHistoryTest
Running com.hubspot.singularity.data.SandboxManagerTest
Running com.hubspot.singularity.scheduler.HistoryPersisterTest
Running com.hubspot.singularity.SingularityAuthorizationHelperTest
Running com.hubspot.singularity.SingularityHistoryTest
Running com.hubspot.singularity.mesos.SingularityTaskShellCommandTest
Running com.hubspot.singularity.scheduler.SingularityHealthchecksTest
Running com.hubspot.singularity.helpers.RFC5545ScheduleTest
Running com.hubspot.singularity.scheduler.SingularityExpiringActionsTest
Running com.hubspot.singularity.mesos.SingularityStartupTest
Running com.hubspot.singularity.data.StateManagerTest
Running com.hubspot.singularity.data.InactiveSlaveManagerTest
Running com.hubspot.singularity.scheduler.SingularitySchedulerTest
Running com.hubspot.singularity.scheduler.SingularityUsageTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.644 sec - in com.hubspot.singularity.SingularityS3Test
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3.557 sec - in com.hubspot.singularity.helpers.RFC5545ScheduleTest
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 5.749 sec - in com.hubspot.singularity.scheduler.MesosUtilsTest
16:12:30.950 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:30.940 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:30.966 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @9841ms
16:12:30.967 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @9843ms
16:12:31.013 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@84c6a0b
16:12:31.016 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:31.030 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @9911ms
16:12:31.041 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@750e5a19
16:12:31.052 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@6532ff9d{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@4efaeb05,MANAGED}
16:12:31.055 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@7375101e
16:12:31.056 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@3185ba7c{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@6519fd4,MANAGED}
16:12:31.089 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@85472e1{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@2af32c33,MANAGED}
16:12:31.092 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@69125d41
16:12:31.093 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@7e9d6725{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@6fee1fa6,MANAGED}
16:12:31.118 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@723abdb1
16:12:31.139 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:31.173 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@45d237ee{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@73f52633,MANAGED}
16:12:31.169 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @10049ms
16:12:31.175 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@56993fae
16:12:31.176 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@3ebec25{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@1e42610f,MANAGED}
16:12:31.191 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@6fee1fa6 added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:31.216 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@6fee1fa6 added {[/tasks/*]=>tasks,POJO}
16:12:31.228 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@1e42610f added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:31.232 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@6519fd4 added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:31.233 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@1e42610f added {[/tasks/*]=>tasks,POJO}
16:12:31.247 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@6519fd4 added {[/tasks/*]=>tasks,POJO}
16:12:31.307 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@6195697c
16:12:31.328 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:31.338 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:31.350 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @10225ms
16:12:31.353 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @10234ms
16:12:31.380 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@eea6dbc{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@55fbe75e,MANAGED}
16:12:31.384 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@676da3d3
16:12:31.386 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@326a7876{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@587f64b7,MANAGED}
16:12:31.432 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@22a16551
16:12:31.450 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@50f33e52
16:12:31.452 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@939c2c5{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@6a015512,MANAGED}
16:12:31.463 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@107af070
16:12:31.464 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@6c2a7f16{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@37e2b0b4,MANAGED}
16:12:31.452 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:31.473 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @10348ms
16:12:31.491 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@587f64b7 added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:31.495 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@7159a63d{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@6960959a,MANAGED}
16:12:31.500 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@587f64b7 added {[/tasks/*]=>tasks,POJO}
16:12:31.504 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@5eb7594d
16:12:31.512 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@4283d41f{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@7b3ed36a,MANAGED}
16:12:31.519 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@37e2b0b4 added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:31.527 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@37e2b0b4 added {[/tasks/*]=>tasks,POJO}
16:12:31.542 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@33cd7d69
16:12:31.588 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@65682b6e{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@216dbda3,MANAGED}
16:12:31.591 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@6aa420dd
16:12:31.592 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@4d3ff7cd{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@d473f91,MANAGED}
16:12:31.621 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@7b3ed36a added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:31.609 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:31.634 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @10514ms
16:12:31.627 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@7b3ed36a added {[/tasks/*]=>tasks,POJO}
16:12:31.768 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@36b7c31d
16:12:31.773 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@d473f91 added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:31.738 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:31.799 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @10679ms
16:12:31.819 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@d473f91 added {[/tasks/*]=>tasks,POJO}
16:12:31.825 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@3ec2abcc{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@5e4fd3ea,MANAGED}
16:12:31.828 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@4e467851
16:12:31.839 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@6c0a4806{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@63828ad1,MANAGED}
16:12:31.863 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:31.885 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@52ecf05f
16:12:31.891 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @10775ms
16:12:31.921 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@63828ad1 added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:31.939 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@86b1977{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@12d43457,MANAGED}
16:12:31.946 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@28a94959
16:12:31.952 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@188b1c46{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@35f1fc6f,MANAGED}
16:12:31.957 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@63828ad1 added {[/tasks/*]=>tasks,POJO}
16:12:31.969 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@7db3319d
16:12:31.967 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:32.005 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @10880ms
16:12:32.015 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@29c66652{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@abd4af8,MANAGED}
16:12:32.027 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@7c1827e8
16:12:32.027 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@1abba4d2{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@5d4ba4a,MANAGED}
16:12:32.066 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@35f1fc6f added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:32.078 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@35f1fc6f added {[/tasks/*]=>tasks,POJO}
16:12:32.111 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@23ba837d
16:12:32.112 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@5d4ba4a added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:32.134 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@5d4ba4a added {[/tasks/*]=>tasks,POJO}
16:12:32.134 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:32.150 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @11032ms
16:12:32.154 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@3ba6a132{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@55d1f55d,MANAGED}
16:12:32.158 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@499c4861
16:12:32.158 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@53ec1fa8{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@3ebb00cd,MANAGED}
16:12:32.162 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:32.179 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @11056ms
16:12:32.207 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@33274bb8
16:12:32.228 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@2c6398f4
16:12:32.234 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@71bb93df{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@7ac5a93,MANAGED}
16:12:32.245 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@3ebb00cd added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:32.250 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@230c80be
16:12:32.250 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@38d9c949{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@3ff6206a,MANAGED}
16:12:32.252 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@5e88a0d1{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@7f8b113a,MANAGED}
16:12:32.250 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@3ebb00cd added {[/tasks/*]=>tasks,POJO}
16:12:32.268 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@3cacae86
16:12:32.269 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@3fa840c4{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@4f299787,MANAGED}
16:12:32.323 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@4f299787 added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:32.329 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@4f299787 added {[/tasks/*]=>tasks,POJO}
16:12:32.338 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@7f8b113a added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:32.363 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@7f8b113a added {[/tasks/*]=>tasks,POJO}
16:12:32.385 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:32.400 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @11280ms
16:12:32.444 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@46db2288
16:12:32.485 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@a256b82{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@2a520967,MANAGED}
16:12:32.489 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@572377e
16:12:32.490 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@71c62ffb{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@1b5ffb04,MANAGED}
16:12:32.519 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:32.533 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @11399ms
16:12:32.544 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@1b5ffb04 added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:32.529 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:32.549 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@1b5ffb04 added {[/tasks/*]=>tasks,POJO}
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 9.012 sec - in com.hubspot.singularity.JavaUtilsTest
16:12:32.565 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @11423ms
16:12:32.576 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@bf38908
16:12:32.606 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@2a86dbf5{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@14f69e35,MANAGED}
16:12:32.609 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@e82bdc7
16:12:32.610 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@523effbf{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@6f6ae517,MANAGED}
16:12:32.613 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:32.644 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@79f87663
16:12:32.657 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @11535ms
16:12:32.712 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@4d3751a5{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@442192c2,MANAGED}
16:12:32.714 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@2fbf350c
16:12:32.733 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@3daaea52{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@6ae4542b,MANAGED}
16:12:32.772 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@4e3f9763
16:12:32.831 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@4c9b96a5{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@200af8ff,MANAGED}
16:12:32.832 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@6f6ae517 added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:32.838 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@6ae4542b added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:32.835 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@2a75cdfc
16:12:32.839 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@3a2ffda8{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@3c5202bf,MANAGED}
16:12:32.849 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@6f6ae517 added {[/tasks/*]=>tasks,POJO}
16:12:32.871 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@6ae4542b added {[/tasks/*]=>tasks,POJO}
16:12:32.885 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:32.929 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @11811ms
16:12:32.952 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:32.974 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @11852ms
16:12:32.976 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@3c5202bf added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:32.981 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@3c5202bf added {[/tasks/*]=>tasks,POJO}
16:12:33.004 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@5bc8bab2
16:12:33.043 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@47d6917f{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@3f339f30,MANAGED}
16:12:33.047 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@5490b1db
16:12:33.047 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@56e16b2c
16:12:33.047 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@3a0e5305{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@7e91f137,MANAGED}
16:12:33.074 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@28aca3fa{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@57658713,MANAGED}
16:12:33.078 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@733b308d
16:12:33.087 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@15892f2e{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@39f7442f,MANAGED}
16:12:33.095 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@7e91f137 added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:33.117 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@7e91f137 added {[/tasks/*]=>tasks,POJO}
16:12:33.168 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@39f7442f added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:33.175 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@39f7442f added {[/tasks/*]=>tasks,POJO}
Tests run: 15, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 11.442 sec - in com.hubspot.singularity.SingularityAuthorizationHelperTest
16:12:36.670 [Time-limited test] DEBUG org.eclipse.jetty.util.log - Logging to Logger[org.eclipse.jetty.util.log] via org.eclipse.jetty.util.log.Slf4jLog
16:12:36.696 [Time-limited test] INFO org.eclipse.jetty.util.log - Logging initialized @15567ms
16:12:36.733 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@37564385
16:12:36.754 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@5e5ff55f{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@1d4ee0cd,MANAGED}
16:12:36.757 [Time-limited test] DEBUG org.eclipse.jetty.util.DecoratedObjectFactory - Adding Decorator: org.eclipse.jetty.util.DeprecationWarning@854647e
16:12:36.758 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - i.d.j.MutableServletContextHandler@5ee7ac0c{/,null,null} added {org.eclipse.jetty.servlet.ServletHandler@17dbaf06,MANAGED}
16:12:36.839 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@17dbaf06 added {tasks@6907b8e==io.dropwizard.servlets.tasks.TaskServlet,jsp=null,order=1,inst=true,AUTO}
16:12:36.844 [Time-limited test] DEBUG org.eclipse.jetty.util.component.ContainerLifeCycle - org.eclipse.jetty.servlet.ServletHandler@17dbaf06 added {[/tasks/*]=>tasks,POJO}
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 13.698 sec - in com.hubspot.singularity.mesos.SingularityMesosTaskBuilderTest
16:12:47.858 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:48.088 [Curator-Framework-0] ERROR org.apache.curator.framework.imps.CuratorFrameworkImpl - Background exception was not retry-able or retry gave up
java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:1040)
	at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:1073)
	at org.apache.curator.utils.ZKPaths.mkdirs(ZKPaths.java:215)
	at org.apache.curator.framework.imps.CreateBuilderImpl$7.performBackgroundOperation(CreateBuilderImpl.java:522)
	at org.apache.curator.framework.imps.OperationAndData.callPerformBackgroundOperation(OperationAndData.java:65)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.performBackgroundOperation(CuratorFrameworkImpl.java:802)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.backgroundOperationsLoop(CuratorFrameworkImpl.java:792)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.access$300(CuratorFrameworkImpl.java:62)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl$4.call(CuratorFrameworkImpl.java:257)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
16:12:48.325 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:48.368 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:48.402 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:48.612 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:48.682 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:48.804 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:48.858 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:48.863 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:49.043 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:49.079 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:49.307 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:49.323 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:49.393 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:49.410 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:49.494 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:49.881 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920768576-1-host1-rack1
16:12:49.948 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:703)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 26.359 sec - in com.hubspot.singularity.data.BlendedHistoryTest
16:12:50.055 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920769966-1-host1-rack1
16:12:50.353 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519909969270-1-host1-rack1
16:12:50.504 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519909970438-1-host1-rack1
16:12:50.524 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
16:12:50.536 [Time-limited test-EventThread] ERROR org.apache.curator.framework.imps.CuratorFrameworkImpl - Background exception was not retry-able or retry gave up
java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.delete(CuratorFrameworkImpl.java:347)
	at org.apache.curator.framework.recipes.leader.LeaderLatch.setNode(LeaderLatch.java:661)
	at org.apache.curator.framework.recipes.leader.LeaderLatch.access$300(LeaderLatch.java:63)
	at org.apache.curator.framework.recipes.leader.LeaderLatch$4.processResult(LeaderLatch.java:490)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.sendToBackgroundCallback(CuratorFrameworkImpl.java:728)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.processBackgroundOperation(CuratorFrameworkImpl.java:505)
	at org.apache.curator.framework.imps.CreateBuilderImpl.sendBackgroundResponse(CreateBuilderImpl.java:541)
	at org.apache.curator.framework.imps.CreateBuilderImpl.access$700(CreateBuilderImpl.java:44)
	at org.apache.curator.framework.imps.CreateBuilderImpl$6.processResult(CreateBuilderImpl.java:500)
	at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:599)
	at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)
16:12:50.591 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519909970529-1-host1-rack1
16:12:50.681 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519909970615-1-host1-rack1
16:12:50.715 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:50.758 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519909970708-1-host1-rack1
16:12:50.865 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519909970776-1-host1-rack1
16:12:50.972 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519909970897-1-host1-rack1
16:12:51.022 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:51.068 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519909970990-1-host1-rack1
16:12:51.134 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:51.128 [Time-limited test-EventThread] ERROR com.hubspot.singularity.SingularityLeaderLatch - Can't find our node. Resetting. Index: -1
16:12:51.149 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519909971096-1-host1-rack1
16:12:51.152 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
16:12:51.192 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519909971161-1-host1-rack1
16:12:51.208 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:703)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
16:12:51.448 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:51.610 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:51.701 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
Tests run: 3, Failures: 0, Errors: 3, Skipped: 0, Time elapsed: 28.325 sec <<< FAILURE! - in com.hubspot.singularity.config.MergingSourceProviderTest
testNonObjectFails(com.hubspot.singularity.config.MergingSourceProviderTest)  Time elapsed: 21.89 sec  <<< ERROR!
java.lang.Exception: Unexpected exception, expected<com.hubspot.singularity.config.SingularityConfigurationMergeException> but was<java.lang.NoClassDefFoundError>
	at com.hubspot.singularity.config.MergingSourceProviderTest.testNonObjectFails(MergingSourceProviderTest.java:58)
Caused by: java.lang.ClassNotFoundException: org.yaml.snakeyaml.error.YAMLException
	at com.hubspot.singularity.config.MergingSourceProviderTest.testNonObjectFails(MergingSourceProviderTest.java:58)

testMergedConfigs(com.hubspot.singularity.config.MergingSourceProviderTest)  Time elapsed: 1.426 sec  <<< ERROR!
java.lang.NoClassDefFoundError: org/yaml/snakeyaml/error/YAMLException
	at com.hubspot.singularity.config.MergingSourceProviderTest.testMergedConfigs(MergingSourceProviderTest.java:46)
Caused by: java.lang.ClassNotFoundException: org.yaml.snakeyaml.error.YAMLException
	at com.hubspot.singularity.config.MergingSourceProviderTest.testMergedConfigs(MergingSourceProviderTest.java:46)

testFileNoExistFail(com.hubspot.singularity.config.MergingSourceProviderTest)  Time elapsed: 1.173 sec  <<< ERROR!
java.lang.Exception: Unexpected exception, expected<java.io.FileNotFoundException> but was<java.lang.NoClassDefFoundError>
	at com.hubspot.singularity.config.MergingSourceProviderTest.testFileNoExistFail(MergingSourceProviderTest.java:63)
Caused by: java.lang.ClassNotFoundException: org.yaml.snakeyaml.error.YAMLException
	at com.hubspot.singularity.config.MergingSourceProviderTest.testFileNoExistFail(MergingSourceProviderTest.java:63)

16:12:51.733 [healthcheck-pool-0] WARN com.hubspot.singularity.scheduler.SingularityHealthchecker - Couldn't find a port for health check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional.empty, skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='retry_test', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional[HealthcheckOptions{uri='http://uri', portIndex=Optional.empty, portNumber=Optional.empty, protocol=Optional.empty, startupTimeoutSeconds=Optional.empty, startupDelaySeconds=Optional.empty, startupIntervalSeconds=Optional.empty, intervalSeconds=Optional.empty, responseTimeoutSeconds=Optional.empty, maxRetries=Optional[2], failureStatusCodes=Optional.empty}], skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-retry_test-1519920768917-1-IMMEDIATE-1519920768917, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer294'}, allOtherFields={resources=[{name=cpus, type=SCALAR, scalar={value=125.0}}, {name=mem, type=SCALAR, scalar={value=1024.0}}, {name=disk, type=SCALAR, scalar={value=2048.0}}, {name=ports, type=RANGES, ranges={range=[]}}], attributes=[{name=rackid, type=TEXT, text={value=DEFAULT}}], executorIds=[], url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-retry_test-1519920768917-1-host1-rack1'}, executor=Optional[MesosExecutorInfo{executorId=Optional[SingularityMesosIdObject{value='executorID'}], allOtherFields={resources=[]}}], labels=null, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[], name='name', allOtherFields={}}, rackId=Optional[rack1]}
16:12:51.737 [healthcheck-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while saving health check result for test-request-retry_test-1519920768917-1-host1-rack1, will re-enqueue
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.TaskManager.canSaveNewHealthcheck(TaskManager.java:329)
	at com.hubspot.singularity.data.TaskManager.saveHealthcheckResult(TaskManager.java:318)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:76)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 15 common frames omitted
16:12:51.739 [healthcheck-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while re-enqueuing health check for test-request-retry_test-1519920768917-1-host1-rack1, aborting
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.getChildren(CuratorManager.java:137)
	at com.hubspot.singularity.data.TaskManager.getNumNonstartupHealthchecks(TaskManager.java:518)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheck(SingularityHealthchecker.java:98)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.reEnqueueOrAbort(SingularityHealthchecker.java:203)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:101)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.getChildren(CuratorFrameworkImpl.java:379)
	at com.hubspot.singularity.data.CuratorManager.getChildren(CuratorManager.java:130)
	... 15 common frames omitted
16:12:52.034 [Time-limited test] WARN com.hubspot.singularity.scheduler.SingularityLeaderCache - savePendingTask SingularityPendingTask{pendingTaskId=r1-d1-23-3-BOUNCE-1, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}, but not active
16:12:52.042 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:52.057 [Time-limited test] WARN com.hubspot.singularity.scheduler.SingularityLeaderCache - savePendingTask SingularityPendingTask{pendingTaskId=r2-d3-231-1-UNPAUSED-23, cmdLineArgsList=Optional[[cmd line args]], user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}, but not active
16:12:52.087 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:52.104 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Not rewriting path r2-de, already correct
16:12:52.106 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Not rewriting path r1-d1, already correct
16:12:52.107 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Applied PendingRequestDataMigration to 0 requests in 00:00.020
16:12:52.227 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:52.378 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:52.380 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:52.467 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 28.517 sec - in com.hubspot.singularity.data.StateManagerTest
16:12:52.472 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:52.487 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:38898] WARN org.apache.zookeeper.server.NIOServerCnxnFactory - Ignoring unexpected runtime exception
java.nio.channels.CancelledKeyException: null
	at sun.nio.ch.SelectionKeyImpl.ensureValid(SelectionKeyImpl.java:73)
	at sun.nio.ch.SelectionKeyImpl.readyOps(SelectionKeyImpl.java:87)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:187)
	at java.lang.Thread.run(Thread.java:745)
16:12:52.522 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:52.576 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:52.688 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:52.751 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 28.849 sec - in com.hubspot.singularity.data.InactiveSlaveManagerTest
16:12:52.919 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920772619-1-host1-rack1
16:12:52.962 [Time-limited test] WARN com.hubspot.singularity.data.history.SingularityRequestHistoryPersister - Failed to persist SingularityRequestHistory{createdAt=1519909972924, user=Optional.empty, eventType=CREATED, request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional.empty, skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, message=Optional.empty} into History
java.lang.UnsupportedOperationException: NoopHistoryManager can not save
	at com.hubspot.singularity.data.history.NoopHistoryManager.saveRequestHistoryUpdate(NoopHistoryManager.java:26)
	at com.hubspot.singularity.data.history.SingularityRequestHistoryPersister.moveToHistory(SingularityRequestHistoryPersister.java:141)
	at com.hubspot.singularity.data.history.SingularityRequestHistoryPersister.moveToHistory(SingularityRequestHistoryPersister.java:25)
	at com.hubspot.singularity.data.history.SingularityHistoryPersister.moveToHistoryOrCheckForPurgeAndShouldDelete(SingularityHistoryPersister.java:63)
	at com.hubspot.singularity.data.history.SingularityHistoryPersister.moveToHistoryOrCheckForPurge(SingularityHistoryPersister.java:52)
	at com.hubspot.singularity.data.history.SingularityRequestHistoryPersister.runActionOnPoll(SingularityRequestHistoryPersister.java:119)
	at com.hubspot.singularity.scheduler.HistoryPersisterTest.testPurgingDoesntApplyIfDatabasePresent(HistoryPersisterTest.java:211)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:745)
16:12:52.992 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:46088] WARN org.apache.zookeeper.server.NIOServerCnxn - caught end of stream exception
org.apache.zookeeper.server.ServerCnxn$EndOfStreamException: Unable to read additional data from client sessionid 0x161e256711a0000, likely client has closed socket
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:208)
	at java.lang.Thread.run(Thread.java:745)
16:12:53.068 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920772689-1-host1-rack1
16:12:53.071 [status-updates-0] WARN com.hubspot.singularity.scheduler.SingularityScheduler - Not scheduling a new task, test-request is PAUSED
16:12:53.095 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920772589-1-host1-rack1
16:12:53.099 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:53.106 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:53.128 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:53.176 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:40983] WARN org.apache.zookeeper.server.NIOServerCnxn - caught end of stream exception
org.apache.zookeeper.server.ServerCnxn$EndOfStreamException: Unable to read additional data from client sessionid 0x161e25670040000, likely client has closed socket
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:208)
	at java.lang.Thread.run(Thread.java:745)
16:12:53.288 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:41823] WARN org.apache.zookeeper.server.NIOServerCnxn - caught end of stream exception
org.apache.zookeeper.server.ServerCnxn$EndOfStreamException: Unable to read additional data from client sessionid 0x161e256734a0000, likely client has closed socket
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:208)
	at java.lang.Thread.run(Thread.java:745)
[immediateRequest-immediateDeploy, oneOffRequest-oneOffDeploy1519920773368, newDeployRequest-newDeploy]
16:12:53.399 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:53.401 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Rewriting path immediateRequest-immediateDeploy to immediateRequest-immediateDeploy1519920773368
16:12:53.405 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Not rewriting path oneOffRequest-oneOffDeploy1519920773368, already correct
16:12:53.406 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Not rewriting path newDeployRequest-newDeploy, already correct
16:12:53.406 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Applied PendingRequestDataMigration to 1 requests in 00:00.006
[immediateRequest-immediateDeploy1519920773368, oneOffRequest-oneOffDeploy1519920773368, newDeployRequest-newDeploy]
16:12:53.416 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:33702] WARN org.apache.zookeeper.server.NIOServerCnxn - caught end of stream exception
org.apache.zookeeper.server.ServerCnxn$EndOfStreamException: Unable to read additional data from client sessionid 0x161e25670900000, likely client has closed socket
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:208)
	at java.lang.Thread.run(Thread.java:745)
16:12:53.425 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 30.091 sec - in com.hubspot.singularity.data.zkmigrations.ZkMigrationTest
16:12:53.638 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
16:12:53.767 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:53.840 [Time-limited test] WARN com.hubspot.singularity.mesos.SingularityMesosScheduler - Lost a slave value: "slave1"

16:12:53.876 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:53.885 [Time-limited test] WARN com.hubspot.singularity.mesos.SingularityMesosScheduler - Lost a slave value: "slave1"

16:12:53.894 [Time-limited test] WARN com.hubspot.singularity.mesos.SingularityMesosScheduler - Lost a slave value: "slave1"

16:12:54.045 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:54.160 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:54.200 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:54.214 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:54.216 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:54.421 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920774321-1-host1-rack1
16:12:54.427 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 30.72 sec - in com.hubspot.singularity.mesos.SingularityTaskShellCommandTest
16:12:54.488 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:54.605 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
16:12:54.712 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:54.795 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.utils.ZKPaths.mkdirs(ZKPaths.java:232)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:702)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
16:12:54.981 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-10000-1-host1-rack1
16:12:55.008 [healthcheck-pool-0] WARN com.hubspot.singularity.scheduler.SingularityHealthchecker - Couldn't find a port for health check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional.empty, skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='firstDeployId', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional[HealthcheckOptions{uri='http://uri', portIndex=Optional.empty, portNumber=Optional.empty, protocol=Optional.empty, startupTimeoutSeconds=Optional.empty, startupDelaySeconds=Optional.empty, startupIntervalSeconds=Optional.empty, intervalSeconds=Optional.empty, responseTimeoutSeconds=Optional.empty, maxRetries=Optional.empty, failureStatusCodes=Optional.empty}], skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-firstDeployId-1519920772970-1-IMMEDIATE-1519920772970, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer83'}, allOtherFields={resources=[{name=cpus, type=SCALAR, scalar={value=125.0}}, {name=mem, type=SCALAR, scalar={value=1024.0}}, {name=disk, type=SCALAR, scalar={value=2048.0}}, {name=ports, type=RANGES, ranges={range=[]}}], attributes=[{name=rackid, type=TEXT, text={value=DEFAULT}}], executorIds=[], url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-firstDeployId-1519920772970-1-host1-rack1'}, executor=Optional[MesosExecutorInfo{executorId=Optional[SingularityMesosIdObject{value='executorID'}], allOtherFields={resources=[]}}], labels=null, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[], name='name', allOtherFields={}}, rackId=Optional[rack1]}
16:12:55.010 [healthcheck-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while saving health check result for test-request-firstDeployId-1519920772970-1-host1-rack1, will re-enqueue
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.TaskManager.canSaveNewHealthcheck(TaskManager.java:329)
	at com.hubspot.singularity.data.TaskManager.saveHealthcheckResult(TaskManager.java:318)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:76)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 15 common frames omitted
16:12:55.016 [healthcheck-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while re-enqueuing health check for test-request-firstDeployId-1519920772970-1-host1-rack1, aborting
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@7f895a19 rejected from java.util.concurrent.ScheduledThreadPoolExecutor@714eab98[Shutting down, pool size = 2, active threads = 1, queued tasks = 0, completed tasks = 0]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)
	at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:326)
	at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:533)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheckWithDelay(SingularityHealthchecker.java:184)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheck(SingularityHealthchecker.java:103)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.reEnqueueOrAbort(SingularityHealthchecker.java:203)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:101)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
16:12:55.034 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-2-firstDeployId-15000-1-host1-rack1
16:12:55.046 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave3 for task test-request-2-firstDeployId-35000-3-host3-rack1
16:12:55.070 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave2 for task test-request-2-firstDeployId-25000-2-host2-rack1
16:12:55.123 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:55.128 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:55.181 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave2 for task test-request-firstDeployId-20000-2-host2-rack1
16:12:55.196 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave3 for task test-request-firstDeployId-30000-3-host3-rack1
16:12:55.208 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave7 for task test-request-2-firstDeployId-70000-7-host7-rack1
16:12:55.300 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:36786] WARN org.apache.zookeeper.server.NIOServerCnxn - caught end of stream exception
org.apache.zookeeper.server.ServerCnxn$EndOfStreamException: Unable to read additional data from client sessionid 0x161e256774d0000, likely client has closed socket
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:208)
	at java.lang.Thread.run(Thread.java:745)
16:12:55.439 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:55.541 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 32.281 sec - in com.hubspot.singularity.scheduler.SingularityCachedOffersTest
16:12:55.711 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:55.730 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:55.813 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
16:12:55.913 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:55.942 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:56.022 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:35343] WARN org.apache.zookeeper.server.NIOServerCnxn - caught end of stream exception
org.apache.zookeeper.server.ServerCnxn$EndOfStreamException: Unable to read additional data from client sessionid 0x161e2567b2f0000, likely client has closed socket
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:208)
	at java.lang.Thread.run(Thread.java:745)
Tests run: 5, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 32.537 sec <<< FAILURE! - in com.hubspot.singularity.mesos.SingularityMesosOfferSchedulerTest
itAccountsForExpectedTaskUsage(com.hubspot.singularity.mesos.SingularityMesosOfferSchedulerTest)  Time elapsed: 2.107 sec  <<< ERROR!
java.lang.NullPointerException: executorId
	at com.hubspot.singularity.mesos.SingularityMesosOfferSchedulerTest.itAccountsForExpectedTaskUsage(SingularityMesosOfferSchedulerTest.java:352)

16:12:56.063 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 32.238 sec - in com.hubspot.singularity.mesos.SingularityStartupTest
16:12:56.231 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:56.239 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:56.340 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:56.538 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:56.877 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:56.967 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
16:12:56.969 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 33.302 sec - in com.hubspot.singularity.data.SandboxManagerTest
16:12:57.046 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519909976915-1-host1-rack1
16:12:57.206 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:57.502 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:57.845 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:57.878 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:57.990 [Time-limited test] WARN com.hubspot.singularity.mesos.SingularityMesosScheduler - Not using custom executor, will not send framework message to destroy task
16:12:58.001 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920777952-2-host1-rack1
[]
16:12:58.030 [check-new-task-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityNewTaskChecker - Uncaught throwable in task check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional.empty, skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[true], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='firstDeployId', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional.empty, skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-firstDeployId-1519909977015-2-IMMEDIATE-1519909977015, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer557'}, allOtherFields={resources=[{name=cpus, type=SCALAR, scalar={value=125.0}}, {name=mem, type=SCALAR, scalar={value=1024.0}}, {name=disk, type=SCALAR, scalar={value=2048.0}}, {name=ports, type=RANGES, ranges={range=[]}}], attributes=[{name=rackid, type=TEXT, text={value=DEFAULT}}], executorIds=[], url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-firstDeployId-1519909977015-2-host1-rack1'}, executor=Optional[MesosExecutorInfo{executorId=Optional[SingularityMesosIdObject{value='executorID'}], allOtherFields={resources=[]}}], labels=null, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[], name='name', allOtherFields={}}, rackId=Optional[rack1]}, re-enqueing
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.DisasterManager.isDisabled(DisasterManager.java:55)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.hasHealthcheck(SingularityNewTaskChecker.java:96)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.getTaskState(SingularityNewTaskChecker.java:313)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.checkTask(SingularityNewTaskChecker.java:254)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.lambda$getTaskCheck$0(SingularityNewTaskChecker.java:209)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 13 common frames omitted
16:12:58.033 [check-new-task-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityNewTaskChecker - Uncaught throwable re-enqueuing task check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional.empty, skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[true], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='firstDeployId', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional.empty, skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-firstDeployId-1519909977015-2-IMMEDIATE-1519909977015, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer557'}, allOtherFields={resources=[{name=cpus, type=SCALAR, scalar={value=125.0}}, {name=mem, type=SCALAR, scalar={value=1024.0}}, {name=disk, type=SCALAR, scalar={value=2048.0}}, {name=ports, type=RANGES, ranges={range=[]}}], attributes=[{name=rackid, type=TEXT, text={value=DEFAULT}}], executorIds=[], url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-firstDeployId-1519909977015-2-host1-rack1'}, executor=Optional[MesosExecutorInfo{executorId=Optional[SingularityMesosIdObject{value='executorID'}], allOtherFields={resources=[]}}], labels=null, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[], name='name', allOtherFields={}}, rackId=Optional[rack1]}, aborting
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@73feec5d rejected from java.util.concurrent.ScheduledThreadPoolExecutor@1caa9b8c[Shutting down, pool size = 2, active threads = 1, queued tasks = 0, completed tasks = 0]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)
	at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:326)
	at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:533)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.enqueueCheckWithDelay(SingularityNewTaskChecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.reEnqueueCheck(SingularityNewTaskChecker.java:236)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.reEnqueueCheckOrAbort(SingularityNewTaskChecker.java:227)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.lambda$getTaskCheck$0(SingularityNewTaskChecker.java:220)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
16:12:58.078 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
16:12:58.249 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:58.268 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:58.322 [Time-limited test] WARN com.hubspot.singularity.scheduler.SingularityDeployChecker - Deploy SingularityPendingDeploy{deployMarker=SingularityDeployMarker{requestId='test-request', deployId='timeout_test', timestamp=1519917178264, user=Optional.empty, message=Optional.empty}, lastLoadBalancerUpdate=Optional.empty, currentDeployState=WAITING, deployProgress=Optional[SingularityIncrementalDeployProgress{targetActiveInstances=1, currentActiveInstances=0, deployInstanceCountPerStep=1, deployStepWaitTimeMs=10, stepComplete=false, autoAdvanceDeploySteps=true, failedDeployTasks=[], timestamp=1519917178264}], updatedRequest=Optional.empty} is overdue (duration: 01:00:00.058), allowed: 00:01:00.000
16:12:58.526 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:58.860 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:59.031 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:59.071 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:59.217 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
16:12:59.218 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 35.596 sec - in com.hubspot.singularity.scheduler.HistoryPersisterTest
16:12:59.442 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:12:59.697 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:00.164 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:00.346 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
16:13:00.381 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:00.458 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:00.650 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:00.779 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920780696-1-host1-rack1
16:13:00.999 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:01.334 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:01.438 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:01.638 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:01.676 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:01.820 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:35077] WARN org.apache.zookeeper.server.NIOServerCnxn - caught end of stream exception
org.apache.zookeeper.server.ServerCnxn$EndOfStreamException: Unable to read additional data from client sessionid 0x161e2567f780000, likely client has closed socket
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:208)
	at java.lang.Thread.run(Thread.java:745)
16:13:01.827 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:01.948 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:02.310 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:02.618 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:02.726 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920782645-1-host1-rack1
16:13:02.748 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
16:13:02.807 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:02.986 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:03.007 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:03.584 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:03.606 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
Tests run: 10, Failures: 0, Errors: 9, Skipped: 0, Time elapsed: 39.291 sec <<< FAILURE! - in com.hubspot.singularity.scheduler.SingularityUsageTest
testUsagePollerComplex(com.hubspot.singularity.scheduler.SingularityUsageTest)  Time elapsed: 21.519 sec  <<< ERROR!
java.lang.NullPointerException: executorId
	at com.hubspot.singularity.scheduler.SingularityUsageTest.testUsagePollerComplex(SingularityUsageTest.java:142)

itCorrectlyTracksMaxAndMinUtilizedPerRequest(com.hubspot.singularity.scheduler.SingularityUsageTest)  Time elapsed: 1.513 sec  <<< ERROR!
java.lang.NullPointerException: executorId
	at com.hubspot.singularity.scheduler.SingularityUsageTest.itCorrectlyTracksMaxAndMinUtilizedPerRequest(SingularityUsageTest.java:429)

itCreatesTaskCleanupsWhenAMachineIsOverloaded(com.hubspot.singularity.scheduler.SingularityUsageTest)  Time elapsed: 2.621 sec  <<< ERROR!
java.lang.NullPointerException: executorId
	at com.hubspot.singularity.scheduler.SingularityUsageTest.itCreatesTaskCleanupsWhenAMachineIsOverloaded(SingularityUsageTest.java:530)

itTracksOverusedCpuInClusterUtilization(com.hubspot.singularity.scheduler.SingularityUsageTest)  Time elapsed: 1.557 sec  <<< ERROR!
java.lang.NullPointerException: executorId
	at com.hubspot.singularity.scheduler.SingularityUsageTest.itTracksOverusedCpuInClusterUtilization(SingularityUsageTest.java:298)

itCorrectlyDeterminesResourcesReservedForRequestsWithMultipleTasks(com.hubspot.singularity.scheduler.SingularityUsageTest)  Time elapsed: 1.343 sec  <<< ERROR!
java.lang.NullPointerException: executorId
	at com.hubspot.singularity.scheduler.SingularityUsageTest.itCorrectlyDeterminesResourcesReservedForRequestsWithMultipleTasks(SingularityUsageTest.java:387)

itDoesntIncludePerfectlyUtilizedRequestsInClusterUtilization(com.hubspot.singularity.scheduler.SingularityUsageTest)  Time elapsed: 1.275 sec  <<< ERROR!
java.lang.NullPointerException: executorId
	at com.hubspot.singularity.scheduler.SingularityUsageTest.itDoesntIncludePerfectlyUtilizedRequestsInClusterUtilization(SingularityUsageTest.java:261)

testUsagePollerSimple(com.hubspot.singularity.scheduler.SingularityUsageTest)  Time elapsed: 1.332 sec  <<< ERROR!
java.lang.NullPointerException: executorId
	at com.hubspot.singularity.scheduler.SingularityUsageTest.testUsagePollerSimple(SingularityUsageTest.java:57)

testUsageCleaner(com.hubspot.singularity.scheduler.SingularityUsageTest)  Time elapsed: 1.273 sec  <<< ERROR!
java.lang.NullPointerException: executorId
	at com.hubspot.singularity.scheduler.SingularityUsageTest.testUsageCleaner(SingularityUsageTest.java:93)

itTracksClusterUtilizationSimple(com.hubspot.singularity.scheduler.SingularityUsageTest)  Time elapsed: 1.247 sec  <<< ERROR!
java.lang.NullPointerException: executorId
	at com.hubspot.singularity.scheduler.SingularityUsageTest.itTracksClusterUtilizationSimple(SingularityUsageTest.java:223)

16:13:03.868 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
16:13:03.927 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:03.955 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:04.000 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:04.157 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:04.246 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:04.877 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:05.008 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 41.277 sec - in com.hubspot.singularity.scheduler.SingularityExpiringActionsTest
16:13:05.314 [healthcheck-pool-1] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while saving health check result for test-request-firstDeployId-1519920783130-2-host1-DEFAULT, will re-enqueue
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.TaskManager.canSaveNewHealthcheck(TaskManager.java:329)
	at com.hubspot.singularity.data.TaskManager.saveHealthcheckResult(TaskManager.java:318)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:76)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:302)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 15 common frames omitted
16:13:05.315 [healthcheck-pool-1] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while re-enqueuing health check for test-request-firstDeployId-1519920783130-2-host1-DEFAULT, aborting
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@4aa85894 rejected from java.util.concurrent.ScheduledThreadPoolExecutor@446fafb1[Shutting down, pool size = 2, active threads = 1, queued tasks = 0, completed tasks = 1]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)
	at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:326)
	at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:533)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheckWithDelay(SingularityHealthchecker.java:184)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheck(SingularityHealthchecker.java:103)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.reEnqueueOrAbort(SingularityHealthchecker.java:203)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:101)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:302)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
16:13:05.413 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:05.527 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:06.167 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:06.190 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
16:13:06.341 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:06.395 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1-1-host1-rack1
16:13:06.404 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave2 for task test-request-firstDeployId-2-2-host2-rack1
16:13:06.414 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave6 for task test-request-secondDeployId-6-6-host6-rack1
16:13:06.420 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave4 for task test-request-secondDeployId-4-4-host4-rack1
16:13:06.428 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave3 for task test-request-firstDeployId-3-3-host3-rack1
16:13:06.435 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave5 for task test-request-secondDeployId-5-5-host5-rack1
16:13:06.443 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave7 for task test-request-secondDeployId-7-7-host7-rack1
16:13:06.456 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920786366-1-host1-rack1
16:13:06.457 [status-updates-0] WARN com.hubspot.singularity.scheduler.SingularityScheduler - Not scheduling a new task, test-request is PAUSED
16:13:06.462 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:06.677 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:06.779 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:06.891 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 43.924 sec - in com.hubspot.singularity.scheduler.SingularitySlavePlacementTest
16:13:07.312 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
16:13:07.603 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:07.656 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:07.779 [Time-limited test] WARN com.hubspot.singularity.mesos.SingularityMesosScheduler - Not using custom executor, will not send framework message to destroy task
16:13:07.782 [Time-limited test] WARN com.hubspot.singularity.scheduler.SingularityCleaner - All tasks for requestId test-request are now killed, re-enqueueing request cleanup
16:13:07.788 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920787686-1-host1-rack1
16:13:07.789 [status-updates-0] WARN com.hubspot.singularity.scheduler.SingularityScheduler - Not scheduling a new task, test-request is DELETING
16:13:07.821 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-10000-1-host1-rack1
16:13:07.831 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave2 for task test-request-firstDeployId-20000-2-host2-rack1
16:13:07.842 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave6 for task test-request-secondDeployId-60000-6-host6-rack1
16:13:07.850 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave4 for task test-request-secondDeployId-40000-4-host4-rack1
16:13:07.871 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:07.916 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave3 for task test-request-firstDeployId-30000-3-host3-rack1
16:13:07.926 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave5 for task test-request-secondDeployId-50000-5-host5-rack1
16:13:07.933 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave7 for task test-request-secondDeployId-70000-7-host7-rack1
Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 44.298 sec - in com.hubspot.singularity.SingularityHistoryTest
16:13:08.184 [check-new-task-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityNewTaskChecker - Uncaught throwable in task check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional[2], skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='firstDeployId', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional[HealthcheckOptions{uri='http://uri', portIndex=Optional.empty, portNumber=Optional[81], protocol=Optional.empty, startupTimeoutSeconds=Optional.empty, startupDelaySeconds=Optional[0], startupIntervalSeconds=Optional.empty, intervalSeconds=Optional[0], responseTimeoutSeconds=Optional.empty, maxRetries=Optional.empty, failureStatusCodes=Optional.empty}], skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-firstDeployId-1519920783094-2-UPDATED_REQUEST-1519920783066, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer515'}, allOtherFields={url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-firstDeployId-1519920783130-2-host1-DEFAULT'}, executor=Optional.empty, labels=MesosLabels{labels=[]}, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[MesosResourceObject{name=Optional[cpus], ranges=Optional.empty, allOtherFields={scalar={value=1.0}, type=SCALAR}}, MesosResourceObject{name=Optional[mem], ranges=Optional.empty, allOtherFields={scalar={value=128.0}, type=SCALAR}}, MesosResourceObject{name=Optional[disk], ranges=Optional.empty, allOtherFields={scalar={value=1024.0}, type=SCALAR}}], name='test-request', allOtherFields={command={uris=[], environment={variables=[{name=TASK_DEPLOY_ID, value=firstDeployId}, {name=INSTANCE_NO, value=2}, {name=TASK_REQUEST_ID, value=test-request}, {name=AVAILABILITY_ZONE, value=DEFAULT}, {name=ESTIMATED_INSTANCE_COUNT, value=2}, {name=TASK_HOST, value=host1}, {name=TASK_RACK_ID, value=DEFAULT}, {name=TASK_ID, value=test-request-firstDeployId-1519920783130-2-host1-DEFAULT}]}, value=sleep 100, arguments=[]}}}, rackId=Optional[DEFAULT]}, re-enqueing
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.DisasterManager.isDisabled(DisasterManager.java:55)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.hasHealthcheck(SingularityNewTaskChecker.java:96)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.getTaskState(SingularityNewTaskChecker.java:313)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.checkTask(SingularityNewTaskChecker.java:254)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.lambda$getTaskCheck$0(SingularityNewTaskChecker.java:209)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 13 common frames omitted
16:13:08.187 [check-new-task-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityNewTaskChecker - Uncaught throwable re-enqueuing task check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional[2], skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='firstDeployId', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional[HealthcheckOptions{uri='http://uri', portIndex=Optional.empty, portNumber=Optional[81], protocol=Optional.empty, startupTimeoutSeconds=Optional.empty, startupDelaySeconds=Optional[0], startupIntervalSeconds=Optional.empty, intervalSeconds=Optional[0], responseTimeoutSeconds=Optional.empty, maxRetries=Optional.empty, failureStatusCodes=Optional.empty}], skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-firstDeployId-1519920783094-2-UPDATED_REQUEST-1519920783066, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer515'}, allOtherFields={url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-firstDeployId-1519920783130-2-host1-DEFAULT'}, executor=Optional.empty, labels=MesosLabels{labels=[]}, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[MesosResourceObject{name=Optional[cpus], ranges=Optional.empty, allOtherFields={scalar={value=1.0}, type=SCALAR}}, MesosResourceObject{name=Optional[mem], ranges=Optional.empty, allOtherFields={scalar={value=128.0}, type=SCALAR}}, MesosResourceObject{name=Optional[disk], ranges=Optional.empty, allOtherFields={scalar={value=1024.0}, type=SCALAR}}], name='test-request', allOtherFields={command={uris=[], environment={variables=[{name=TASK_DEPLOY_ID, value=firstDeployId}, {name=INSTANCE_NO, value=2}, {name=TASK_REQUEST_ID, value=test-request}, {name=AVAILABILITY_ZONE, value=DEFAULT}, {name=ESTIMATED_INSTANCE_COUNT, value=2}, {name=TASK_HOST, value=host1}, {name=TASK_RACK_ID, value=DEFAULT}, {name=TASK_ID, value=test-request-firstDeployId-1519920783130-2-host1-DEFAULT}]}, value=sleep 100, arguments=[]}}}, rackId=Optional[DEFAULT]}, aborting
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@6594347e rejected from java.util.concurrent.ScheduledThreadPoolExecutor@61abbc14[Shutting down, pool size = 2, active threads = 1, queued tasks = 0, completed tasks = 1]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)
	at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:326)
	at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:533)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.enqueueCheckWithDelay(SingularityNewTaskChecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.reEnqueueCheck(SingularityNewTaskChecker.java:236)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.reEnqueueCheckOrAbort(SingularityNewTaskChecker.java:227)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.lambda$getTaskCheck$0(SingularityNewTaskChecker.java:220)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
16:13:08.261 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:08.344 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920788307-1-host1-rack1
16:13:08.369 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920788356-1-host1-rack1
16:13:08.444 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
16:13:08.950 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:09.025 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:09.507 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:09.550 [SingularityStatePoller] ERROR com.hubspot.singularity.SingularityLeaderController - Caught exception while saving state
java.lang.RuntimeException: java.lang.InterruptedException
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:118)
	at com.hubspot.singularity.SingularityLeaderController$StatePoller.run(SingularityLeaderController.java:199)
Caused by: java.lang.InterruptedException: null
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:502)
	at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1342)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:781)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:696)
	at org.apache.curator.framework.imps.CreateBuilderImpl$11.call(CreateBuilderImpl.java:679)
	at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:107)
	at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:676)
	at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:453)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:443)
	at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:44)
	at com.hubspot.singularity.data.StateManager.save(StateManager.java:115)
	... 1 common frames omitted
Tests run: 18, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 46.33 sec - in com.hubspot.singularity.data.ValidatorTest
16:13:09.609 [healthcheck-pool-0] WARN com.hubspot.singularity.scheduler.SingularityHealthchecker - Couldn't find a port for health check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional.empty, skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='firstDeployId', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional[HealthcheckOptions{uri='http://uri', portIndex=Optional.empty, portNumber=Optional.empty, protocol=Optional.empty, startupTimeoutSeconds=Optional.empty, startupDelaySeconds=Optional.empty, startupIntervalSeconds=Optional.empty, intervalSeconds=Optional.empty, responseTimeoutSeconds=Optional.empty, maxRetries=Optional.empty, failureStatusCodes=Optional.empty}], skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-firstDeployId-1519920786540-1-IMMEDIATE-1519920786540, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer284'}, allOtherFields={resources=[{name=cpus, type=SCALAR, scalar={value=125.0}}, {name=mem, type=SCALAR, scalar={value=1024.0}}, {name=disk, type=SCALAR, scalar={value=2048.0}}, {name=ports, type=RANGES, ranges={range=[]}}], attributes=[{name=rackid, type=TEXT, text={value=DEFAULT}}], executorIds=[], url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-firstDeployId-1519920786540-1-host1-rack1'}, executor=Optional[MesosExecutorInfo{executorId=Optional[SingularityMesosIdObject{value='executorID'}], allOtherFields={resources=[]}}], labels=null, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[], name='name', allOtherFields={}}, rackId=Optional[rack1]}
16:13:09.656 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920786540-1-host1-rack1
16:13:10.180 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:10.824 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:11.231 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:11.520 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:11.908 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:12.816 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
Tests run: 16, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 49.331 sec - in com.hubspot.singularity.scheduler.SingularityMachineStatesTest
16:13:12.993 [healthcheck-pool-1] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while saving health check result for test-request-firstDeployId-1519920790927-2-host1-DEFAULT, will re-enqueue
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.TaskManager.canSaveNewHealthcheck(TaskManager.java:329)
	at com.hubspot.singularity.data.TaskManager.saveHealthcheckResult(TaskManager.java:318)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:76)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:302)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 15 common frames omitted
16:13:12.993 [healthcheck-pool-1] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while re-enqueuing health check for test-request-firstDeployId-1519920790927-2-host1-DEFAULT, aborting
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@521f9e3b rejected from java.util.concurrent.ScheduledThreadPoolExecutor@562000a0[Shutting down, pool size = 2, active threads = 1, queued tasks = 0, completed tasks = 1]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)
	at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:326)
	at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:533)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheckWithDelay(SingularityHealthchecker.java:184)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheck(SingularityHealthchecker.java:103)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.reEnqueueOrAbort(SingularityHealthchecker.java:203)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:101)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:302)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
16:13:13.357 [healthcheck-pool-0] WARN com.hubspot.singularity.scheduler.SingularityHealthchecker - Couldn't find a port for health check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional.empty, skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='firstDeployId', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional[http://uri], healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional[HealthcheckOptions{uri='http://uri', portIndex=Optional.empty, portNumber=Optional.empty, protocol=Optional.empty, startupTimeoutSeconds=Optional.empty, startupDelaySeconds=Optional.empty, startupIntervalSeconds=Optional.empty, intervalSeconds=Optional.empty, responseTimeoutSeconds=Optional.empty, maxRetries=Optional.empty, failureStatusCodes=Optional.empty}], skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-firstDeployId-1519920792275-1-IMMEDIATE-1519920792275, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer415'}, allOtherFields={resources=[{name=cpus, type=SCALAR, scalar={value=125.0}}, {name=mem, type=SCALAR, scalar={value=1024.0}}, {name=disk, type=SCALAR, scalar={value=2048.0}}, {name=ports, type=RANGES, ranges={range=[]}}], attributes=[{name=rackid, type=TEXT, text={value=DEFAULT}}], executorIds=[], url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-firstDeployId-1519920792275-1-host1-rack1'}, executor=Optional[MesosExecutorInfo{executorId=Optional[SingularityMesosIdObject{value='executorID'}], allOtherFields={resources=[]}}], labels=null, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[], name='name', allOtherFields={}}, rackId=Optional[rack1]}
16:13:13.366 [healthcheck-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while saving health check result for test-request-firstDeployId-1519920792275-1-host1-rack1, will re-enqueue
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.TaskManager.canSaveNewHealthcheck(TaskManager.java:329)
	at com.hubspot.singularity.data.TaskManager.saveHealthcheckResult(TaskManager.java:318)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:76)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 15 common frames omitted
16:13:13.369 [healthcheck-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while re-enqueuing health check for test-request-firstDeployId-1519920792275-1-host1-rack1, aborting
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@6fb8745d rejected from java.util.concurrent.ScheduledThreadPoolExecutor@6038532a[Shutting down, pool size = 3, active threads = 1, queued tasks = 2, completed tasks = 0]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)
	at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:326)
	at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:533)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheckWithDelay(SingularityHealthchecker.java:184)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheck(SingularityHealthchecker.java:103)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.reEnqueueOrAbort(SingularityHealthchecker.java:203)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:101)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
16:13:13.381 [healthcheck-pool-2] WARN com.hubspot.singularity.scheduler.SingularityHealthchecker - Couldn't find a port for health check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional[2], skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='firstDeployId', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional[http://uri], healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional[HealthcheckOptions{uri='http://uri', portIndex=Optional.empty, portNumber=Optional.empty, protocol=Optional.empty, startupTimeoutSeconds=Optional.empty, startupDelaySeconds=Optional.empty, startupIntervalSeconds=Optional.empty, intervalSeconds=Optional.empty, responseTimeoutSeconds=Optional.empty, maxRetries=Optional.empty, failureStatusCodes=Optional.empty}], skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-firstDeployId-1519920795275-2-IMMEDIATE-1519920795275, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer448'}, allOtherFields={resources=[{name=cpus, type=SCALAR, scalar={value=125.0}}, {name=mem, type=SCALAR, scalar={value=1024.0}}, {name=disk, type=SCALAR, scalar={value=2048.0}}, {name=ports, type=RANGES, ranges={range=[]}}], attributes=[{name=rackid, type=TEXT, text={value=DEFAULT}}], executorIds=[], url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-firstDeployId-1519920795275-2-host1-rack1'}, executor=Optional[MesosExecutorInfo{executorId=Optional[SingularityMesosIdObject{value='executorID'}], allOtherFields={resources=[]}}], labels=null, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[], name='name', allOtherFields={}}, rackId=Optional[rack1]}
16:13:13.382 [healthcheck-pool-2] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while saving health check result for test-request-firstDeployId-1519920795275-2-host1-rack1, will re-enqueue
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.TaskManager.canSaveNewHealthcheck(TaskManager.java:329)
	at com.hubspot.singularity.data.TaskManager.saveHealthcheckResult(TaskManager.java:318)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:76)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 15 common frames omitted
16:13:13.384 [healthcheck-pool-2] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while re-enqueuing health check for test-request-firstDeployId-1519920795275-2-host1-rack1, aborting
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@40bb517b rejected from java.util.concurrent.ScheduledThreadPoolExecutor@6038532a[Shutting down, pool size = 3, active threads = 1, queued tasks = 1, completed tasks = 1]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)
	at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:326)
	at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:533)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheckWithDelay(SingularityHealthchecker.java:184)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheck(SingularityHealthchecker.java:103)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.reEnqueueOrAbort(SingularityHealthchecker.java:203)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:101)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
16:13:13.413 [healthcheck-pool-1] WARN com.hubspot.singularity.scheduler.SingularityHealthchecker - Couldn't find a port for health check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional[2], skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='firstDeployId', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional[http://uri], healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional[HealthcheckOptions{uri='http://uri', portIndex=Optional.empty, portNumber=Optional.empty, protocol=Optional.empty, startupTimeoutSeconds=Optional.empty, startupDelaySeconds=Optional.empty, startupIntervalSeconds=Optional.empty, intervalSeconds=Optional.empty, responseTimeoutSeconds=Optional.empty, maxRetries=Optional.empty, failureStatusCodes=Optional.empty}], skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-firstDeployId-1519920795275-3-IMMEDIATE-1519920795275, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer78'}, allOtherFields={resources=[{name=cpus, type=SCALAR, scalar={value=125.0}}, {name=mem, type=SCALAR, scalar={value=1024.0}}, {name=disk, type=SCALAR, scalar={value=2048.0}}, {name=ports, type=RANGES, ranges={range=[]}}], attributes=[{name=rackid, type=TEXT, text={value=DEFAULT}}], executorIds=[], url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-firstDeployId-1519920795275-3-host1-rack1'}, executor=Optional[MesosExecutorInfo{executorId=Optional[SingularityMesosIdObject{value='executorID'}], allOtherFields={resources=[]}}], labels=null, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[], name='name', allOtherFields={}}, rackId=Optional[rack1]}
16:13:13.414 [healthcheck-pool-1] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while saving health check result for test-request-firstDeployId-1519920795275-3-host1-rack1, will re-enqueue
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.TaskManager.canSaveNewHealthcheck(TaskManager.java:329)
	at com.hubspot.singularity.data.TaskManager.saveHealthcheckResult(TaskManager.java:318)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:76)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 15 common frames omitted
16:13:13.415 [healthcheck-pool-1] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while re-enqueuing health check for test-request-firstDeployId-1519920795275-3-host1-rack1, aborting
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@7bf0bd05 rejected from java.util.concurrent.ScheduledThreadPoolExecutor@6038532a[Shutting down, pool size = 3, active threads = 1, queued tasks = 0, completed tasks = 2]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)
	at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:326)
	at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:533)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheckWithDelay(SingularityHealthchecker.java:184)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheck(SingularityHealthchecker.java:103)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.reEnqueueOrAbort(SingularityHealthchecker.java:203)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:101)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
16:13:14.109 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:14.313 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:14.552 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:15.423 [check-new-task-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityNewTaskChecker - Uncaught throwable in task check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional.empty, skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[true], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='firstDeployId', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional.empty, skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-firstDeployId-1519920794404-2-IMMEDIATE-1519920794404, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer302'}, allOtherFields={resources=[{name=cpus, type=SCALAR, scalar={value=125.0}}, {name=mem, type=SCALAR, scalar={value=1024.0}}, {name=disk, type=SCALAR, scalar={value=2048.0}}, {name=ports, type=RANGES, ranges={range=[]}}], attributes=[{name=rackid, type=TEXT, text={value=DEFAULT}}], executorIds=[], url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-firstDeployId-1519920794404-2-host1-rack1'}, executor=Optional[MesosExecutorInfo{executorId=Optional[SingularityMesosIdObject{value='executorID'}], allOtherFields={resources=[]}}], labels=null, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[], name='name', allOtherFields={}}, rackId=Optional[rack1]}, re-enqueing
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.DisasterManager.isDisabled(DisasterManager.java:55)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.hasHealthcheck(SingularityNewTaskChecker.java:96)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.getTaskState(SingularityNewTaskChecker.java:313)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.checkTask(SingularityNewTaskChecker.java:254)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.lambda$getTaskCheck$0(SingularityNewTaskChecker.java:209)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 13 common frames omitted
16:13:15.425 [check-new-task-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityNewTaskChecker - Uncaught throwable re-enqueuing task check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional.empty, skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[true], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='firstDeployId', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional.empty, skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-firstDeployId-1519920794404-2-IMMEDIATE-1519920794404, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer302'}, allOtherFields={resources=[{name=cpus, type=SCALAR, scalar={value=125.0}}, {name=mem, type=SCALAR, scalar={value=1024.0}}, {name=disk, type=SCALAR, scalar={value=2048.0}}, {name=ports, type=RANGES, ranges={range=[]}}], attributes=[{name=rackid, type=TEXT, text={value=DEFAULT}}], executorIds=[], url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-firstDeployId-1519920794404-2-host1-rack1'}, executor=Optional[MesosExecutorInfo{executorId=Optional[SingularityMesosIdObject{value='executorID'}], allOtherFields={resources=[]}}], labels=null, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[], name='name', allOtherFields={}}, rackId=Optional[rack1]}, aborting
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@5d6fb6b4 rejected from java.util.concurrent.ScheduledThreadPoolExecutor@108faf88[Shutting down, pool size = 2, active threads = 1, queued tasks = 0, completed tasks = 0]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)
	at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:326)
	at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:533)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.enqueueCheckWithDelay(SingularityNewTaskChecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.reEnqueueCheck(SingularityNewTaskChecker.java:236)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.reEnqueueCheckOrAbort(SingularityNewTaskChecker.java:227)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.lambda$getTaskCheck$0(SingularityNewTaskChecker.java:220)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
16:13:15.830 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:15.977 [check-new-task-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityNewTaskChecker - Uncaught throwable in task check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional[2], skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='firstDeployId', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional[Resources{cpus=1.0, memoryMb=64.0, numPorts=3, diskMb=0.0}], command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional[HealthcheckOptions{uri='http://uri', portIndex=Optional[1], portNumber=Optional.empty, protocol=Optional.empty, startupTimeoutSeconds=Optional.empty, startupDelaySeconds=Optional[0], startupIntervalSeconds=Optional.empty, intervalSeconds=Optional.empty, responseTimeoutSeconds=Optional.empty, maxRetries=Optional.empty, failureStatusCodes=Optional.empty}], skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-firstDeployId-1519920790899-2-UPDATED_REQUEST-1519920790880, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer231'}, allOtherFields={url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-firstDeployId-1519920790927-2-host1-DEFAULT'}, executor=Optional.empty, labels=MesosLabels{labels=[]}, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[MesosResourceObject{name=Optional[ports], ranges=Optional[MesosRangesObject{range=Optional[[MesosRangeObject{begin=Optional[80], end=Optional[82]}]]}], allOtherFields={type=RANGES}}, MesosResourceObject{name=Optional[cpus], ranges=Optional.empty, allOtherFields={scalar={value=1.0}, type=SCALAR}}, MesosResourceObject{name=Optional[mem], ranges=Optional.empty, allOtherFields={scalar={value=64.0}, type=SCALAR}}, MesosResourceObject{name=Optional[disk], ranges=Optional.empty, allOtherFields={scalar={value=0.0}, type=SCALAR}}], name='test-request', allOtherFields={command={uris=[], environment={variables=[{name=TASK_DEPLOY_ID, value=firstDeployId}, {name=INSTANCE_NO, value=2}, {name=TASK_REQUEST_ID, value=test-request}, {name=PORT0, value=80}, {name=AVAILABILITY_ZONE, value=DEFAULT}, {name=PORT, value=80}, {name=ESTIMATED_INSTANCE_COUNT, value=2}, {name=TASK_HOST, value=host1}, {name=TASK_RACK_ID, value=DEFAULT}, {name=PORT1, value=81}, {name=PORT2, value=82}, {name=TASK_ID, value=test-request-firstDeployId-1519920790927-2-host1-DEFAULT}]}, value=sleep 100, arguments=[]}}}, rackId=Optional[DEFAULT]}, re-enqueing
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.DisasterManager.isDisabled(DisasterManager.java:55)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.hasHealthcheck(SingularityNewTaskChecker.java:96)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.getTaskState(SingularityNewTaskChecker.java:313)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.checkTask(SingularityNewTaskChecker.java:254)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.lambda$getTaskCheck$0(SingularityNewTaskChecker.java:209)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 13 common frames omitted
16:13:15.979 [check-new-task-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityNewTaskChecker - Uncaught throwable re-enqueuing task check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional[2], skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='firstDeployId', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional[Resources{cpus=1.0, memoryMb=64.0, numPorts=3, diskMb=0.0}], command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional[HealthcheckOptions{uri='http://uri', portIndex=Optional[1], portNumber=Optional.empty, protocol=Optional.empty, startupTimeoutSeconds=Optional.empty, startupDelaySeconds=Optional[0], startupIntervalSeconds=Optional.empty, intervalSeconds=Optional.empty, responseTimeoutSeconds=Optional.empty, maxRetries=Optional.empty, failureStatusCodes=Optional.empty}], skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-firstDeployId-1519920790899-2-UPDATED_REQUEST-1519920790880, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer231'}, allOtherFields={url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-firstDeployId-1519920790927-2-host1-DEFAULT'}, executor=Optional.empty, labels=MesosLabels{labels=[]}, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[MesosResourceObject{name=Optional[ports], ranges=Optional[MesosRangesObject{range=Optional[[MesosRangeObject{begin=Optional[80], end=Optional[82]}]]}], allOtherFields={type=RANGES}}, MesosResourceObject{name=Optional[cpus], ranges=Optional.empty, allOtherFields={scalar={value=1.0}, type=SCALAR}}, MesosResourceObject{name=Optional[mem], ranges=Optional.empty, allOtherFields={scalar={value=64.0}, type=SCALAR}}, MesosResourceObject{name=Optional[disk], ranges=Optional.empty, allOtherFields={scalar={value=0.0}, type=SCALAR}}], name='test-request', allOtherFields={command={uris=[], environment={variables=[{name=TASK_DEPLOY_ID, value=firstDeployId}, {name=INSTANCE_NO, value=2}, {name=TASK_REQUEST_ID, value=test-request}, {name=PORT0, value=80}, {name=AVAILABILITY_ZONE, value=DEFAULT}, {name=PORT, value=80}, {name=ESTIMATED_INSTANCE_COUNT, value=2}, {name=TASK_HOST, value=host1}, {name=TASK_RACK_ID, value=DEFAULT}, {name=PORT1, value=81}, {name=PORT2, value=82}, {name=TASK_ID, value=test-request-firstDeployId-1519920790927-2-host1-DEFAULT}]}, value=sleep 100, arguments=[]}}}, rackId=Optional[DEFAULT]}, aborting
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@5a3799eb rejected from java.util.concurrent.ScheduledThreadPoolExecutor@5e081675[Shutting down, pool size = 2, active threads = 1, queued tasks = 0, completed tasks = 1]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)
	at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:326)
	at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:533)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.enqueueCheckWithDelay(SingularityNewTaskChecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.reEnqueueCheck(SingularityNewTaskChecker.java:236)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.reEnqueueCheckOrAbort(SingularityNewTaskChecker.java:227)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.lambda$getTaskCheck$0(SingularityNewTaskChecker.java:220)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
16:13:16.219 [healthcheck-pool-0] WARN com.hubspot.singularity.scheduler.SingularityHealthchecker - Couldn't find a port for health check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional.empty, skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='new_task_healthcheck', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional.empty, arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional[HealthcheckOptions{uri='http://uri', portIndex=Optional.empty, portNumber=Optional.empty, protocol=Optional.empty, startupTimeoutSeconds=Optional.empty, startupDelaySeconds=Optional.empty, startupIntervalSeconds=Optional.empty, intervalSeconds=Optional.empty, responseTimeoutSeconds=Optional.empty, maxRetries=Optional[1], failureStatusCodes=Optional.empty}], skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-new_task_healthcheck-1519920794160-1-IMMEDIATE-1519920794160, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer712'}, allOtherFields={resources=[{name=cpus, type=SCALAR, scalar={value=125.0}}, {name=mem, type=SCALAR, scalar={value=1024.0}}, {name=disk, type=SCALAR, scalar={value=2048.0}}, {name=ports, type=RANGES, ranges={range=[]}}], attributes=[{name=rackid, type=TEXT, text={value=DEFAULT}}], executorIds=[], url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-new_task_healthcheck-1519920794160-1-host1-rack1'}, executor=Optional[MesosExecutorInfo{executorId=Optional[SingularityMesosIdObject{value='executorID'}], allOtherFields={resources=[]}}], labels=null, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[], name='name', allOtherFields={}}, rackId=Optional[rack1]}
16:13:16.221 [healthcheck-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while saving health check result for test-request-new_task_healthcheck-1519920794160-1-host1-rack1, will re-enqueue
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.TaskManager.canSaveNewHealthcheck(TaskManager.java:329)
	at com.hubspot.singularity.data.TaskManager.saveHealthcheckResult(TaskManager.java:318)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:76)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 15 common frames omitted
16:13:16.224 [healthcheck-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while re-enqueuing health check for test-request-new_task_healthcheck-1519920794160-1-host1-rack1, aborting
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.getChildren(CuratorManager.java:137)
	at com.hubspot.singularity.data.TaskManager.getNumNonstartupHealthchecks(TaskManager.java:518)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheck(SingularityHealthchecker.java:98)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.reEnqueueOrAbort(SingularityHealthchecker.java:203)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:101)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.getChildren(CuratorFrameworkImpl.java:379)
	at com.hubspot.singularity.data.CuratorManager.getChildren(CuratorManager.java:130)
	... 15 common frames omitted
16:13:16.512 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:17.061 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:17.364 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:17.761 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:18.331 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:18.451 [Time-limited test] WARN com.hubspot.singularity.mesos.SingularityMesosScheduler - Not using custom executor, will not send framework message to destroy task
16:13:18.454 [Time-limited test] WARN com.hubspot.singularity.mesos.SingularityMesosScheduler - Not using custom executor, will not send framework message to destroy task
16:13:18.457 [Time-limited test] WARN com.hubspot.singularity.scheduler.SingularityCleaner - All tasks for requestId test-request are now killed, re-enqueueing request cleanup
16:13:18.461 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920798426-2-host1-rack1
16:13:18.463 [status-updates-0] WARN com.hubspot.singularity.scheduler.SingularityScheduler - Not scheduling a new task, test-request is DELETING
16:13:18.471 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920798376-1-host1-rack1
16:13:18.473 [status-updates-0] WARN com.hubspot.singularity.scheduler.SingularityScheduler - Not scheduling a new task, test-request is DELETING
16:13:19.040 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:19.470 [healthcheck-pool-0] WARN com.hubspot.singularity.scheduler.SingularityHealthchecker - Couldn't find a port for health check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional.empty, skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='hc_test', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional[HealthcheckOptions{uri='http://uri', portIndex=Optional.empty, portNumber=Optional.empty, protocol=Optional.empty, startupTimeoutSeconds=Optional.empty, startupDelaySeconds=Optional.empty, startupIntervalSeconds=Optional.empty, intervalSeconds=Optional.empty, responseTimeoutSeconds=Optional.empty, maxRetries=Optional[2], failureStatusCodes=Optional.empty}], skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-hc_test-1519920797425-1-IMMEDIATE-1519920797425, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer803'}, allOtherFields={resources=[{name=cpus, type=SCALAR, scalar={value=125.0}}, {name=mem, type=SCALAR, scalar={value=1024.0}}, {name=disk, type=SCALAR, scalar={value=2048.0}}, {name=ports, type=RANGES, ranges={range=[]}}], attributes=[{name=rackid, type=TEXT, text={value=DEFAULT}}], executorIds=[], url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-hc_test-1519920797425-1-host1-rack1'}, executor=Optional[MesosExecutorInfo{executorId=Optional[SingularityMesosIdObject{value='executorID'}], allOtherFields={resources=[]}}], labels=null, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[], name='name', allOtherFields={}}, rackId=Optional[rack1]}
16:13:19.472 [healthcheck-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while saving health check result for test-request-hc_test-1519920797425-1-host1-rack1, will re-enqueue
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.TaskManager.canSaveNewHealthcheck(TaskManager.java:329)
	at com.hubspot.singularity.data.TaskManager.saveHealthcheckResult(TaskManager.java:318)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:76)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 15 common frames omitted
16:13:19.473 [healthcheck-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while re-enqueuing health check for test-request-hc_test-1519920797425-1-host1-rack1, aborting
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.getChildren(CuratorManager.java:137)
	at com.hubspot.singularity.data.TaskManager.getNumNonstartupHealthchecks(TaskManager.java:518)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheck(SingularityHealthchecker.java:98)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.reEnqueueOrAbort(SingularityHealthchecker.java:203)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:101)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.getChildren(CuratorFrameworkImpl.java:379)
	at com.hubspot.singularity.data.CuratorManager.getChildren(CuratorManager.java:130)
	... 15 common frames omitted
16:13:19.589 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:19.665 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:20.294 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:20.895 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:21.538 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:21.774 [healthcheck-pool-0] WARN com.hubspot.singularity.scheduler.SingularityHealthchecker - Couldn't find a port for health check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional.empty, skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='timeout_test', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional[HealthcheckOptions{uri='http://uri', portIndex=Optional.empty, portNumber=Optional.empty, protocol=Optional.empty, startupTimeoutSeconds=Optional.empty, startupDelaySeconds=Optional.empty, startupIntervalSeconds=Optional.empty, intervalSeconds=Optional.empty, responseTimeoutSeconds=Optional.empty, maxRetries=Optional[2], failureStatusCodes=Optional.empty}], skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional[86400000], considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-timeout_test-1519917199687-1-IMMEDIATE-1519917199687, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer116'}, allOtherFields={resources=[{name=cpus, type=SCALAR, scalar={value=125.0}}, {name=mem, type=SCALAR, scalar={value=1024.0}}, {name=disk, type=SCALAR, scalar={value=2048.0}}, {name=ports, type=RANGES, ranges={range=[]}}], attributes=[{name=rackid, type=TEXT, text={value=DEFAULT}}], executorIds=[], url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-timeout_test-1519917199687-1-host1-rack1'}, executor=Optional[MesosExecutorInfo{executorId=Optional[SingularityMesosIdObject{value='executorID'}], allOtherFields={resources=[]}}], labels=null, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[], name='name', allOtherFields={}}, rackId=Optional[rack1]}
16:13:21.775 [healthcheck-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while saving health check result for test-request-timeout_test-1519917199687-1-host1-rack1, will re-enqueue
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.TaskManager.canSaveNewHealthcheck(TaskManager.java:329)
	at com.hubspot.singularity.data.TaskManager.saveHealthcheckResult(TaskManager.java:318)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:76)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 15 common frames omitted
16:13:21.776 [healthcheck-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while re-enqueuing health check for test-request-timeout_test-1519917199687-1-host1-rack1, aborting
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.getChildren(CuratorManager.java:137)
	at com.hubspot.singularity.data.TaskManager.getNumNonstartupHealthchecks(TaskManager.java:518)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheck(SingularityHealthchecker.java:98)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.reEnqueueOrAbort(SingularityHealthchecker.java:203)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:101)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.getChildren(CuratorFrameworkImpl.java:379)
	at com.hubspot.singularity.data.CuratorManager.getChildren(CuratorManager.java:130)
	... 15 common frames omitted
16:13:21.950 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:23.233 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:23.290 [Time-limited test] WARN com.hubspot.singularity.scheduler.SingularityDeployChecker - Deploy SingularityPendingDeploy{deployMarker=SingularityDeployMarker{requestId='test-request', deployId='firstDeployId', timestamp=1519920803235, user=Optional.empty, message=Optional.empty}, lastLoadBalancerUpdate=Optional.empty, currentDeployState=WAITING, deployProgress=Optional[SingularityIncrementalDeployProgress{targetActiveInstances=1, currentActiveInstances=0, deployInstanceCountPerStep=1, deployStepWaitTimeMs=10, stepComplete=false, autoAdvanceDeploySteps=true, failedDeployTasks=[], timestamp=1519920803235}], updatedRequest=Optional.empty} request was MISSING, removing deploy
16:13:23.892 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:24.040 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-secondDeployId-1519920804007-1-host1-rack1
16:13:24.048 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920803918-1-host1-rack1
16:13:24.072 [healthcheck-pool-0] WARN com.hubspot.singularity.scheduler.SingularityHealthchecker - Couldn't find a port for health check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional.empty, skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='retry_test', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional[HealthcheckOptions{uri='http://uri', portIndex=Optional.empty, portNumber=Optional.empty, protocol=Optional.empty, startupTimeoutSeconds=Optional.empty, startupDelaySeconds=Optional.empty, startupIntervalSeconds=Optional.empty, intervalSeconds=Optional.empty, responseTimeoutSeconds=Optional.empty, maxRetries=Optional[3], failureStatusCodes=Optional[[404]]}], skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-retry_test-1519920802033-1-IMMEDIATE-1519920802033, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer780'}, allOtherFields={resources=[{name=cpus, type=SCALAR, scalar={value=125.0}}, {name=mem, type=SCALAR, scalar={value=1024.0}}, {name=disk, type=SCALAR, scalar={value=2048.0}}, {name=ports, type=RANGES, ranges={range=[]}}], attributes=[{name=rackid, type=TEXT, text={value=DEFAULT}}], executorIds=[], url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-retry_test-1519920802033-1-host1-rack1'}, executor=Optional[MesosExecutorInfo{executorId=Optional[SingularityMesosIdObject{value='executorID'}], allOtherFields={resources=[]}}], labels=null, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[], name='name', allOtherFields={}}, rackId=Optional[rack1]}
16:13:24.072 [healthcheck-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while saving health check result for test-request-retry_test-1519920802033-1-host1-rack1, will re-enqueue
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.TaskManager.canSaveNewHealthcheck(TaskManager.java:329)
	at com.hubspot.singularity.data.TaskManager.saveHealthcheckResult(TaskManager.java:318)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:76)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 15 common frames omitted
16:13:24.073 [healthcheck-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while re-enqueuing health check for test-request-retry_test-1519920802033-1-host1-rack1, aborting
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.getChildren(CuratorManager.java:137)
	at com.hubspot.singularity.data.TaskManager.getNumNonstartupHealthchecks(TaskManager.java:518)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheck(SingularityHealthchecker.java:98)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.reEnqueueOrAbort(SingularityHealthchecker.java:203)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:101)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.getChildren(CuratorFrameworkImpl.java:379)
	at com.hubspot.singularity.data.CuratorManager.getChildren(CuratorManager.java:130)
	... 15 common frames omitted
16:13:24.247 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:24.403 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:24.481 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920804418-1-host1-rack1
16:13:24.483 [status-updates-0] WARN com.hubspot.singularity.scheduler.SingularityScheduler - Not scheduling a new task, test-request is PAUSED
16:13:25.173 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:25.591 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:26.336 [healthcheck-pool-0] WARN com.hubspot.singularity.scheduler.SingularityHealthchecker - Couldn't find a port for health check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional.empty, skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='retry_test', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional[HealthcheckOptions{uri='http://uri', portIndex=Optional.empty, portNumber=Optional.empty, protocol=Optional.empty, startupTimeoutSeconds=Optional.empty, startupDelaySeconds=Optional.empty, startupIntervalSeconds=Optional.empty, intervalSeconds=Optional.empty, responseTimeoutSeconds=Optional.empty, maxRetries=Optional[1], failureStatusCodes=Optional.empty}], skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-retry_test-1519920804299-1-IMMEDIATE-1519920804299, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer698'}, allOtherFields={resources=[{name=cpus, type=SCALAR, scalar={value=125.0}}, {name=mem, type=SCALAR, scalar={value=1024.0}}, {name=disk, type=SCALAR, scalar={value=2048.0}}, {name=ports, type=RANGES, ranges={range=[]}}], attributes=[{name=rackid, type=TEXT, text={value=DEFAULT}}], executorIds=[], url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-retry_test-1519920804299-1-host1-rack1'}, executor=Optional[MesosExecutorInfo{executorId=Optional[SingularityMesosIdObject{value='executorID'}], allOtherFields={resources=[]}}], labels=null, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[], name='name', allOtherFields={}}, rackId=Optional[rack1]}
16:13:26.337 [healthcheck-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while saving health check result for test-request-retry_test-1519920804299-1-host1-rack1, will re-enqueue
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.TaskManager.canSaveNewHealthcheck(TaskManager.java:329)
	at com.hubspot.singularity.data.TaskManager.saveHealthcheckResult(TaskManager.java:318)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:76)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 15 common frames omitted
16:13:26.338 [healthcheck-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while re-enqueuing health check for test-request-retry_test-1519920804299-1-host1-rack1, aborting
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.getChildren(CuratorManager.java:137)
	at com.hubspot.singularity.data.TaskManager.getNumNonstartupHealthchecks(TaskManager.java:518)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheck(SingularityHealthchecker.java:98)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.reEnqueueOrAbort(SingularityHealthchecker.java:203)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:101)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.getChildren(CuratorFrameworkImpl.java:379)
	at com.hubspot.singularity.data.CuratorManager.getChildren(CuratorManager.java:130)
	... 15 common frames omitted
16:13:26.501 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:27.534 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 63.869 sec - in com.hubspot.singularity.scheduler.SingularityHealthchecksTest
16:13:28.302 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:29.540 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:29.632 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920809567-1-host1-rack1
16:13:29.643 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920809616-1-host1-rack1
16:13:29.668 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920809652-1-host1-rack1
16:13:29.930 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:30.001 [Time-limited test] WARN com.hubspot.singularity.scheduler.SingularityDeployChecker - Deploy SingularityPendingDeploy{deployMarker=SingularityDeployMarker{requestId='test-request', deployId='secondDeployId', timestamp=1519920809965, user=Optional.empty, message=Optional.empty}, lastLoadBalancerUpdate=Optional.empty, currentDeployState=WAITING, deployProgress=Optional[SingularityIncrementalDeployProgress{targetActiveInstances=1, currentActiveInstances=0, deployInstanceCountPerStep=1, deployStepWaitTimeMs=0, stepComplete=false, autoAdvanceDeploySteps=false, failedDeployTasks=[], timestamp=1519920809965}], updatedRequest=Optional.empty} request was PAUSED, removing deploy
16:13:30.771 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:31.119 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:31.931 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:33.135 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:33.444 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:34.402 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
Tests run: 25, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 71.052 sec - in com.hubspot.singularity.scheduler.SingularityDeploysTest
16:13:35.544 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:35.642 [Time-limited test] WARN com.hubspot.singularity.mesos.SingularityMesosScheduler - Not using custom executor, will not send framework message to destroy task
16:13:35.645 [Time-limited test] WARN com.hubspot.singularity.scheduler.SingularityCleaner - All tasks for requestId test-request are now killed, re-enqueueing request cleanup
16:13:35.650 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920815570-1-host1-rack1
16:13:35.653 [status-updates-0] WARN com.hubspot.singularity.scheduler.SingularityScheduler - Not scheduling a new task, test-request is DELETING
16:13:36.792 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:39.044 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:40.257 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:41.540 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:42.786 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:43.975 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:45.263 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:47.510 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:47.632 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920827543-1-host1-rack1
16:13:47.646 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920827590-2-host1-rack1
16:13:47.656 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920827603-3-host1-rack1
16:13:47.698 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920827661-1-host1-rack1
16:13:47.705 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920827672-2-host1-rack1
16:13:47.712 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920827683-3-host1-rack1
16:13:47.721 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920827615-4-host1-rack1
16:13:48.835 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:48.881 [Time-limited test] ERROR com.hubspot.singularity.scheduler.SingularityCleaner - LB delete request SingularityLoadBalancerUpdate{loadBalancerState=FAILED, message=Optional.empty, timestamp=1519920828880, uri=Optional.empty, method=CHECK_STATE, loadBalancerRequestId=test-request-1519920828876-DELETE-1} (test-request-1519920828876-DELETE-1) got unexpected response FAILED
16:13:49.996 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:52.232 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:53.511 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:53.613 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920833536-1-host1-rack1
16:13:54.761 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:54.866 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920834789-1-host1-rack1
16:13:54.890 [Time-limited test] ERROR com.hubspot.singularity.scheduler.SingularityCleaner - LB removal request SingularityLoadBalancerUpdate{loadBalancerState=FAILED, message=Optional.empty, timestamp=1519920834889, uri=Optional.empty, method=CHECK_STATE, loadBalancerRequestId=test-request-firstDeployId-1519920834789-1-host1-rack1-REMOVE-1} (test-request-firstDeployId-1519920834789-1-host1-rack1-REMOVE-1) got unexpected response FAILED
16:13:56.054 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:57.340 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:13:58.511 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:00.760 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:02.024 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:02.097 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920842045-1-host1-rack1
16:14:03.274 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:04.451 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:05.805 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:06.993 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:09.120 [healthcheck-pool-0] WARN com.hubspot.singularity.scheduler.SingularityHealthchecker - Couldn't find a port for health check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional.empty, skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='firstDeployId', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional[HealthcheckOptions{uri='http://uri', portIndex=Optional.empty, portNumber=Optional.empty, protocol=Optional.empty, startupTimeoutSeconds=Optional.empty, startupDelaySeconds=Optional.empty, startupIntervalSeconds=Optional.empty, intervalSeconds=Optional.empty, responseTimeoutSeconds=Optional.empty, maxRetries=Optional.empty, failureStatusCodes=Optional.empty}], skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-firstDeployId-1519920847110-2-IMMEDIATE-1519920847110, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave2'}, slaveId=SingularityMesosIdObject{value='slave2'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host2', id=SingularityMesosIdObject{value='offer657'}, allOtherFields={resources=[{name=cpus, type=SCALAR, scalar={value=125.0}}, {name=mem, type=SCALAR, scalar={value=1024.0}}, {name=disk, type=SCALAR, scalar={value=2048.0}}, {name=ports, type=RANGES, ranges={range=[]}}], attributes=[{name=rackid, type=TEXT, text={value=DEFAULT}}], executorIds=[], url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-firstDeployId-1519920847110-2-host2-rack1'}, executor=Optional[MesosExecutorInfo{executorId=Optional[SingularityMesosIdObject{value='executorID'}], allOtherFields={resources=[]}}], labels=null, agentId=SingularityMesosIdObject{value='slave2'}, slaveId=SingularityMesosIdObject{value='slave2'}, resources=[], name='name', allOtherFields={}}, rackId=Optional[rack1]}
16:14:09.122 [healthcheck-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while saving health check result for test-request-firstDeployId-1519920847110-2-host2-rack1, will re-enqueue
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.TaskManager.canSaveNewHealthcheck(TaskManager.java:329)
	at com.hubspot.singularity.data.TaskManager.saveHealthcheckResult(TaskManager.java:318)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:76)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 15 common frames omitted
16:14:09.124 [healthcheck-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while re-enqueuing health check for test-request-firstDeployId-1519920847110-2-host2-rack1, aborting
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@51a9c896 rejected from java.util.concurrent.ScheduledThreadPoolExecutor@5f6e3cd3[Shutting down, pool size = 3, active threads = 1, queued tasks = 2, completed tasks = 0]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)
	at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:326)
	at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:533)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheckWithDelay(SingularityHealthchecker.java:184)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheck(SingularityHealthchecker.java:103)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.reEnqueueOrAbort(SingularityHealthchecker.java:203)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:101)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
16:14:09.164 [healthcheck-pool-2] WARN com.hubspot.singularity.scheduler.SingularityHealthchecker - Couldn't find a port for health check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional[2], skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional[SEPARATE_BY_REQUEST], requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='firstDeployId', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional[HealthcheckOptions{uri='http://uri', portIndex=Optional.empty, portNumber=Optional.empty, protocol=Optional.empty, startupTimeoutSeconds=Optional.empty, startupDelaySeconds=Optional.empty, startupIntervalSeconds=Optional.empty, intervalSeconds=Optional.empty, responseTimeoutSeconds=Optional.empty, maxRetries=Optional.empty, failureStatusCodes=Optional.empty}], skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-firstDeployId-1519920847148-1-BOUNCE-1519920847123, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave3'}, slaveId=SingularityMesosIdObject{value='slave3'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host3', id=SingularityMesosIdObject{value='offer99'}, allOtherFields={url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-firstDeployId-1519920847152-1-host3-DEFAULT'}, executor=Optional.empty, labels=MesosLabels{labels=[]}, agentId=SingularityMesosIdObject{value='slave3'}, slaveId=SingularityMesosIdObject{value='slave3'}, resources=[MesosResourceObject{name=Optional[cpus], ranges=Optional.empty, allOtherFields={scalar={value=1.0}, type=SCALAR}}, MesosResourceObject{name=Optional[mem], ranges=Optional.empty, allOtherFields={scalar={value=128.0}, type=SCALAR}}, MesosResourceObject{name=Optional[disk], ranges=Optional.empty, allOtherFields={scalar={value=1024.0}, type=SCALAR}}], name='test-request', allOtherFields={command={uris=[], environment={variables=[{name=TASK_DEPLOY_ID, value=firstDeployId}, {name=INSTANCE_NO, value=1}, {name=TASK_REQUEST_ID, value=test-request}, {name=AVAILABILITY_ZONE, value=DEFAULT}, {name=ESTIMATED_INSTANCE_COUNT, value=2}, {name=TASK_HOST, value=host3}, {name=TASK_RACK_ID, value=DEFAULT}, {name=TASK_ID, value=test-request-firstDeployId-1519920847152-1-host3-DEFAULT}]}, value=sleep 100, arguments=[]}}}, rackId=Optional[DEFAULT]}
16:14:09.166 [healthcheck-pool-2] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while saving health check result for test-request-firstDeployId-1519920847152-1-host3-DEFAULT, will re-enqueue
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.TaskManager.canSaveNewHealthcheck(TaskManager.java:329)
	at com.hubspot.singularity.data.TaskManager.saveHealthcheckResult(TaskManager.java:318)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:76)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 15 common frames omitted
16:14:09.167 [healthcheck-pool-2] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while re-enqueuing health check for test-request-firstDeployId-1519920847152-1-host3-DEFAULT, aborting
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@90f7f6 rejected from java.util.concurrent.ScheduledThreadPoolExecutor@5f6e3cd3[Shutting down, pool size = 3, active threads = 1, queued tasks = 1, completed tasks = 1]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)
	at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:326)
	at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:533)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheckWithDelay(SingularityHealthchecker.java:184)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheck(SingularityHealthchecker.java:103)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.reEnqueueOrAbort(SingularityHealthchecker.java:203)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:101)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
16:14:09.210 [healthcheck-pool-1] WARN com.hubspot.singularity.scheduler.SingularityHealthchecker - Couldn't find a port for health check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional[2], skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional[SEPARATE_BY_REQUEST], requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[false], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='firstDeployId', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional[HealthcheckOptions{uri='http://uri', portIndex=Optional.empty, portNumber=Optional.empty, protocol=Optional.empty, startupTimeoutSeconds=Optional.empty, startupDelaySeconds=Optional.empty, startupIntervalSeconds=Optional.empty, intervalSeconds=Optional.empty, responseTimeoutSeconds=Optional.empty, maxRetries=Optional.empty, failureStatusCodes=Optional.empty}], skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-firstDeployId-1519920847198-2-TASK_DONE-1519920847188, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer360'}, allOtherFields={url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-firstDeployId-1519920847201-2-host1-DEFAULT'}, executor=Optional.empty, labels=MesosLabels{labels=[]}, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[MesosResourceObject{name=Optional[cpus], ranges=Optional.empty, allOtherFields={scalar={value=1.0}, type=SCALAR}}, MesosResourceObject{name=Optional[mem], ranges=Optional.empty, allOtherFields={scalar={value=128.0}, type=SCALAR}}, MesosResourceObject{name=Optional[disk], ranges=Optional.empty, allOtherFields={scalar={value=1024.0}, type=SCALAR}}], name='test-request', allOtherFields={command={uris=[], environment={variables=[{name=TASK_DEPLOY_ID, value=firstDeployId}, {name=INSTANCE_NO, value=2}, {name=TASK_REQUEST_ID, value=test-request}, {name=AVAILABILITY_ZONE, value=DEFAULT}, {name=ESTIMATED_INSTANCE_COUNT, value=2}, {name=TASK_HOST, value=host1}, {name=TASK_RACK_ID, value=DEFAULT}, {name=TASK_ID, value=test-request-firstDeployId-1519920847201-2-host1-DEFAULT}]}, value=sleep 100, arguments=[]}}}, rackId=Optional[DEFAULT]}
16:14:09.211 [healthcheck-pool-1] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while saving health check result for test-request-firstDeployId-1519920847201-2-host1-DEFAULT, will re-enqueue
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.TaskManager.canSaveNewHealthcheck(TaskManager.java:329)
	at com.hubspot.singularity.data.TaskManager.saveHealthcheckResult(TaskManager.java:318)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:76)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 15 common frames omitted
16:14:09.213 [healthcheck-pool-1] ERROR com.hubspot.singularity.scheduler.SingularityHealthchecker - Caught throwable while re-enqueuing health check for test-request-firstDeployId-1519920847201-2-host1-DEFAULT, aborting
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@4252c01b rejected from java.util.concurrent.ScheduledThreadPoolExecutor@5f6e3cd3[Shutting down, pool size = 3, active threads = 1, queued tasks = 0, completed tasks = 2]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)
	at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:326)
	at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:533)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheckWithDelay(SingularityHealthchecker.java:184)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.enqueueHealthcheck(SingularityHealthchecker.java:103)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.reEnqueueOrAbort(SingularityHealthchecker.java:203)
	at com.hubspot.singularity.scheduler.SingularityHealthcheckAsyncHandler.saveResult(SingularityHealthcheckAsyncHandler.java:101)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.saveFailure(SingularityHealthchecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.asyncHealthcheck(SingularityHealthchecker.java:280)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker.access$000(SingularityHealthchecker.java:45)
	at com.hubspot.singularity.scheduler.SingularityHealthchecker$1.run(SingularityHealthchecker.java:189)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
16:14:10.325 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:12.558 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:12.581 [status-updates-0] ERROR com.hubspot.singularity.mesos.SingularityMesosStatusUpdateHandler - Unexpected taskId task 
com.hubspot.singularity.data.transcoders.SingularityTranscoderException: java.lang.reflect.InvocationTargetException
	at com.hubspot.singularity.data.transcoders.IdTranscoder.fromString(IdTranscoder.java:44)
	at com.hubspot.singularity.mesos.SingularityMesosStatusUpdateHandler.getTaskId(SingularityMesosStatusUpdateHandler.java:145)
	at com.hubspot.singularity.mesos.SingularityMesosStatusUpdateHandler.lambda$null$2(SingularityMesosStatusUpdateHandler.java:263)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.reflect.InvocationTargetException: null
	at sun.reflect.GeneratedMethodAccessor229.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.hubspot.singularity.data.transcoders.IdTranscoder.fromString(IdTranscoder.java:42)
	... 6 common frames omitted
Caused by: com.hubspot.singularity.exceptions.InvalidSingularityTaskIdException: TaskId task was invalid (There must be at least 5 instances of - (there were 0))
	at com.hubspot.singularity.api.task.SingularityTaskId.valueOf(SingularityTaskId.java:136)
	... 10 common frames omitted
16:14:12.655 [status-updates-0] ERROR com.hubspot.singularity.mesos.SingularityMesosStatusUpdateHandler - Task test-request-firstDeployId-1519920852605-1-host1-rack1 is active but is missing task data
16:14:12.664 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920852605-1-host1-rack1
16:14:13.759 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:15.051 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:17.381 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:18.527 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:19.691 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:20.006 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519910059713-1-host1-rack1
16:14:20.028 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920859213-1-host1-rack1
16:14:22.163 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:23.380 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:23.463 [Time-limited test] WARN com.hubspot.singularity.mesos.SingularityMesosScheduler - Not using custom executor, will not send framework message to destroy task
16:14:23.466 [Time-limited test] WARN com.hubspot.singularity.scheduler.SingularityCleaner - All tasks for requestId test-request are now killed, re-enqueueing request cleanup
16:14:23.473 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920863404-1-host1-rack1
16:14:23.476 [status-updates-0] WARN com.hubspot.singularity.scheduler.SingularityScheduler - Not scheduling a new task, test-request is DELETING
16:14:24.604 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:25.762 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:25.826 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920865780-1-host1-rack1
16:14:25.845 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920865832-1-host1-rack1
16:14:26.959 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:28.240 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:29.416 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:29.562 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task lowPriorityRequest-lowPriorityDeploy-2-1-host1-rack1
16:14:31.721 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:32.936 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:33.021 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920872965-1-host1-rack1
16:14:33.023 [status-updates-0] WARN com.hubspot.singularity.scheduler.SingularityScheduler - Not scheduling a new task, test-request is DELETING
16:14:33.032 [Time-limited test] WARN com.hubspot.singularity.mesos.SingularityMesosScheduler - Not using custom executor, will not send framework message to destroy task
16:14:33.034 [Time-limited test] WARN com.hubspot.singularity.scheduler.SingularityCleaner - All tasks for requestId test-request are now killed, re-enqueueing request cleanup
16:14:33.038 [status-updates-0] WARN com.hubspot.singularity.mesos.SingularitySlaveAndRackManager - Couldn't find slave with id slave1 for task test-request-firstDeployId-1519920873004-2-host1-rack1
16:14:33.040 [status-updates-0] WARN com.hubspot.singularity.scheduler.SingularityScheduler - Not scheduling a new task, test-request is DELETING
16:14:34.185 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:35.464 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:36.672 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:37.734 [check-new-task-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityNewTaskChecker - Uncaught throwable in task check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional.empty, skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[true], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='firstDeployId', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional.empty, skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-firstDeployId-1519920876693-1-IMMEDIATE-1519920876693, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer161'}, allOtherFields={resources=[{name=cpus, type=SCALAR, scalar={value=125.0}}, {name=mem, type=SCALAR, scalar={value=1024.0}}, {name=disk, type=SCALAR, scalar={value=2048.0}}, {name=ports, type=RANGES, ranges={range=[]}}], attributes=[{name=rackid, type=TEXT, text={value=DEFAULT}}], executorIds=[], url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-firstDeployId-1519920876693-1-host1-rack1'}, executor=Optional[MesosExecutorInfo{executorId=Optional[SingularityMesosIdObject{value='executorID'}], allOtherFields={resources=[]}}], labels=null, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[], name='name', allOtherFields={}}, rackId=Optional[rack1]}, re-enqueing
java.lang.RuntimeException: java.lang.IllegalStateException: instance must be started before calling this method
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:116)
	at com.hubspot.singularity.data.CuratorManager.exists(CuratorManager.java:121)
	at com.hubspot.singularity.data.DisasterManager.isDisabled(DisasterManager.java:55)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.hasHealthcheck(SingularityNewTaskChecker.java:96)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.getTaskState(SingularityNewTaskChecker.java:313)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.checkTask(SingularityNewTaskChecker.java:254)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.lambda$getTaskCheck$0(SingularityNewTaskChecker.java:209)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: instance must be started before calling this method
	at com.google.common.base.Preconditions.checkState(Preconditions.java:444)
	at org.apache.curator.framework.imps.CuratorFrameworkImpl.checkExists(CuratorFrameworkImpl.java:355)
	at com.hubspot.singularity.data.CuratorManager.checkExists(CuratorManager.java:108)
	... 13 common frames omitted
16:14:37.735 [check-new-task-pool-0] ERROR com.hubspot.singularity.scheduler.SingularityNewTaskChecker - Uncaught throwable re-enqueuing task check for task SingularityTask{taskRequest=SingularityTaskRequest{request=SingularityRequest{id='test-request', requestType=WORKER, owners=Optional.empty, numRetriesOnFailure=Optional.empty, schedule=Optional.empty, quartzSchedule=Optional.empty, scheduleType=Optional.empty, scheduleTimeZone=Optional.empty, killOldNonLongRunningTasksAfterMillis=Optional.empty, taskExecutionTimeLimitMillis=Optional.empty, scheduledExpectedRuntimeMillis=Optional.empty, waitAtLeastMillisAfterTaskFinishesForReschedule=Optional.empty, instances=Optional.empty, skipHealthchecks=Optional.empty, rackSensitive=Optional.empty, rackAffinity=Optional.empty, slavePlacement=Optional.empty, requiredSlaveAttributes=Optional.empty, allowedSlaveAttributes=Optional.empty, loadBalanced=Optional[true], group=Optional.empty, requiredRole=Optional.empty, readWriteGroups=Optional.empty, readOnlyGroups=Optional.empty, bounceAfterScale=Optional.empty, emailConfigurationOverrides=Optional.empty, hideEvenNumberAcrossRacksHint=Optional.empty, taskLogErrorRegex=Optional.empty, taskLogErrorRegexCaseSensitive=Optional.empty, taskPriorityLevel=Optional.empty, maxTasksPerOffer=Optional.empty, allowBounceToSameHost=Optional.empty, dataCenter=Optional.empty}, deploy=SingularityDeploy{requestId='test-request', id='firstDeployId', version=Optional.empty, timestamp=Optional.empty, metadata=Optional.empty, containerInfo=Optional.empty, customExecutorCmd=Optional.empty, customExecutorId=Optional.empty, customExecutorSource=Optional.empty, customExecutorResources=Optional.empty, resources=Optional.empty, command=Optional[sleep 100], arguments=Optional.empty, env=Optional.empty, runImmediatelyOptional.empty, uris=Optional.empty, executorData=Optional.empty, labels=Optional.empty, mesosLabels=Optional.empty, taskLabels=Optional.empty, mesosTaskLabels=Optional.empty, taskEnv=Optional.empty, healthcheckUri=Optional.empty, healthcheckIntervalSeconds=Optional.empty, healthcheckTimeoutSeconds=Optional.empty, healthcheckPortIndex=Optional.empty, healthcheckProtocol=Optional.empty, healthcheckMaxRetries=Optional.empty, healthcheckMaxTotalTimeoutSeconds=Optional.empty, healthcheck=Optional.empty, skipHealthchecksOnDeploy=Optional.empty, deployHealthTimeoutSeconds=Optional.empty, considerHealthyAfterRunningForSeconds=Optional.empty, serviceBasePath=Optional.empty, loadBalancerGroups=Optional.empty, loadBalancerPortIndex=Optional.empty, loadBalancerOptions=Optional.empty, loadBalancerDomains=Optional.empty, loadBalancerAdditionalRoutes=Optional.empty, loadBalancerTemplate=Optional.empty, loadBalancerServiceIdOverride=Optional.empty, loadBalancerUpstreamGroup=Optional.empty, deployInstanceCountPerStep=Optional.empty, deployStepWaitTimeMs=Optional.empty, autoAdvanceDeploySteps=Optional.empty, maxTaskRetries=Optional.empty, shell=Optional.empty, user=Optional.empty}, pendingTask=SingularityPendingTask{pendingTaskId=test-request-firstDeployId-1519920876693-1-IMMEDIATE-1519920876693, cmdLineArgsList=Optional.empty, user=Optional.empty, runId=Optional.empty, skipHealthchecks=Optional.empty, message=Optional.empty, resources=Optional.empty, s3UploaderAdditionalFiles=[], runAsUserOverride=Optional.empty, envOverrides={}, extraArtifacts[], actionId=Optional.empty}}, offer=[MesosOfferObject{agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, frameworkId=SingularityMesosIdObject{value='framework1'}, hostname='host1', id=SingularityMesosIdObject{value='offer161'}, allOtherFields={resources=[{name=cpus, type=SCALAR, scalar={value=125.0}}, {name=mem, type=SCALAR, scalar={value=1024.0}}, {name=disk, type=SCALAR, scalar={value=2048.0}}, {name=ports, type=RANGES, ranges={range=[]}}], attributes=[{name=rackid, type=TEXT, text={value=DEFAULT}}], executorIds=[], url={scheme=scheme, address={port=8080}, query=[]}}}], mesosTask=MesosTaskObject{taskId=SingularityMesosIdObject{value='test-request-firstDeployId-1519920876693-1-host1-rack1'}, executor=Optional[MesosExecutorInfo{executorId=Optional[SingularityMesosIdObject{value='executorID'}], allOtherFields={resources=[]}}], labels=null, agentId=SingularityMesosIdObject{value='slave1'}, slaveId=SingularityMesosIdObject{value='slave1'}, resources=[], name='name', allOtherFields={}}, rackId=Optional[rack1]}, aborting
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@2f590ea7 rejected from java.util.concurrent.ScheduledThreadPoolExecutor@71592ae9[Shutting down, pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)
	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)
	at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:326)
	at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:533)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.enqueueCheckWithDelay(SingularityNewTaskChecker.java:242)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.reEnqueueCheck(SingularityNewTaskChecker.java:236)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.reEnqueueCheckOrAbort(SingularityNewTaskChecker.java:227)
	at com.hubspot.singularity.scheduler.SingularityNewTaskChecker.lambda$getTaskCheck$0(SingularityNewTaskChecker.java:220)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
16:14:38.856 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:40.033 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
16:14:41.229 [Time-limited test] WARN com.hubspot.singularity.data.zkmigrations.PendingRequestDataMigration - Starting migration to re-write pending request paths
Tests run: 73, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 137.326 sec - in com.hubspot.singularity.scheduler.SingularitySchedulerTest

Results :

Tests in error: 
  MergingSourceProviderTest.testFileNoExistFail »  Unexpected exception, expecte...
  MergingSourceProviderTest.testMergedConfigs:46 » NoClassDefFound org/yaml/snak...
  MergingSourceProviderTest.testNonObjectFails »  Unexpected exception, expected...
  SingularityMesosOfferSchedulerTest.itAccountsForExpectedTaskUsage:352->SingularitySchedulerTestBase.getTaskMonitor:748 » NullPointer
  SingularityUsageTest.itCorrectlyDeterminesResourcesReservedForRequestsWithMultipleTasks:387->SingularitySchedulerTestBase.getTaskMonitor:748 » NullPointer
  SingularityUsageTest.itCorrectlyTracksMaxAndMinUtilizedPerRequest:429->SingularitySchedulerTestBase.getTaskMonitor:748 » NullPointer
  SingularityUsageTest.itCreatesTaskCleanupsWhenAMachineIsOverloaded:530->SingularitySchedulerTestBase.getTaskMonitor:748 » NullPointer
  SingularityUsageTest.itDoesntIncludePerfectlyUtilizedRequestsInClusterUtilization:261->SingularitySchedulerTestBase.getTaskMonitor:748 » NullPointer
  SingularityUsageTest.itTracksClusterUtilizationSimple:223->SingularitySchedulerTestBase.getTaskMonitor:748 » NullPointer
  SingularityUsageTest.itTracksOverusedCpuInClusterUtilization:298->SingularitySchedulerTestBase.getTaskMonitor:748 » NullPointer
  SingularityUsageTest.testUsageCleaner:93->SingularitySchedulerTestBase.getTaskMonitor:748 » NullPointer
  SingularityUsageTest.testUsagePollerComplex:142->SingularitySchedulerTestBase.getTaskMonitor:748 » NullPointer
  SingularityUsageTest.testUsagePollerSimple:57->SingularitySchedulerTestBase.getTaskMonitor:748 » NullPointer

Tests run: 260, Failures: 0, Errors: 13, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] Singularity ........................................ SUCCESS [  2.043 s]
[INFO] SingularityBase .................................... SUCCESS [  3.311 s]
[INFO] SingularityMesosClient ............................. SUCCESS [  1.582 s]
[INFO] SingularityUI ...................................... SUCCESS [02:49 min]
[INFO] SingularityService ................................. FAILURE [02:37 min]
[INFO] SingularityRunnerBase .............................. SKIPPED
[INFO] SingularityS3Base .................................. SKIPPED
[INFO] SingularityClient .................................. SKIPPED
[INFO] SingularityExecutor ................................ SKIPPED
[INFO] SingularityExecutorCleanup ......................... SKIPPED
[INFO] SingularityS3Uploader .............................. SKIPPED
[INFO] SingularityS3Downloader ............................ SKIPPED
[INFO] EmbedSingularityExample ............................ SKIPPED
[INFO] SingularityServiceIntegrationTests ................. SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 05:35 min
[INFO] Finished at: 2018-03-01T17:14:41+01:00
[INFO] Final Memory: 156M/2621M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.19.1:test (default-test) on project SingularityService: There are test failures.
[ERROR] 
[ERROR] Please refer to /root/workspace/HubSpot/Singularity/347821232/SingularityService/target/surefire-reports for the individual test results.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :SingularityService
