[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building composer 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- jacoco-maven-plugin:0.8.0:prepare-agent (default) @ composer ---
[INFO] argLine set to -javaagent:/root/./workspace/rewe-digital/composer/352545329/.m2/org/jacoco/org.jacoco.agent/0.8.0/org.jacoco.agent-0.8.0-runtime.jar=destfile=/root/workspace/rewe-digital/composer/352545329/target/jacoco.exec
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ composer ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ composer ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ composer ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.3:testCompile (default-testCompile) @ composer ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ composer ---
[INFO] Surefire report directory: /root/workspace/rewe-digital/composer/352545329/target/surefire-reports
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.12.4/surefire-junit4-2.12.4.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.12.4/surefire-junit4-2.12.4.pom (3 KB at 4.9 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-providers/2.12.4/surefire-providers-2.12.4.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-providers/2.12.4/surefire-providers-2.12.4.pom (3 KB at 109.2 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.12.4/surefire-junit4-2.12.4.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.12.4/surefire-junit4-2.12.4.jar (37 KB at 721.1 KB/sec)

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running com.rewedigital.composer.composing.TemplateComposerTest
22:07:21.040 [main] DEBUG c.r.c.composing.IncludedService - included service response: ResponseImpl{status=OK, payload=Optional[<html><head></head><body><content>content</content></body></html>], internalHeadersImpl=Headers{entries=[Content-Type=text/html, x-rd-session-key-content=session-val-content]}} received via [http://mock/] included via [template-path] included via [root]
22:07:21.144 [main] DEBUG c.r.c.composing.IncludedService - included service response: ResponseImpl{status=OK, payload=Optional[<html><head></head><body><content><include path="include-exceeding-max-recursion"><content>fallback</content></include></content></body></html>], internalHeadersImpl=Headers{entries=[Content-Type=text/html]}} received via [include-in-template] included via [template-path] included via [root]
22:07:21.145 [main] WARN  c.r.c.c.RecursionAwareContentFetcher - Max recursion depth exceeded for [include-exceeding-max-recursion] included via [include-in-template] included via [template-path] included via [root]
22:07:21.146 [main] DEBUG c.r.c.composing.IncludedService - included service response: ResponseImpl{status=OK, payload=Optional[ <content>fallback</content>], internalHeadersImpl=Headers{entries=[]}} received via [include-exceeding-max-recursion] included via [include-in-template] included via [template-path] included via [root]
22:07:21.147 [main] DEBUG c.r.c.composing.IncludedService - included service response: ResponseImpl{status=OK, payload=Optional[<html><head><link href="css/link" data-rd-options="include" rel="stylesheet"/></head><body><content></content></body></html>], internalHeadersImpl=Headers{entries=[Content-Type=text/html]}} received via [http://mock/] included via [template-path] included via [root]
22:07:21.151 [main] WARN  c.r.c.c.ValidatingContentFetcher - Content-Type of [http://mock/] is not text/html, returning an empty body.
22:07:21.151 [main] DEBUG c.r.c.composing.IncludedService - included service response: ResponseImpl{status=BAD_REQUEST, payload=Optional[ <content><div>default content</div></content>], internalHeadersImpl=Headers{entries=[]}} received via [http://mock/] included via [template-path] included via [root]
22:07:21.153 [main] DEBUG c.r.c.composing.IncludedService - included service response: ResponseImpl{status=OK, payload=Optional[<html><head></head><body><content>content</content></body></html>], internalHeadersImpl=Headers{entries=[Content-Type=text/html]}} received via [http://mock/] included via [template-path] included via [root]
22:07:21.154 [main] DEBUG c.r.c.composing.IncludedService - included service response: ResponseImpl{status=OK, payload=Optional[<html><head><script src="js/link/script.js" data-rd-options="include" type="text/javascript"></script></head><body><content></content></body></html>], internalHeadersImpl=Headers{entries=[Content-Type=text/html]}} received via [http://mock/] included via [template-path] included via [root]
22:07:21.156 [main] DEBUG c.r.c.composing.IncludedService - included service response: ResponseImpl{status=OK, payload=Optional[<html><head></head><body><content><include path="http://other/mock/"></include></content></body></html>], internalHeadersImpl=Headers{entries=[Content-Type=text/html]}} received via [http://mock/] included via [template-path] included via [root]
22:07:21.158 [main] DEBUG c.r.c.composing.IncludedService - included service response: ResponseImpl{status=OK, payload=Optional[<html><head></head><body><content>some content</content></body></html>], internalHeadersImpl=Headers{entries=[Content-Type=text/html]}} received via [http://other/mock/] included via [http://mock/] included via [template-path] included via [root]
22:07:21.162 [main] WARN  c.r.c.c.ValidatingContentFetcher - Empty path attribute in include found - callstack: [] included via [template-path] included via [root]
22:07:21.162 [main] DEBUG c.r.c.composing.IncludedService - included service response: ResponseImpl{status=OK, payload=Optional[], internalHeadersImpl=Headers{entries=[]}} received via [] included via [template-path] included via [root]
22:07:21.166 [main] DEBUG c.r.c.composing.IncludedService - included service response: ResponseImpl{status=OK, payload=Optional[<html><head></head><body><content>content</content></body></html>], internalHeadersImpl=Headers{entries=[Content-Type=text/html]}} received via [http://mock/] included via [template-path] included via [root]
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.949 sec
Running com.rewedigital.composer.composing.ContentMarkupHandlerTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec
Running com.rewedigital.composer.composing.IncludeMarkupHandlerTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.03 sec
Running com.rewedigital.composer.composing.ComposerHtmlConfigurationTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.06 sec
Running com.rewedigital.composer.composing.ValidatingContentFetcherTest
22:07:21.299 [main] WARN  c.r.c.c.ValidatingContentFetcher - Content-Type of [/some/path] is not text/html, returning an empty body.
22:07:21.309 [main] WARN  c.r.c.c.ValidatingContentFetcher - Empty path attribute in include found - callstack: [some-path] included via [root]
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.033 sec
Running com.rewedigital.composer.session.LocalSessionIdInterceptorTest
22:07:21.359 [main] ERROR c.r.c.s.LocalSessionIdInterceptor - Malformatted expires-at: not-a-long - expiring session
java.lang.NumberFormatException: For input string: "not-a-long"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.lang.Long.parseLong(Long.java:589)
	at java.lang.Long.parseLong(Long.java:631)
	at com.rewedigital.composer.session.LocalSessionIdInterceptor.parseExpiresAt(LocalSessionIdInterceptor.java:75)
	at java.util.Optional.map(Optional.java:215)
	at com.rewedigital.composer.session.LocalSessionIdInterceptor.withExpiration(LocalSessionIdInterceptor.java:49)
	at com.rewedigital.composer.session.LocalSessionIdInterceptor.afterCreation(LocalSessionIdInterceptor.java:33)
	at com.rewedigital.composer.session.LocalSessionIdInterceptorTest.exiresSessionIfExiresAtNotParseable(LocalSessionIdInterceptorTest.java:92)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.055 sec
Running com.rewedigital.composer.session.SessionConfigurationTest
22:07:21.376 [main] INFO  c.r.c.session.SessionConfiguration - Registered Session Interceptor of type com.rewedigital.composer.session.LocalSessionIdInterceptor
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.242 sec
Running com.rewedigital.composer.session.RemoteHttpSessionInterceptorTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.336 sec
Running com.rewedigital.composer.session.SessionTest
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 sec
Running com.rewedigital.composer.session.SessionHandlerTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running com.rewedigital.composer.session.CookieBasedSessionHandlerTest
22:07:22.090 [main] DEBUG c.r.c.s.CookieBasedSessionHandler - session cookie found
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.14 sec
Running com.rewedigital.composer.architecture.DependenciesTest
Tests run: 2, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.301 sec <<< FAILURE!
clientDoesNotRelyOnComposing(com.rewedigital.composer.architecture.DependenciesTest)  Time elapsed: 0.139 sec  <<< FAILURE!
java.lang.AssertionError: 
Expected: Comply with rules
     but: 
DENIED       com.rewedigital.composer.routing ->           This dependency is forbidden.
  com.rewedigital.composer.configuration (by com.rewedigital.composer.routing.RoutingConfiguration)

	at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)
	at org.junit.Assert.assertThat(Assert.java:956)
	at org.junit.Assert.assertThat(Assert.java:923)
	at com.rewedigital.composer.architecture.DependenciesTest.clientDoesNotRelyOnComposing(DependenciesTest.java:54)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)

Running com.rewedigital.composer.caching.HttpCacheConfigurationTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec
Running com.rewedigital.composer.caching.HttpCacheTest
22:07:22.477 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/
22:07:22.479 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.481 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_/, max age: 100
22:07:22.483 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/
22:07:22.483 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.483 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_/, max age: 100
22:07:22.487 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/
22:07:22.487 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.488 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_/, max age: 100
22:07:22.493 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/
22:07:22.494 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/ (response: null)
22:07:22.495 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/
22:07:22.495 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.495 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_/, max age: 100
22:07:22.496 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/
22:07:22.498 [main] DEBUG c.r.composer.caching.HttpCache - Serving response for cache key GET_/ from cache (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.498 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.498 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_/, max age: 100
22:07:22.500 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/?q=1
22:07:22.500 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/?q=1 (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.500 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_/?q=1, max age: 100
22:07:22.501 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/?q=2
22:07:22.501 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/?q=2 (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.501 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_/?q=2, max age: 100
22:07:22.503 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/
22:07:22.504 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=no-store]}})
22:07:22.504 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/
22:07:22.504 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=no-store]}})
22:07:22.506 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/INTERNAL_SERVER_ERROR
22:07:22.506 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/INTERNAL_SERVER_ERROR (response: ResponseImpl{status=INTERNAL_SERVER_ERROR, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.506 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/INTERNAL_SERVER_ERROR
22:07:22.506 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/INTERNAL_SERVER_ERROR (response: ResponseImpl{status=INTERNAL_SERVER_ERROR, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.507 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/OK
22:07:22.507 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/OK (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.507 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_/OK, max age: 100
22:07:22.508 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/OK
22:07:22.508 [main] DEBUG c.r.composer.caching.HttpCache - Serving response for cache key GET_/OK from cache (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.508 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/OK (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.508 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_/OK, max age: 100
22:07:22.509 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/CREATED
22:07:22.509 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/CREATED (response: ResponseImpl{status=CREATED, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.509 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/CREATED
22:07:22.509 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/CREATED (response: ResponseImpl{status=CREATED, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.510 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/BAD_REQUEST
22:07:22.510 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/BAD_REQUEST (response: ResponseImpl{status=BAD_REQUEST, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.510 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/BAD_REQUEST
22:07:22.510 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/BAD_REQUEST (response: ResponseImpl{status=BAD_REQUEST, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.511 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/SEE_OTHER
22:07:22.511 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/SEE_OTHER (response: ResponseImpl{status=SEE_OTHER, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.511 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/SEE_OTHER
22:07:22.511 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/SEE_OTHER (response: ResponseImpl{status=SEE_OTHER, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.512 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/FORBIDDEN
22:07:22.512 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/FORBIDDEN (response: ResponseImpl{status=FORBIDDEN, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.512 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/FORBIDDEN
22:07:22.513 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/FORBIDDEN (response: ResponseImpl{status=FORBIDDEN, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.513 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/BAD_GATEWAY
22:07:22.513 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/BAD_GATEWAY (response: ResponseImpl{status=BAD_GATEWAY, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.513 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/BAD_GATEWAY
22:07:22.514 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/BAD_GATEWAY (response: ResponseImpl{status=BAD_GATEWAY, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.514 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/MOVED_PERMANENTLY
22:07:22.514 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/MOVED_PERMANENTLY (response: ResponseImpl{status=MOVED_PERMANENTLY, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.514 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_/MOVED_PERMANENTLY, max age: 100
22:07:22.515 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/MOVED_PERMANENTLY
22:07:22.515 [main] DEBUG c.r.composer.caching.HttpCache - Serving response for cache key GET_/MOVED_PERMANENTLY from cache (response: ResponseImpl{status=MOVED_PERMANENTLY, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.515 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/MOVED_PERMANENTLY (response: ResponseImpl{status=MOVED_PERMANENTLY, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.515 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_/MOVED_PERMANENTLY, max age: 100
22:07:22.516 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/TEMPORARY_REDIRECT
22:07:22.516 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/TEMPORARY_REDIRECT (response: ResponseImpl{status=TEMPORARY_REDIRECT, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.516 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/TEMPORARY_REDIRECT
22:07:22.516 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/TEMPORARY_REDIRECT (response: ResponseImpl{status=TEMPORARY_REDIRECT, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.517 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/GONE
22:07:22.518 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/GONE (response: ResponseImpl{status=GONE, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.518 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_/GONE, max age: 100
22:07:22.518 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/GONE
22:07:22.518 [main] DEBUG c.r.composer.caching.HttpCache - Serving response for cache key GET_/GONE from cache (response: ResponseImpl{status=GONE, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.518 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/GONE (response: ResponseImpl{status=GONE, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.519 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_/GONE, max age: 100
22:07:22.521 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for HEAD_/
22:07:22.521 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key HEAD_/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.521 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key HEAD_/, max age: 100
22:07:22.521 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for HEAD_/
22:07:22.521 [main] DEBUG c.r.composer.caching.HttpCache - Serving response for cache key HEAD_/ from cache (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.522 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key HEAD_/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.522 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key HEAD_/, max age: 100
22:07:22.523 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/
22:07:22.523 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.523 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_/, max age: 100
22:07:22.523 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/
22:07:22.523 [main] DEBUG c.r.composer.caching.HttpCache - Serving response for cache key GET_/ from cache (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.524 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.524 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_/, max age: 100
22:07:22.527 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/
22:07:22.527 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.528 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_/, max age: 100
22:07:22.528 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_/
22:07:22.528 [main] DEBUG c.r.composer.caching.HttpCache - Serving response for cache key GET_/ from cache (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.528 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[Cache-Control=max-age=100]}})
22:07:22.528 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_/, max age: 100
Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.119 sec
Running com.rewedigital.composer.proxy.ComposingRequestHandlerTest
22:07:22.571 [main] DEBUG c.r.composer.routing.BackendRouting - The request Mock for Request, hashCode: 2086191375 matched the backend route com.spotify.apollo.route.RuleMatch@389f4282.
22:07:22.577 [main] DEBUG c.r.composer.routing.BackendRouting - The request Mock for Request, hashCode: 512791455 matched the backend route com.spotify.apollo.route.RuleMatch@20bc6f4d.
22:07:22.580 [main] DEBUG c.r.composer.routing.BackendRouting - The request Mock for Request, hashCode: 1295267731 matched the backend route com.spotify.apollo.route.RuleMatch@57a259c1.
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.054 sec
Running com.rewedigital.composer.routing.BackendRoutingTest
22:07:22.587 [main] DEBUG c.r.composer.routing.BackendRouting - The request Mock for Request, hashCode: 1774206882 matched the backend route com.spotify.apollo.route.RuleMatch@37c5a3c7.
22:07:22.589 [main] DEBUG c.r.composer.routing.BackendRouting - The request Mock for Request, hashCode: 1277429308 matched the backend route com.spotify.apollo.route.RuleMatch@3dd22110.
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.01 sec
Running com.rewedigital.composer.routing.SessionAwareProxyClientTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec
Running com.rewedigital.composer.routing.RoutingConfigurationTest
22:07:22.603 [main] INFO  c.r.c.routing.RoutingConfiguration - Registered local route for path=/test/path/<arg>, method=GET, target=https://target.service/{arg}, type=PROXY with a request ttl=Optional.empty
22:07:22.607 [main] INFO  c.r.c.routing.RoutingConfiguration - Registered local route for path=/test/path/<arg>, method=GET, target=https://target.service/{arg}, type=PROXY with a request ttl=Optional[PT0.2S]
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running com.rewedigital.composer.configuration.ConfigurationTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.056 sec
Running com.rewedigital.composer.ComposerTest
22:07:22.701 [MockWebServer 59101] INFO  c.s.o.mockwebserver.MockWebServer - MockWebServer[59101] starting to accept connections
22:07:22.728 [apollo-servicehelper-0] INFO  c.spotify.apollo.test.ServiceHelper - Starting with args: []
22:07:23.211 [apollo-servicehelper-0] INFO  c.s.apollo.metrics.MetricsModule - Creating SemanticMetricRegistry
22:07:23.246 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module ApolloEnvironmentModule{id=apollo-env}
22:07:23.248 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module HttpClientModule{id=http.client}
22:07:23.248 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module MetricsModule{id=metrics}
22:07:23.248 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module MetricIdModule{id=servicehelper-metric-id}
22:07:23.248 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module ForwardingStubClientModule{id=forwarding-stub-client}
22:07:23.248 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module ErrorHandlingClientDecoratingModule{id=error-handling-client-decorator}
22:07:23.248 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module HttpCacheModule{id=http-cache}
22:07:23.249 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Managing lifecycle of com.spotify.apollo.metrics.FastForwardLifecycle
22:07:23.250 [apollo-servicehelper-0] INFO  c.r.c.routing.RoutingConfiguration - Registered local route for path=/compose, method=GET, target=http://localhost:59101/, type=TEMPLATE with a request ttl=Optional.empty
22:07:23.250 [apollo-servicehelper-0] INFO  c.r.c.session.SessionConfiguration - Registered Session Interceptor of type com.rewedigital.composer.session.LocalSessionIdInterceptor
22:07:23.260 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (GET)
22:07:23.260 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (HEAD)
22:07:23.261 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (POST)
22:07:23.261 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (PUT)
22:07:23.261 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (DELETE)
22:07:23.262 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (TRACE)
22:07:23.262 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (OPTIONS)
22:07:23.263 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (PATCH)
22:07:23.263 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (GET)
22:07:23.264 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (HEAD)
22:07:23.264 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (POST)
22:07:23.265 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (PUT)
22:07:23.265 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (DELETE)
22:07:23.265 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (TRACE)
22:07:23.266 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (OPTIONS)
22:07:23.266 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (PATCH)
22:07:23.267 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: GET, uri: /
22:07:23.268 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: HEAD, uri: /
22:07:23.268 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: POST, uri: /
22:07:23.268 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: PUT, uri: /
22:07:23.268 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: DELETE, uri: /
22:07:23.268 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: TRACE, uri: /
22:07:23.268 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: OPTIONS, uri: /
22:07:23.269 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: PATCH, uri: /
22:07:23.269 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: GET, uri: /<path:path>
22:07:23.269 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: HEAD, uri: /<path:path>
22:07:23.269 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: POST, uri: /<path:path>
22:07:23.269 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: PUT, uri: /<path:path>
22:07:23.269 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: DELETE, uri: /<path:path>
22:07:23.269 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: TRACE, uri: /<path:path>
22:07:23.270 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: OPTIONS, uri: /<path:path>
22:07:23.270 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: PATCH, uri: /<path:path>
22:07:23.289 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: GET, uri: /_meta/0/info
22:07:23.289 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: GET, uri: /_meta/0/config
22:07:23.289 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: GET, uri: /_meta/0/endpoints
22:07:23.289 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: GET, uri: /_meta/0/calls
22:07:23.295 [apollo-servicehelper-0] INFO  c.spotify.apollo.test.ServiceHelper - Started composer with backend domain ''
22:07:23.295 [apollo-servicehelper-0] INFO  c.spotify.apollo.test.ServiceHelper - Got instance Service
22:07:23.331 [main] DEBUG c.r.composer.routing.BackendRouting - The request RequestValue{method=GET, uri=http://composer/compose, parameters={}, service=Optional.empty, payload=Optional.empty, internalHeadersImpl=Headers{entries=[]}, ttl=Optional.empty} matched the backend route com.spotify.apollo.route.RuleMatch@4ae1ee85.
22:07:23.332 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_http://localhost:59101/
22:07:23.334 [main] DEBUG c.spotify.apollo.test.FallbackClient - Falling back to real client: Could not find any mapping for http://localhost:59101/
22:07:23.476 [MockWebServer /127.0.0.1:38850] INFO  c.s.o.mockwebserver.MockWebServer - MockWebServer[59101] received request: GET / HTTP/1.1 and responded: HTTP/1.1 200 OK
22:07:23.483 [OkHttp http://localhost:59101/] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_http://localhost:59101/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=67 md5=76e1f50de13ec6c4ea685e5d59d98c1d]], internalHeadersImpl=Headers{entries=[Content-Length=67, Content-Type=text/html, OkHttp-Selected-Protocol=http/1.1, OkHttp-Sent-Millis=1520888843472, OkHttp-Received-Millis=1520888843479]}})
22:07:23.484 [OkHttp http://localhost:59101/] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_http://localhost:59101/content/
22:07:23.485 [OkHttp http://localhost:59101/] DEBUG c.spotify.apollo.test.FallbackClient - Falling back to real client: Could not find any mapping for http://localhost:59101/content/
22:07:23.486 [MockWebServer /127.0.0.1:38850] INFO  c.s.o.mockwebserver.MockWebServer - MockWebServer[59101] received request: GET /content/ HTTP/1.1 and responded: HTTP/1.1 200 OK
22:07:23.525 [OkHttp http://localhost:59101/content/] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_http://localhost:59101/content/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=26 md5=f48aa06aba93fae959369f417526d147]], internalHeadersImpl=Headers{entries=[Content-Length=26, Content-Type=text/html, OkHttp-Selected-Protocol=http/1.1, OkHttp-Sent-Millis=1520888843486, OkHttp-Received-Millis=1520888843486]}})
22:07:23.526 [OkHttp http://localhost:59101/content/] DEBUG c.r.c.composing.IncludedService - included service response: ResponseImpl{status=OK, payload=Optional[<content>content</content>], internalHeadersImpl=Headers{entries=[Content-Length=26, Content-Type=text/html, OkHttp-Selected-Protocol=http/1.1, OkHttp-Sent-Millis=1520888843486, OkHttp-Received-Millis=1520888843486]}} received via [http://localhost:59101/content/] included via [http://localhost:59101/] included via [root]
22:07:23.536 [MockWebServer 59101] INFO  c.s.o.mockwebserver.MockWebServer - MockWebServer[59101] done accepting connections: Socket closed
22:07:23.538 [apollo-servicehelper-0] INFO  c.spotify.apollo.test.ServiceHelper - Shutting down composer
22:07:23.538 [apollo-servicehelper-0] INFO  c.s.a.e.ApolloEnvironmentModule - Shutting down Apollo instance
22:07:23.549 [MockWebServer 47952] INFO  c.s.o.mockwebserver.MockWebServer - MockWebServer[47952] starting to accept connections
22:07:23.550 [apollo-servicehelper-0] INFO  c.spotify.apollo.test.ServiceHelper - Starting with args: []
22:07:23.587 [apollo-servicehelper-0] INFO  c.s.apollo.metrics.MetricsModule - Creating SemanticMetricRegistry
22:07:23.591 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module ApolloEnvironmentModule{id=apollo-env}
22:07:23.591 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module HttpClientModule{id=http.client}
22:07:23.591 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module MetricsModule{id=metrics}
22:07:23.591 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module MetricIdModule{id=servicehelper-metric-id}
22:07:23.591 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module ForwardingStubClientModule{id=forwarding-stub-client}
22:07:23.592 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module ErrorHandlingClientDecoratingModule{id=error-handling-client-decorator}
22:07:23.592 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module HttpCacheModule{id=http-cache}
22:07:23.592 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Managing lifecycle of com.spotify.apollo.metrics.FastForwardLifecycle
22:07:23.593 [apollo-servicehelper-0] INFO  c.r.c.routing.RoutingConfiguration - Registered local route for path=/compose, method=GET, target=http://localhost:47952/, type=TEMPLATE with a request ttl=Optional.empty
22:07:23.593 [apollo-servicehelper-0] INFO  c.r.c.session.SessionConfiguration - Registered Session Interceptor of type com.rewedigital.composer.session.LocalSessionIdInterceptor
22:07:23.594 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (GET)
22:07:23.594 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (HEAD)
22:07:23.594 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (POST)
22:07:23.594 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (PUT)
22:07:23.594 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (DELETE)
22:07:23.594 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (TRACE)
22:07:23.594 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (OPTIONS)
22:07:23.594 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (PATCH)
22:07:23.594 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (GET)
22:07:23.594 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (HEAD)
22:07:23.595 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (POST)
22:07:23.595 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (PUT)
22:07:23.595 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (DELETE)
22:07:23.595 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (TRACE)
22:07:23.595 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (OPTIONS)
22:07:23.595 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (PATCH)
22:07:23.595 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: GET, uri: /
22:07:23.595 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: HEAD, uri: /
22:07:23.595 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: POST, uri: /
22:07:23.595 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: PUT, uri: /
22:07:23.596 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: DELETE, uri: /
22:07:23.596 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: TRACE, uri: /
22:07:23.596 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: OPTIONS, uri: /
22:07:23.596 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: PATCH, uri: /
22:07:23.596 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: GET, uri: /<path:path>
22:07:23.596 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: HEAD, uri: /<path:path>
22:07:23.596 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: POST, uri: /<path:path>
22:07:23.596 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: PUT, uri: /<path:path>
22:07:23.597 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: DELETE, uri: /<path:path>
22:07:23.597 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: TRACE, uri: /<path:path>
22:07:23.597 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: OPTIONS, uri: /<path:path>
22:07:23.597 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: PATCH, uri: /<path:path>
22:07:23.598 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: GET, uri: /_meta/0/info
22:07:23.598 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: GET, uri: /_meta/0/config
22:07:23.598 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: GET, uri: /_meta/0/endpoints
22:07:23.598 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: GET, uri: /_meta/0/calls
22:07:23.599 [apollo-servicehelper-0] INFO  c.spotify.apollo.test.ServiceHelper - Started composer with backend domain ''
22:07:23.599 [apollo-servicehelper-0] INFO  c.spotify.apollo.test.ServiceHelper - Got instance Service
22:07:23.600 [main] DEBUG c.r.composer.routing.BackendRouting - The request RequestValue{method=GET, uri=http://composer/compose, parameters={}, service=Optional.empty, payload=Optional.empty, internalHeadersImpl=Headers{entries=[]}, ttl=Optional.empty} matched the backend route com.spotify.apollo.route.RuleMatch@3f31ccef.
22:07:23.601 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_http://localhost:47952/
22:07:23.601 [main] DEBUG c.spotify.apollo.test.FallbackClient - Falling back to real client: Could not find any mapping for http://localhost:47952/
22:07:24.603 [MockWebServer /127.0.0.1:34346] WARN  c.s.o.mockwebserver.MockWebServer - MockWebServer[47952] connection from /127.0.0.1 didn't make a request
22:07:24.604 [OkHttp http://localhost:47952/] WARN  c.r.c.c.ErrorHandlingClientDecorator - got exceptional response from RequestValue{method=GET, uri=http://localhost:47952/, parameters={}, service=Optional[composer], payload=Optional.empty, internalHeadersImpl=Headers{entries=[x-rd-session-id=06026c2d-3b87-44d0-b002-2a1f250716d6]}, ttl=Optional.empty}, mapping to INTERNAL_SERVER_ERROR
java.io.IOException: Request Request{method=GET, url=http://localhost:47952/, tag=null} failed
	at com.spotify.apollo.http.client.TransformingCallback.onFailure(TransformingCallback.java:57)
	at com.squareup.okhttp.Call$AsyncCall.execute(Call.java:175)
	at com.squareup.okhttp.internal.NamedRunnable.run(NamedRunnable.java:33)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.net.SocketTimeoutException: timeout
	at okio.Okio$3.newTimeoutException(Okio.java:207)
	at okio.AsyncTimeout.exit(AsyncTimeout.java:261)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:215)
	at okio.RealBufferedSource.indexOf(RealBufferedSource.java:306)
	at okio.RealBufferedSource.indexOf(RealBufferedSource.java:300)
	at okio.RealBufferedSource.readUtf8LineStrict(RealBufferedSource.java:196)
	at com.squareup.okhttp.internal.http.HttpConnection.readResponse(HttpConnection.java:191)
	at com.squareup.okhttp.internal.http.HttpTransport.readResponseHeaders(HttpTransport.java:80)
	at com.squareup.okhttp.internal.http.HttpEngine.readNetworkResponse(HttpEngine.java:906)
	at com.squareup.okhttp.internal.http.HttpEngine.access$300(HttpEngine.java:92)
	at com.squareup.okhttp.internal.http.HttpEngine$NetworkInterceptorChain.proceed(HttpEngine.java:891)
	at com.squareup.okhttp.internal.http.HttpEngine.readResponse(HttpEngine.java:749)
	at com.squareup.okhttp.Call.getResponse(Call.java:268)
	at com.squareup.okhttp.Call$ApplicationInterceptorChain.proceed(Call.java:224)
	at com.squareup.okhttp.Call.getResponseWithInterceptorChain(Call.java:195)
	at com.squareup.okhttp.Call.access$100(Call.java:34)
	at com.squareup.okhttp.Call$AsyncCall.execute(Call.java:162)
	... 4 common frames omitted
Caused by: java.net.SocketException: Socket closed
	at java.net.SocketInputStream.read(SocketInputStream.java:204)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at okio.Okio$2.read(Okio.java:139)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:211)
	... 18 common frames omitted
22:07:24.605 [OkHttp http://localhost:47952/] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_http://localhost:47952/ (response: ResponseImpl{status=INTERNAL_SERVER_ERROR, payload=Optional[ByteString[size=0]], internalHeadersImpl=Headers{entries=[]}})
22:07:24.608 [MockWebServer 47952] INFO  c.s.o.mockwebserver.MockWebServer - MockWebServer[47952] done accepting connections: Socket closed
22:07:24.609 [apollo-servicehelper-0] INFO  c.spotify.apollo.test.ServiceHelper - Shutting down composer
22:07:24.609 [apollo-servicehelper-0] INFO  c.s.a.e.ApolloEnvironmentModule - Shutting down Apollo instance
22:07:24.619 [MockWebServer 39636] INFO  c.s.o.mockwebserver.MockWebServer - MockWebServer[39636] starting to accept connections
22:07:24.620 [apollo-servicehelper-0] INFO  c.spotify.apollo.test.ServiceHelper - Starting with args: []
22:07:24.659 [apollo-servicehelper-0] INFO  c.s.apollo.metrics.MetricsModule - Creating SemanticMetricRegistry
22:07:24.663 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module ApolloEnvironmentModule{id=apollo-env}
22:07:24.663 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module HttpClientModule{id=http.client}
22:07:24.663 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module MetricsModule{id=metrics}
22:07:24.665 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module MetricIdModule{id=servicehelper-metric-id}
22:07:24.666 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module ForwardingStubClientModule{id=forwarding-stub-client}
22:07:24.666 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module ErrorHandlingClientDecoratingModule{id=error-handling-client-decorator}
22:07:24.666 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Loaded module HttpCacheModule{id=http-cache}
22:07:24.666 [apollo-servicehelper-0] INFO  com.spotify.apollo.core.ServiceImpl - Managing lifecycle of com.spotify.apollo.metrics.FastForwardLifecycle
22:07:24.667 [apollo-servicehelper-0] INFO  c.r.c.routing.RoutingConfiguration - Registered local route for path=/compose, method=GET, target=http://localhost:39636/, type=TEMPLATE with a request ttl=Optional.empty
22:07:24.667 [apollo-servicehelper-0] INFO  c.r.c.session.SessionConfiguration - Registered Session Interceptor of type com.rewedigital.composer.session.LocalSessionIdInterceptor
22:07:24.668 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (GET)
22:07:24.668 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (HEAD)
22:07:24.668 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (POST)
22:07:24.668 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (PUT)
22:07:24.668 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (DELETE)
22:07:24.668 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (TRACE)
22:07:24.668 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (OPTIONS)
22:07:24.668 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route / (PATCH)
22:07:24.669 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (GET)
22:07:24.669 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (HEAD)
22:07:24.669 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (POST)
22:07:24.669 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (PUT)
22:07:24.669 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (DELETE)
22:07:24.669 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (TRACE)
22:07:24.669 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (OPTIONS)
22:07:24.669 [apollo-servicehelper-0] INFO  c.s.a.environment.RoutingContextImpl - Registering Route /<path:path> (PATCH)
22:07:24.670 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: GET, uri: /
22:07:24.670 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: HEAD, uri: /
22:07:24.670 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: POST, uri: /
22:07:24.670 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: PUT, uri: /
22:07:24.670 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: DELETE, uri: /
22:07:24.670 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: TRACE, uri: /
22:07:24.670 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: OPTIONS, uri: /
22:07:24.670 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: PATCH, uri: /
22:07:24.670 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: GET, uri: /<path:path>
22:07:24.671 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: HEAD, uri: /<path:path>
22:07:24.671 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: POST, uri: /<path:path>
22:07:24.671 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: PUT, uri: /<path:path>
22:07:24.671 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: DELETE, uri: /<path:path>
22:07:24.671 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: TRACE, uri: /<path:path>
22:07:24.671 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: OPTIONS, uri: /<path:path>
22:07:24.671 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: PATCH, uri: /<path:path>
22:07:24.672 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: GET, uri: /_meta/0/info
22:07:24.673 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: GET, uri: /_meta/0/config
22:07:24.673 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: GET, uri: /_meta/0/endpoints
22:07:24.674 [apollo-servicehelper-0] DEBUG c.s.apollo.route.RouteRuleBuilder - Found Route with method: GET, uri: /_meta/0/calls
22:07:24.675 [apollo-servicehelper-0] INFO  c.spotify.apollo.test.ServiceHelper - Started composer with backend domain ''
22:07:24.675 [apollo-servicehelper-0] INFO  c.spotify.apollo.test.ServiceHelper - Got instance Service
22:07:24.677 [main] DEBUG c.r.composer.routing.BackendRouting - The request RequestValue{method=GET, uri=http://composer/compose, parameters={}, service=Optional.empty, payload=Optional.empty, internalHeadersImpl=Headers{entries=[]}, ttl=Optional.empty} matched the backend route com.spotify.apollo.route.RuleMatch@db5e88a.
22:07:24.677 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_http://localhost:39636/
22:07:24.678 [main] DEBUG c.spotify.apollo.test.FallbackClient - Falling back to real client: Could not find any mapping for http://localhost:39636/
22:07:24.691 [MockWebServer /127.0.0.1:39046] INFO  c.s.o.mockwebserver.MockWebServer - MockWebServer[39636] received request: GET / HTTP/1.1 and responded: HTTP/1.1 200 OK
22:07:24.692 [OkHttp http://localhost:39636/] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_http://localhost:39636/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=67 md5=899bd03137979ef1a7c73a1fe6defee6]], internalHeadersImpl=Headers{entries=[Content-Length=67, Content-Type=text/html, Cache-Control=max-age=50, OkHttp-Selected-Protocol=http/1.1, OkHttp-Sent-Millis=1520888844690, OkHttp-Received-Millis=1520888844691]}})
22:07:24.695 [OkHttp http://localhost:39636/] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_http://localhost:39636/, max age: 50
22:07:24.697 [OkHttp http://localhost:39636/] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_http://localhost:39636/content/
22:07:24.698 [OkHttp http://localhost:39636/] DEBUG c.spotify.apollo.test.FallbackClient - Falling back to real client: Could not find any mapping for http://localhost:39636/content/
22:07:24.702 [MockWebServer /127.0.0.1:39046] INFO  c.s.o.mockwebserver.MockWebServer - MockWebServer[39636] received request: GET /content/ HTTP/1.1 and responded: HTTP/1.1 200 OK
22:07:24.741 [OkHttp http://localhost:39636/content/] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_http://localhost:39636/content/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=26 md5=f48aa06aba93fae959369f417526d147]], internalHeadersImpl=Headers{entries=[Content-Length=26, Content-Type=text/html, OkHttp-Selected-Protocol=http/1.1, OkHttp-Sent-Millis=1520888844701, OkHttp-Received-Millis=1520888844703]}})
22:07:24.742 [OkHttp http://localhost:39636/content/] DEBUG c.r.c.composing.IncludedService - included service response: ResponseImpl{status=OK, payload=Optional[<content>content</content>], internalHeadersImpl=Headers{entries=[Content-Length=26, Content-Type=text/html, OkHttp-Selected-Protocol=http/1.1, OkHttp-Sent-Millis=1520888844701, OkHttp-Received-Millis=1520888844703]}} received via [http://localhost:39636/content/] included via [http://localhost:39636/] included via [root]
22:07:24.746 [main] DEBUG c.r.composer.routing.BackendRouting - The request RequestValue{method=GET, uri=http://composer/compose, parameters={}, service=Optional.empty, payload=Optional.empty, internalHeadersImpl=Headers{entries=[]}, ttl=Optional.empty} matched the backend route com.spotify.apollo.route.RuleMatch@57be9aa4.
22:07:24.746 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_http://localhost:39636/
22:07:24.747 [main] DEBUG c.r.composer.caching.HttpCache - Serving response for cache key GET_http://localhost:39636/ from cache (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=67 md5=899bd03137979ef1a7c73a1fe6defee6]], internalHeadersImpl=Headers{entries=[Content-Length=67, Content-Type=text/html, Cache-Control=max-age=50, OkHttp-Selected-Protocol=http/1.1, OkHttp-Sent-Millis=1520888844690, OkHttp-Received-Millis=1520888844691]}})
22:07:24.747 [main] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_http://localhost:39636/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=67 md5=899bd03137979ef1a7c73a1fe6defee6]], internalHeadersImpl=Headers{entries=[Content-Length=67, Content-Type=text/html, Cache-Control=max-age=50, OkHttp-Selected-Protocol=http/1.1, OkHttp-Sent-Millis=1520888844690, OkHttp-Received-Millis=1520888844691]}})
22:07:24.747 [main] DEBUG c.r.composer.caching.HttpCache - caching response for cache key GET_http://localhost:39636/, max age: 50
22:07:24.749 [main] DEBUG c.r.composer.caching.HttpCache - Querying cache for GET_http://localhost:39636/content/
22:07:24.749 [main] DEBUG c.spotify.apollo.test.FallbackClient - Falling back to real client: Could not find any mapping for http://localhost:39636/content/
22:07:24.750 [MockWebServer /127.0.0.1:39046] INFO  c.s.o.mockwebserver.MockWebServer - MockWebServer[39636] received request: GET /content/ HTTP/1.1 and responded: HTTP/1.1 200 OK
22:07:24.790 [OkHttp http://localhost:39636/content/] DEBUG c.r.composer.caching.HttpCache - Fetched response for cache key GET_http://localhost:39636/content/ (response: ResponseImpl{status=OK, payload=Optional[ByteString[size=26 md5=f48aa06aba93fae959369f417526d147]], internalHeadersImpl=Headers{entries=[Content-Length=26, Content-Type=text/html, OkHttp-Selected-Protocol=http/1.1, OkHttp-Sent-Millis=1520888844750, OkHttp-Received-Millis=1520888844750]}})
22:07:24.791 [OkHttp http://localhost:39636/content/] DEBUG c.r.c.composing.IncludedService - included service response: ResponseImpl{status=OK, payload=Optional[<content>content</content>], internalHeadersImpl=Headers{entries=[Content-Length=26, Content-Type=text/html, OkHttp-Selected-Protocol=http/1.1, OkHttp-Sent-Millis=1520888844750, OkHttp-Received-Millis=1520888844750]}} received via [http://localhost:39636/content/] included via [http://localhost:39636/] included via [root]
22:07:24.793 [MockWebServer 39636] INFO  c.s.o.mockwebserver.MockWebServer - MockWebServer[39636] done accepting connections: Socket closed
22:07:24.794 [apollo-servicehelper-0] INFO  c.spotify.apollo.test.ServiceHelper - Shutting down composer
22:07:24.794 [apollo-servicehelper-0] INFO  c.s.a.e.ApolloEnvironmentModule - Shutting down Apollo instance
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.128 sec

Results :

Failed tests:   clientDoesNotRelyOnComposing(com.rewedigital.composer.architecture.DependenciesTest): (..)

Tests run: 79, Failures: 1, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 7.853 s
[INFO] Finished at: 2018-03-12T22:07:24+01:00
[INFO] Final Memory: 19M/704M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test (default-test) on project composer: There are test failures.
[ERROR] 
[ERROR] Please refer to /root/workspace/rewe-digital/composer/352545329/target/surefire-reports for the individual test results.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
