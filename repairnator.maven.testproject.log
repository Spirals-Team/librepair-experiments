[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] SonarQube SCM Git
[INFO] SonarQube :: Plugins :: SCM :: Git
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building SonarQube SCM Git 1.5-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.4:create (default) @ sonar-scm-git ---
[INFO] Executing: /bin/sh -c cd '/root/workspace/SonarSource/sonar-scm-git/416774438' && 'git' 'rev-parse' '--verify' 'HEAD'
[INFO] Working directory: /root/workspace/SonarSource/sonar-scm-git/416774438
[INFO] Storing buildNumber: 8bc4e267a1abb9a3672d5d76ba039b48aac78af8 at timestamp: 1534419904204
[WARNING] Cannot get the branch information from the git repository: 
Detecting the current branch failed: fatal: ref HEAD is not a symbolic ref

[INFO] Executing: /bin/sh -c cd '/root/workspace/SonarSource/sonar-scm-git/416774438' && 'git' 'rev-parse' '--verify' 'HEAD'
[INFO] Working directory: /root/workspace/SonarSource/sonar-scm-git/416774438
[INFO] Storing buildScmBranch: UNKNOWN
[INFO] 
[INFO] --- maven-enforcer-plugin:3.0.0-M1:enforce (enforce) @ sonar-scm-git ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:check (enforce-license-headers) @ sonar-scm-git ---
[INFO] 
[INFO] --- beanshell-maven-plugin:1.4:run (compute-artifact-display-version) @ sonar-scm-git ---
[INFO] Executing Script
[INFO] file class java.lang.Object
[INFO] script class java.lang.String
[INFO] evaluating script if (! "1.5-SNAPSHOT".endsWith("-SNAPSHOT")) { [+ 14 omitted line(s)]
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building SonarQube :: Plugins :: SCM :: Git 1.5-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.4:create (default) @ sonar-scm-git-plugin ---
[INFO] 
[INFO] --- maven-enforcer-plugin:3.0.0-M1:enforce (enforce) @ sonar-scm-git-plugin ---
[INFO] Skipping Rule Enforcement.
[INFO] 
[INFO] --- license-maven-plugin:3.0:check (enforce-license-headers) @ sonar-scm-git-plugin ---
[INFO] 
[INFO] --- sonar-packaging-maven-plugin:1.17:check (default-check) @ sonar-scm-git-plugin ---
[INFO] 
[INFO] --- beanshell-maven-plugin:1.4:run (compute-artifact-display-version) @ sonar-scm-git-plugin ---
[INFO] Executing Script
[INFO] file class java.lang.Object
[INFO] script class java.lang.String
[INFO] evaluating script if (! "1.5-SNAPSHOT".endsWith("-SNAPSHOT")) { [+ 14 omitted line(s)]
[INFO] 
[INFO] --- maven-resources-plugin:3.0.2:resources (default-resources) @ sonar-scm-git-plugin ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/SonarSource/sonar-scm-git/416774438/sonar-scm-git-plugin/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.7.0:compile (default-compile) @ sonar-scm-git-plugin ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:3.0.2:testResources (default-testResources) @ sonar-scm-git-plugin ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/SonarSource/sonar-scm-git/416774438/sonar-scm-git-plugin/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.7.0:testCompile (default-testCompile) @ sonar-scm-git-plugin ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.20.1:test (default-test) @ sonar-scm-git-plugin ---
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.20.1/surefire-junit4-2.20.1.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.20.1/surefire-junit4-2.20.1.pom (4 KB at 5.1 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-providers/2.20.1/surefire-providers-2.20.1.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-providers/2.20.1/surefire-providers-2.20.1.pom (3 KB at 40.4 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.20.1/surefire-junit4-2.20.1.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.20.1/surefire-junit4-2.20.1.jar (81 KB at 704.8 KB/sec)
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running org.sonarsource.scm.git.JGitBlameCommandTest
WARN  Shallow clone detected, no blame information will be provided. You can convert to non-shallow with 'git fetch --unshallow'.
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.091 s - in org.sonarsource.scm.git.JGitBlameCommandTest
[INFO] Running org.sonarsource.scm.git.GitPluginTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in org.sonarsource.scm.git.GitPluginTest
[INFO] Running org.sonarsource.scm.git.GitThreadFactoryTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.021 s - in org.sonarsource.scm.git.GitThreadFactoryTest
[INFO] Running org.sonarsource.scm.git.ChangedLinesComputerTest
[ERROR] Tests run: 6, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.013 s <<< FAILURE! - in org.sonarsource.scm.git.ChangedLinesComputerTest
[ERROR] do_not_crash_on_invalid_start_line_format(org.sonarsource.scm.git.ChangedLinesComputerTest)  Time elapsed: 0.011 s  <<< ERROR!
java.lang.IllegalStateException: 
Invalid block header on line @@ -1 +x1,3 @@

	at org.sonarsource.scm.git.ChangedLinesComputerTest.printDiff(ChangedLinesComputerTest.java:149)
	at org.sonarsource.scm.git.ChangedLinesComputerTest.do_not_crash_on_invalid_start_line_format(ChangedLinesComputerTest.java:142)

[INFO] Running org.sonarsource.scm.git.GitScmProviderTest
[ERROR] Tests run: 20, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 2.483 s <<< FAILURE! - in org.sonarsource.scm.git.GitScmProviderTest
[ERROR] branchChangedFiles_from_merged_and_diverged(org.sonarsource.scm.git.GitScmProviderTest)  Time elapsed: 0.487 s  <<< FAILURE!
org.junit.ComparisonFailure: expected:<...39148/file-b2.xoo=[1[], /tmp/junit663948736042292586/junit2287495612612039148/file-m1.xoo=[2]], /tmp/junit6639487...> but was:<...39148/file-b2.xoo=[1[, 2, 3], /tmp/junit663948736042292586/junit2287495612612039148/file-m1.xoo=[4]], /tmp/junit6639487...>
	at org.sonarsource.scm.git.GitScmProviderTest.branchChangedFiles_from_merged_and_diverged(GitScmProviderTest.java:205)

[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Failures: 
[ERROR]   GitScmProviderTest.branchChangedFiles_from_merged_and_diverged:205 expected:<...39148/file-b2.xoo=[1[], /tmp/junit663948736042292586/junit2287495612612039148/file-m1.xoo=[2]], /tmp/junit6639487...> but was:<...39148/file-b2.xoo=[1[, 2, 3], /tmp/junit663948736042292586/junit2287495612612039148/file-m1.xoo=[4]], /tmp/junit6639487...>
[ERROR] Errors: 
[ERROR]   ChangedLinesComputerTest.do_not_crash_on_invalid_start_line_format:142->printDiff:149 Â» IllegalState
[INFO] 
[ERROR] Tests run: 35, Failures: 1, Errors: 1, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] SonarQube SCM Git .................................. SUCCESS [  5.430 s]
[INFO] SonarQube :: Plugins :: SCM :: Git ................. FAILURE [ 10.963 s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 20.239 s
[INFO] Finished at: 2018-08-16T13:45:18+02:00
[INFO] Final Memory: 29M/366M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.20.1:test (default-test) on project sonar-scm-git-plugin: There are test failures.
[ERROR] 
[ERROR] Please refer to /root/workspace/SonarSource/sonar-scm-git/416774438/sonar-scm-git-plugin/target/surefire-reports for the individual test results.
[ERROR] Please refer to dump files (if any exist) [date]-jvmRun[N].dump, [date].dumpstream and [date]-jvmRun[N].dumpstream.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :sonar-scm-git-plugin
