[INFO] Scanning for projects...
[INFO] Inspecting build with total of 6 modules...
[INFO] Installing Nexus Staging features:
[INFO]   ... total of 6 executions of maven-deploy-plugin replaced with nexus-staging-maven-plugin
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] virtual-har-server
[INFO] virtual-har-server-har-bridge
[INFO] virtual-har-server-core
[INFO] virtual-har-server-har-bridge-sstoehr
[INFO] virtual-har-server-test-support
[INFO] virtual-har-server-bmp
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building virtual-har-server 0.20
[INFO] ------------------------------------------------------------------------
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building virtual-har-server-har-bridge 0.20
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ virtual-har-server-har-bridge ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mike10004/virtual-har-server/364194160/virtual-har-server-har-bridge/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.6.0:compile (default-compile) @ virtual-har-server-har-bridge ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ virtual-har-server-har-bridge ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 8 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.6.0:testCompile (default-testCompile) @ virtual-har-server-har-bridge ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.20.1:test (default-test) @ virtual-har-server-har-bridge ---
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.20.1/surefire-junit4-2.20.1.pom
3/4 KB   
4/4 KB   
         
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.20.1/surefire-junit4-2.20.1.pom (4 KB at 12.0 KB/sec)
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-providers/2.20.1/surefire-providers-2.20.1.pom
3/3 KB   
3/3 KB   
         
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-providers/2.20.1/surefire-providers-2.20.1.pom (3 KB at 129.2 KB/sec)
Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.20.1/surefire-junit4-2.20.1.jar
3/81 KB   
5/81 KB   
8/81 KB   
11/81 KB   
13/81 KB   
16/81 KB   
19/81 KB   
21/81 KB   
24/81 KB   
27/81 KB   
29/81 KB   
32/81 KB   
36/81 KB   
40/81 KB   
44/81 KB   
48/81 KB   
52/81 KB   
56/81 KB   
60/81 KB   
64/81 KB   
68/81 KB   
72/81 KB   
76/81 KB   
80/81 KB   
81/81 KB   
           
Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-junit4/2.20.1/surefire-junit4-2.20.1.jar (81 KB at 1868.6 KB/sec)
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running io.github.mike10004.vhs.harbridge.ContentDispositionTest
parsed: form-data; name="f"; filename="image-for-upload.jpeg"
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.036 s - in io.github.mike10004.vhs.harbridge.ContentDispositionTest
[INFO] Running io.github.mike10004.vhs.harbridge.HttpContentCodecImplTest
[WARNING] Tests run: 5, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.046 s - in io.github.mike10004.vhs.harbridge.HttpContentCodecImplTest
[INFO] Running io.github.mike10004.vhs.harbridge.HarResponseDataTransformerTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.078 s - in io.github.mike10004.vhs.harbridge.HarResponseDataTransformerTest
[INFO] Running io.github.mike10004.vhs.harbridge.ContentTypesTest
expect text-like false for "null"; actual = false
expect text-like false for ""; actual = false
expect text-like false for " "; actual = false
expect text-like false for "application/octet-stream"; actual = false
expect text-like false for "application/pdf"; actual = false
expect text-like false for "image/png"; actual = false
expect text-like false for "image/jpeg"; actual = false
expect text-like true for "text/plain; charset=utf-8"; actual = true
expect text-like true for "image/svg+xml"; actual = true
expect text-like true for "text/xml; charset=utf-8"; actual = true
expect text-like true for "application/xml; charset=utf-8"; actual = true
expect text-like true for "text/css; charset=utf-8"; actual = true
expect text-like true for "text/csv; charset=utf-8"; actual = true
expect text-like true for "application/javascript; charset=utf-8"; actual = true
expect text-like true for "text/javascript; charset=utf-8"; actual = true
expect text-like true for "text/html; charset=utf-8"; actual = true
expect text-like true for "application/xhtml+xml; charset=utf-8"; actual = true
expect text-like true for "application/x-www-form-urlencoded"; actual = true
expect text-like true for "application/atom+xml; charset=utf-8"; actual = true
expect text-like true for "application/dart; charset=utf-8"; actual = true
expect text-like true for "application/json; charset=utf-8"; actual = true
expect text-like true for "application/manifest+json; charset=utf-8"; actual = true
expect text-like true for "application/rtf; charset=utf-8"; actual = true
expect text-like true for "application/soap+xml; charset=utf-8"; actual = true
expect text-like true for "text/tab-separated-values; charset=utf-8"; actual = true
expect text-like true for "application/xrd+xml; charset=utf-8"; actual = true
[INFO] Tests run: 26, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.062 s - in io.github.mike10004.vhs.harbridge.ContentTypesTest
[INFO] Running io.github.mike10004.vhs.harbridge.ZlibCompressorTest
23 bytes in compressed
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in io.github.mike10004.vhs.harbridge.ZlibCompressorTest
[INFO] Running io.github.mike10004.vhs.harbridge.LzwCompressorTest
119 input bytes
132 compressed bytes
119 decompressed bytes
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in io.github.mike10004.vhs.harbridge.LzwCompressorTest
[INFO] Running io.github.mike10004.vhs.harbridge.Hars_isBase64Test
isBase64Encoded
Base64TestCase{contentType="text/plain", text="abcd", encoding=null, size=4, expected=false}

isBase64Encoded
Base64TestCase{contentType="text/plain", text="abcd", encoding=null, size=null, expected=false}

isBase64Encoded
Base64TestCase{contentType="text/plain", text="abcdabcdabcd", encoding=null, size=9, expected=true}

isBase64Encoded
Base64TestCase{contentType="text/plain", text="abcdabcdabcd", encoding=null, size=12, expected=false}

isBase64Encoded
Base64TestCase{contentType="text/plain", text="abcd", encoding="base64", size=null, expected=true}

isBase64Encoded
Base64TestCase{contentType="text/plain", text="abcd", encoding="base64", size=3, expected=true}

isBase64Encoded
Base64TestCase{contentType="text/plain", text="abcd", encoding="base64", size=null, expected=true}

isBase64Encoded
Base64TestCase{contentType="application/octet-stream", text="abcd", encoding=null, size=null, expected=true}

isBase64Encoded
Base64TestCase{contentType="application/x-not-already-known", text="ThisIsAllBase64Alphabet", encoding=null, size=null, expected=false}

isBase64Encoded
Base64TestCase{contentType="application/x-not-already-known", text="ThisIsAllBase64Alphabet", encoding="base64", size=null, expected=true}

isBase64Encoded
Base64TestCase{contentType="multipart/mixed; boundary=ABCDEF_1522096137171", text="--ABCDEF_1522096137171\r\nContent-Type: application/x-www-form-urlencoded\r\n\r\nfoo=bar&baz=gaw\r\n--ABCDEF_1522096137171--", encoding=null, size=116, expected=false}

isBase64Encoded
Base64TestCase{contentType="application/json", text="h3MImbYGI5d3iZmLtEPUHWVevJGrhhJk+ZHOJmLFLtYsXvv5IwIUSYP5/NLJ8E[...]VTr2OLwK2N7nx8Y+lh4DVUYdnRdHHYlFY36PjDSUFovyGd5duFz/5bgEvsrs=", encoding="base64", size=290, expected=true}

isBase64Encoded
Base64TestCase{contentType="application/json", text="{\"apples\":1156,\"peaches\":4689236,\"pumpkin\":3275175,\"pie\":1235856}", encoding=null, size=32, expected=false}

[INFO] Tests run: 13, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.021 s - in io.github.mike10004.vhs.harbridge.Hars_isBase64Test
[INFO] Running io.github.mike10004.vhs.harbridge.HarsTest


 getUncompressedContent_brotliEncodedTextInText
String contentType = "application/json";
String text = "{\n  \"brotli\": true, \n  \"headers\": {\n    \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\", \n    \"Accept-Encoding\": \"gzip, deflate, br\", \n    \"Accept-Language\": \"en-US,en;q=0.9\", \n    \"Cache-Control\": \"no-cache\", \n    \"Connection\": \"close\", \n    \"Cookie\": \"_gauges_unique_month=1; _gauges_unique_year=1; _gauges_unique=1; _gauges_unique_hour=1; _gauges_unique_day=1\", \n    \"Host\": \"httpbin.org\", \n    \"Pragma\": \"no-cache\", \n    \"Referer\": \"https://httpbin.org/\", \n    \"Upgrade-Insecure-Requests\": \"1\", \n    \"User-Agent\": \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36\"\n  }, \n  \"method\": \"GET\", \n  \"origin\": \"47.211.7.40\"\n}\n";
String contentEncodingHeaderValue = "br";
Object harContentEncoding = null;
Integer bodySize = 359;
Integer contentSize = 730;
Object comment = null;
String contentLengthHeaderValue = "359";
actual: ImmutableTypedContent{contentType=application/json; charset=utf-8, data.size=?}
content text base64 length: 730
expected decoded length: 730
"" with suggestion US-ASCII -> US-ASCII (expecting US-ASCII)
"abcdef" with suggestion US-ASCII -> US-ASCII (expecting US-ASCII)
"Fractions: \u00BC\u00BD\u00BE" with suggestion US-ASCII -> UTF-8 (expecting UTF-8)
"abcdef" with suggestion ISO-8859-1 -> ISO-8859-1 (expecting ISO-8859-1)
"abcdef" with suggestion UTF-8 -> UTF-8 (expecting UTF-8)
"abc \uD83C\uDCA1\uD83C\uDCA8\uD83C\uDCD1\uD83C\uDCD8\uD83C\uDCD3" with suggestion ISO-8859-1 -> UTF-8 (expecting UTF-8)
complicated text: "let nbsp=\"\u00A0\";"
6C6574206E6273703D22C2A0223B decoded with UTF-8 is: let nbsp="Â ";
6C6574206E6273703D22C2A0223B decoded with ISO-8859-1 is: let nbsp="Ã‚Â ";


 getUncompressedContent_brotliEncodedTextInBase64
{
  "brotli": true,
  "headers": {
    "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8",
    "Accept-Encoding": "gzip, deflate",
    "Accept-Language": "en-US,en;q=0.9",
    "Connection": "close",
    "Host": "httpbin.org",
    "Upgrade-Insecure-Requests": "1",
    "User-Agent": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36"
  },
  "method": "GET",
  "origin": "47.211.7.40"
}

String contentType = "application/json";
String text = "G+gBAByH6QZ7VkL/7oahqXWlurNJR+ZXZDxIDSJC1rcVWJawTt28HtjGbEzN5qa2FmYZd2GqcyFAPOBS1oG68g2MnxcKx26uC8hj1ErMKaeMQPAgOzEpat2oPD9OTJ/qHu/oLoF1aA+uwJnMXVb8loT95Szo24whPME8DNhQJuuAhsacZGfRM2AJ364SLHsHYJG07Pdd0hZWDs5PCIcfnImRExYS9PN57sOincIseN+eFz77aM1isn5uSMcSkcGUjKxXGhLRba9eeJUTALoo2qvsh7uheZqCPxnd+ifhq5jrRNY5WQNoLEGLska3JKo6/L/HKa8pnJB+JEPiREMD7yANxkK1gLilCCNgUpttuJnQELQVnZNEkTuzFUHLPQ==";
String contentEncodingHeaderValue = "br";
String harContentEncoding = "base64";
Integer bodySize = 290;
Integer contentSize = 290;
String comment = "";
String contentLengthHeaderValue = "290";
actual: ImmutableTypedContent{contentType=application/json, data.size=?}
content text base64 length: 384
content bytes length: 286
expected decoded length: 489
io.github.mike10004.vhs.harbridge.Base64ByteSource@1198b989 size: Optional[12]
text: âœ“
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.23 s - in io.github.mike10004.vhs.harbridge.HarsTest
[INFO] Running io.github.mike10004.vhs.harbridge.WrappingResponseEncodingTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 s - in io.github.mike10004.vhs.harbridge.WrappingResponseEncodingTest
[INFO] Running io.github.mike10004.vhs.harbridge.Base64ByteSourceTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in io.github.mike10004.vhs.harbridge.Base64ByteSourceTest
[INFO] Running io.github.mike10004.vhs.repackaged.org.apache.http.client.utils.URLEncodedUtilsTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in io.github.mike10004.vhs.repackaged.org.apache.http.client.utils.URLEncodedUtilsTest
[INFO] Running io.github.mike10004.vhs.repackaged.org.apache.http.NameValuePairImplTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in io.github.mike10004.vhs.repackaged.org.apache.http.NameValuePairImplTest
[INFO] 
[INFO] Results:
[INFO] 
[WARNING] Tests run: 67, Failures: 0, Errors: 0, Skipped: 1
[INFO] 
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building virtual-har-server-core 0.20
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ virtual-har-server-core ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mike10004/virtual-har-server/364194160/virtual-har-server-core/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.6.0:compile (default-compile) @ virtual-har-server-core ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ virtual-har-server-core ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mike10004/virtual-har-server/364194160/virtual-har-server-core/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.6.0:testCompile (default-testCompile) @ virtual-har-server-core ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.20.1:test (default-test) @ virtual-har-server-core ---
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running io.github.mike10004.vhs.HttpRequestsTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.107 s - in io.github.mike10004.vhs.HttpRequestsTest
[INFO] Running io.github.mike10004.vhs.BasicHeuristicTest
[WARNING] Tests run: 30, Failures: 0, Errors: 0, Skipped: 2, Time elapsed: 0.103 s - in io.github.mike10004.vhs.BasicHeuristicTest
[INFO] Running io.github.mike10004.vhs.HarBridgeEntryParserTest
Content-Length: [12]
[WARNING] Tests run: 8, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.017 s - in io.github.mike10004.vhs.HarBridgeEntryParserTest
[INFO] Running io.github.mike10004.vhs.HeuristicEntryMatcherTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.015 s - in io.github.mike10004.vhs.HeuristicEntryMatcherTest
[INFO] 
[INFO] Results:
[INFO] 
[WARNING] Tests run: 42, Failures: 0, Errors: 0, Skipped: 3
[INFO] 
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building virtual-har-server-har-bridge-sstoehr 0.20
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ virtual-har-server-har-bridge-sstoehr ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mike10004/virtual-har-server/364194160/virtual-har-server-har-bridge-sstoehr/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.6.0:compile (default-compile) @ virtual-har-server-har-bridge-sstoehr ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ virtual-har-server-har-bridge-sstoehr ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mike10004/virtual-har-server/364194160/virtual-har-server-har-bridge-sstoehr/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.6.0:testCompile (default-testCompile) @ virtual-har-server-har-bridge-sstoehr ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.20.1:test (default-test) @ virtual-har-server-har-bridge-sstoehr ---
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running io.github.mike10004.vhs.harbridge.sstoehr.SstoehrHarBridgeTest
[INFO] Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.276 s - in io.github.mike10004.vhs.harbridge.sstoehr.SstoehrHarBridgeTest
[INFO] 
[INFO] Results:
[INFO] 
[INFO] Tests run: 11, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building virtual-har-server-test-support 0.20
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ virtual-har-server-test-support ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.6.0:compile (default-compile) @ virtual-har-server-test-support ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ virtual-har-server-test-support ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mike10004/virtual-har-server/364194160/virtual-har-server-test-support/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.6.0:testCompile (default-testCompile) @ virtual-har-server-test-support ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.20.1:test (default-test) @ virtual-har-server-test-support ---
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running io.github.mike10004.vhs.testsupport.NanohttpdFormDataParserTest
String expectedParamValue = "Some UTF-8 text: \uD83C\uDCA1\uD83C\uDCA8\uD83C\uDCD1\uD83C\uDCD8\uD83C\uDCD3"; // contains ðŸ‚¡ðŸ‚¨ðŸƒ‘ðŸƒ˜ðŸƒ“
byte[] expectedParamValueBytes = {83, 111, 109, 101, 32, 85, 84, 70, 45, 56, 32, 116, 101, 120, 116, 58, 32, -16, -97, -126, -95, -16, -97, -126, -88, -16, -97, -125, -111, -16, -97, -125, -104, -16, -97, -125, -109};
full data size: 2465
part[0] = FormDataPart{headers.size=2, contentDisposition="form-data; name=\"f\"; filename=[...]load3965121338549146845.jpeg\"", file=ImmutableTypedContent{contentType=image/jpeg, data.size=2127}}
part[1] = FormDataPart{headers.size=1, contentDisposition="form-data; name=\"tag\"", file=ImmutableTypedContent{contentType=application/x-www-form-urlencoded, data.size=37}}
comparing parsed file (2127 bytes) with expected file (2127 bytes)
String expectedParamValue = "Some UTF-8 text: \uD83C\uDCA1\uD83C\uDCA8\uD83C\uDCD1\uD83C\uDCD8\uD83C\uDCD3"; // contains ðŸ‚¡ðŸ‚¨ðŸƒ‘ðŸƒ˜ðŸƒ“
byte[] expectedParamValueBytes = {83, 111, 109, 101, 32, 85, 84, 70, 45, 56, 32, 116, 101, 120, 116, 58, 32, -16, -97, -126, -95, -16, -97, -126, -88, -16, -97, -125, -111, -16, -97, -125, -104, -16, -97, -125, -109};
full data size: 4066
part[0] = FormDataPart{headers.size=2, contentDisposition="form-data; name=\"f\"; filename=[...]load3965121338549146845.jpeg\"", file=ImmutableTypedContent{contentType=image/jpeg, data.size=3728}}
part[1] = FormDataPart{headers.size=1, contentDisposition="form-data; name=\"tag\"", file=ImmutableTypedContent{contentType=application/x-www-form-urlencoded, data.size=37}}
comparing parsed file (2127 bytes) with expected file (3728 bytes)
decode_asBmpHarCaptureFilterWould: java.lang.AssertionError: file bytes: array lengths differed, expected.length=2127 actual.length=3728
[WARNING] Tests run: 2, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.257 s - in io.github.mike10004.vhs.testsupport.NanohttpdFormDataParserTest
[INFO] 
[INFO] Results:
[INFO] 
[WARNING] Tests run: 2, Failures: 0, Errors: 0, Skipped: 1
[INFO] 
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building virtual-har-server-bmp 0.20
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ virtual-har-server-bmp ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /root/workspace/mike10004/virtual-har-server/364194160/virtual-har-server-bmp/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.6.0:compile (default-compile) @ virtual-har-server-bmp ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ virtual-har-server-bmp ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.6.0:testCompile (default-testCompile) @ virtual-har-server-bmp ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.20.1:test (default-test) @ virtual-har-server-bmp ---
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running io.github.mike10004.vhs.bmp.RequestCaptureTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.104 s - in io.github.mike10004.vhs.bmp.RequestCaptureTest
[INFO] Running io.github.mike10004.vhs.bmp.SstoehrEntryParserTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.049 s - in io.github.mike10004.vhs.bmp.SstoehrEntryParserTest
[INFO] Running io.github.mike10004.vhs.bmp.BrowsermobVirtualHarServerTest
text: âœ“
content-type: text/plain
requests contained in HAR:
  GET http://www.example.com/gimme-difficult-text
fetching http://www.example.com/gimme-difficult-text
responding with status 200 OK to GET http://www.example.com/gimme-difficult-textexpecting E29C93, actual = E29C93
fetching https://example.com/one
received HTTP/1.1 502 Bad Gateway from https://example.com/one
fetching https://www.example.com/
received HTTP/1.1 200 OK from https://www.example.com/
1 requests handled
GET https://www.example.com/
requests contained in HAR:
  GET https://www.redi123.com/
  GET https://www.redi123.com/this-is-the-redirecting-script
  GET https://www.redi123.com/favicon.ico
  GET https://www.redi123.com/other.html
https_rejectUpstreamBadCertificate
expect some big exception stack traces in the logs for this one
fetching https://sha256.badssl.com/
received HTTP/1.1 200 OK from https://sha256.badssl.com/
fetching https://self-signed.badssl.com/
received HTTP/1.1 502 Bad Gateway from https://self-signed.badssl.com/
fetching https://self-signed.badssl.com/
fetching https://www.example.com/
received HTTP/1.1 200 OK from https://www.example.com/
fetching http://example.com/one
received HTTP/1.1 200 OK from http://example.com/one
fetching http://example.com/two
received HTTP/1.1 200 OK from http://example.com/two
fetching http://example.com/not-found
received HTTP/1.1 404 Not Found from http://example.com/not-found
'one' fetched from http://example.com/one
[ERROR] Tests run: 7, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 22.847 s <<< FAILURE! - in io.github.mike10004.vhs.bmp.BrowsermobVirtualHarServerTest
[ERROR] javascriptRedirect(io.github.mike10004.vhs.bmp.BrowsermobVirtualHarServerTest)  Time elapsed: 3.137 s  <<< ERROR!
org.openqa.selenium.WebDriverException: 
Could not launch browser.
Build info: version: '3.8.1', revision: '6e95a6684b', time: '2017-12-01T18:33:54.468Z'
System info: host: 'spirals-vortex.lille.inria.fr', ip: '172.17.0.3', os.name: 'Linux', os.arch: 'amd64', os.version: '3.10.0-693.21.1.el7.x86_64', java.version: '1.8.0_121'
Driver info: driver.version: JBrowserDriver
	at io.github.mike10004.vhs.bmp.BrowsermobVirtualHarServerTest.javascriptRedirect(BrowsermobVirtualHarServerTest.java:270)
Caused by: java.lang.IllegalStateException: Could not launch browser.
	at io.github.mike10004.vhs.bmp.BrowsermobVirtualHarServerTest.javascriptRedirect(BrowsermobVirtualHarServerTest.java:270)

[INFO] Running io.github.mike10004.vhs.bmp.ResponseManufacturingFilterTest
https://www.example.com/foo reconstructed from https://localhost:36591/foo and Host: www.example.com
https://www.example.com:5688/foo reconstructed from https://localhost:36591/foo and Host: www.example.com:5688
https://www.example.com/foo reconstructed from https://localhost:36591/foo and Host: www.example.com:443
http://www.example.com/foo reconstructed from http://www.example.com/foo and Host: www.example.com
http://www.example.com/foo reconstructed from http://www.example.com/foo and Host: www.example.com:80
http://www.example.com:8080/foo reconstructed from http://www.example.com:8080/foo and Host: www.example.com:8080
http://localhost:36591/foo reconstructed from http://localhost:36591/foo and Host: www.example.com:8080
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3.054 s - in io.github.mike10004.vhs.bmp.ResponseManufacturingFilterTest
[INFO] Running io.github.mike10004.vhs.bmp.HarMakerTest
[WARNING] Tests run: 1, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.001 s - in io.github.mike10004.vhs.bmp.HarMakerTest
[INFO] Running io.github.mike10004.vhs.bmp.KeystoreTypeTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in io.github.mike10004.vhs.bmp.KeystoreTypeTest
[INFO] Running io.github.mike10004.vhs.bmp.BrEncodedResponseTest
requests contained in HAR:
  GET http://www.example.com/served-with-br-encoding
ERROR RESPONSE 200 to ParsedRequest{method=GET, url=http://www.example.com/served-with-br-encoding, query.size=-1, headers.size=5, hasBody=true}
null: HTTP/1.1 200 OK
Last-Modified: Mon, 05 Nov 2012 04:00:51 GMT
Date: Mon, 13 Mar 2017 18:08:13 GMT
Via: 1.1 browsermobproxy
Accept-Ranges: bytes
Cache-Control: max-age=31536000, immutable
Content-Encoding: identity
Vary: Accept-Encoding
Expires: Sat, 10 Mar 2018 17:49:06 GMT
Content-Length: 788
Content-Type: text/plain; charset=utf-8
actual:
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin eget gravida leo, condimentum aliquam enim. Aliquam vitae male
[...]
lam nunc libero, cursus in porttitor non, laoreet eu augue. Quisque quis tortor ultrices, volutpat libero eu, pretium lacus.
requests contained in HAR:
  GET http://www.example.com/served-with-br-encoding
[ERROR] Tests run: 2, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 6.013 s <<< FAILURE! - in io.github.mike10004.vhs.bmp.BrEncodedResponseTest
[ERROR] seeBrEncodedResponse_chrome(io.github.mike10004.vhs.bmp.BrEncodedResponseTest)  Time elapsed: 3.473 s  <<< ERROR!
com.github.mike10004.nativehelper.subprocess.ProcessMissionControl$ProcessStartException: java.io.IOException: Cannot run program "Xvfb": error=2, No such file or directory
	at io.github.mike10004.vhs.bmp.BrEncodedResponseTest.lambda$seeBrEncodedResponse_chrome$0(BrEncodedResponseTest.java:62)
	at io.github.mike10004.vhs.bmp.BrEncodedResponseTest.seeBrEncodedResponse(BrEncodedResponseTest.java:173)
	at io.github.mike10004.vhs.bmp.BrEncodedResponseTest.seeBrEncodedResponse_chrome(BrEncodedResponseTest.java:61)
Caused by: java.io.IOException: Cannot run program "Xvfb": error=2, No such file or directory
	at io.github.mike10004.vhs.bmp.BrEncodedResponseTest.lambda$seeBrEncodedResponse_chrome$0(BrEncodedResponseTest.java:62)
	at io.github.mike10004.vhs.bmp.BrEncodedResponseTest.seeBrEncodedResponse(BrEncodedResponseTest.java:173)
	at io.github.mike10004.vhs.bmp.BrEncodedResponseTest.seeBrEncodedResponse_chrome(BrEncodedResponseTest.java:61)
Caused by: java.io.IOException: error=2, No such file or directory
	at io.github.mike10004.vhs.bmp.BrEncodedResponseTest.lambda$seeBrEncodedResponse_chrome$0(BrEncodedResponseTest.java:62)
	at io.github.mike10004.vhs.bmp.BrEncodedResponseTest.seeBrEncodedResponse(BrEncodedResponseTest.java:173)
	at io.github.mike10004.vhs.bmp.BrEncodedResponseTest.seeBrEncodedResponse_chrome(BrEncodedResponseTest.java:61)

[INFO] Running io.github.mike10004.vhs.bmp.NanohttpdTlsEndpointFactoryTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s - in io.github.mike10004.vhs.bmp.NanohttpdTlsEndpointFactoryTest
[INFO] Running io.github.mike10004.vhs.bmp.KeystoreDataSerializerTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in io.github.mike10004.vhs.bmp.KeystoreDataSerializerTest
[INFO] Running io.github.mike10004.vhs.bmp.RealHarFileParsingTest
[WARNING] Tests run: 3, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.016 s - in io.github.mike10004.vhs.bmp.RealHarFileParsingTest
[INFO] Running io.github.mike10004.vhs.bmp.JreKeystoreGeneratorTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in io.github.mike10004.vhs.bmp.JreKeystoreGeneratorTest
[INFO] Running io.github.mike10004.vhs.bmp.NettyMultipartFormDataParserTest
String expectedParamValue = "Some UTF-8 text: \uD83C\uDCA1\uD83C\uDCA8\uD83C\uDCD1\uD83C\uDCD8\uD83C\uDCD3"; // contains ðŸ‚¡ðŸ‚¨ðŸƒ‘ðŸƒ˜ðŸƒ“
byte[] expectedParamValueBytes = {83, 111, 109, 101, 32, 85, 84, 70, 45, 56, 32, 116, 101, 120, 116, 58, 32, -16, -97, -126, -95, -16, -97, -126, -88, -16, -97, -125, -111, -16, -97, -125, -104, -16, -97, -125, -109};
full data size: 2465
part[0] = FormDataPart{headers.size=0, contentDisposition="form-data; name=\"f\"; filename=[...]load3965121338549146845.jpeg\"", file=ImmutableTypedContent{contentType=image/jpeg, data.size=2127}}
part[1] = FormDataPart{headers.size=0, contentDisposition="form-data; name=\"tag\"", file=ImmutableTypedContent{contentType=application/octet-stream, data.size=37}}
comparing parsed file (2127 bytes) with expected file (2127 bytes)
String expectedParamValue = "Some UTF-8 text: \uD83C\uDCA1\uD83C\uDCA8\uD83C\uDCD1\uD83C\uDCD8\uD83C\uDCD3"; // contains ðŸ‚¡ðŸ‚¨ðŸƒ‘ðŸƒ˜ðŸƒ“
byte[] expectedParamValueBytes = {83, 111, 109, 101, 32, 85, 84, 70, 45, 56, 32, 116, 101, 120, 116, 58, 32, -16, -97, -126, -95, -16, -97, -126, -88, -16, -97, -125, -111, -16, -97, -125, -104, -16, -97, -125, -109};
full data size: 4066
part[0] = FormDataPart{headers.size=0, contentDisposition="form-data; name=\"f\"; filename=[...]load3965121338549146845.jpeg\"", file=ImmutableTypedContent{contentType=image/jpeg, data.size=3728}}
part[1] = FormDataPart{headers.size=0, contentDisposition="form-data; name=\"tag\"", file=ImmutableTypedContent{contentType=application/octet-stream, data.size=37}}
comparing parsed file (2127 bytes) with expected file (3728 bytes)
decode_asBmpHarCaptureFilterWould: java.lang.AssertionError: file bytes: array lengths differed, expected.length=2127 actual.length=3728
[WARNING] Tests run: 2, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.045 s - in io.github.mike10004.vhs.bmp.NettyMultipartFormDataParserTest
[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Errors: 
[ERROR]   BrEncodedResponseTest.seeBrEncodedResponse_chrome:61->seeBrEncodedResponse:173->lambda$seeBrEncodedResponse_chrome$0:62 Â» ProcessStart
[ERROR]   BrowsermobVirtualHarServerTest.javascriptRedirect:270 Â» WebDriver Could not la...
[INFO] 
[ERROR] Tests run: 26, Failures: 0, Errors: 2, Skipped: 3
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] virtual-har-server ................................. SUCCESS [  0.003 s]
[INFO] virtual-har-server-har-bridge ...................... SUCCESS [  2.750 s]
[INFO] virtual-har-server-core ............................ SUCCESS [  0.846 s]
[INFO] virtual-har-server-har-bridge-sstoehr .............. SUCCESS [  0.869 s]
[INFO] virtual-har-server-test-support .................... SUCCESS [  0.964 s]
[INFO] virtual-har-server-bmp ............................. FAILURE [ 32.921 s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 39.049 s
[INFO] Finished at: 2018-04-09T18:19:51+02:00
[INFO] Final Memory: 27M/942M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.20.1:test (default-test) on project virtual-har-server-bmp: There are test failures.
[ERROR] 
[ERROR] Please refer to /root/workspace/mike10004/virtual-har-server/364194160/virtual-har-server-bmp/target/surefire-reports for the individual test results.
[ERROR] Please refer to dump files (if any exist) [date]-jvmRun[N].dump, [date].dumpstream and [date]-jvmRun[N].dumpstream.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :virtual-har-server-bmp
