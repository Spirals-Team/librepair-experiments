enmasse.mqtt.SubscribeTest#subscribeRecoveringSession
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/root/workspace/EnMasseProject/enmasse/378144888/.m2/ch/qos/logback/logback-classic/1.1.11/logback-classic-1.1.11.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/root/repairnator-pipeline.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
22:30:47,978 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
22:30:47,978 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
22:30:47,978 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/root/workspace/EnMasseProject/enmasse/378144888/mqtt-gateway/target/test-classes/logback.xml]
22:30:47,979 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs multiple times on the classpath.
22:30:47,979 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [jar:file:/root/repairnator-pipeline.jar!/logback.xml]
22:30:47,979 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [file:/root/workspace/EnMasseProject/enmasse/378144888/mqtt-gateway/target/test-classes/logback.xml]
22:30:47,979 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [file:/root/logback.xml]
22:30:48,050 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
22:30:48,051 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
22:30:48,060 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
22:30:48,066 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
22:30:48,108 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to INFO
22:30:48,108 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]
22:30:48,109 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [io.netty.handler.logging.LoggingHandler] to INFO
22:30:48,109 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [io.vertx.proton.impl] to INFO
22:30:48,109 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [io.vertx.core.net.impl] to INFO
22:30:48,109 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [enmasse.mqtt] to DEBUG
22:30:48,109 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.
22:30:48,110 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@77baed10 - Registering current configuration as safe fallback point

SLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder]
.22:30:48.665 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Started server on port 43289
22:30:48.669 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Started server on port 38094
22:30:48.669 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Started server on port 39627
22:30:48.905 [vert.x-eventloop-thread-2] INFO  enmasse.mqtt.mocks.MockBroker - Broker started successfully ...
22:30:48.917 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Link route with prefix mytopic found for broker
22:30:48.917 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Link route with prefix will found for broker
22:30:48.924 [vert.x-eventloop-thread-4] INFO  enmasse.mqtt.mocks.MockLwtService - Last Will and Testament Service started successfully ...
22:30:48.927 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Link route with prefix $lwt found for lwt-service
22:30:48.934 [vert.x-eventloop-thread-6] INFO  e.mqtt.mocks.MockSubscriptionService - Subscription Service started successfully ...
22:30:48.960 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.MqttGateway - Starting MQTT gateway verticle...
22:30:48.964 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Adding sender with address $subctrl
22:30:48.964 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Table: {senders=[]},{receivers=[]},{linkRoutes=[{prefix=mytopic, container=broker}, {prefix=will, container=broker}, {prefix=$lwt, container=lwt-service}]}
22:30:48.967 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.MqttGateway - MQTT gateway running on localhost:1883
22:30:48.967 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.MqttGateway - AMQP messaging service on localhost:43289
22:30:49.063 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.MqttGateway - CONNECT from MQTT client my_subscriber_id
22:30:49.219 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Adding sender with address $mqtt.to.my_subscriber_id.control
22:30:49.219 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Table: {senders=[$subctrl]},{receivers=[]},{linkRoutes=[{prefix=mytopic, container=broker}, {prefix=will, container=broker}, {prefix=$lwt, container=lwt-service}]}
22:30:49.220 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Adding receiver with address $subctrl
22:30:49.220 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Table: {senders=[$subctrl, $mqtt.to.my_subscriber_id.control]},{receivers=[]},{linkRoutes=[{prefix=mytopic, container=broker}, {prefix=will, container=broker}, {prefix=$lwt, container=lwt-service}]}
22:30:49.229 [vert.x-eventloop-thread-8] INFO  e.m.e.AmqpSubscriptionServiceEndpoint - AMQP list delivery Accepted{}
22:30:49.231 [vert.x-eventloop-thread-6] INFO  e.mqtt.mocks.MockSubscriptionService - Received Message{properties=Properties{messageId=null, userId=null, to='null', subject='list', replyTo='$mqtt.to.my_subscriber_id.control', correlationId=$mqtt.to.my_subscriber_id.publish, contentType=null, contentEncoding=null, absoluteExpiryTime=null, creationTime=null, groupId='null', groupSequence=null, replyToGroupId='null'}}
22:30:49.251 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Adding receiver with address $mqtt.to.my_subscriber_id.control
22:30:49.251 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Table: {senders=[$subctrl, $mqtt.to.my_subscriber_id.control]},{receivers=[$subctrl]},{linkRoutes=[{prefix=mytopic, container=broker}, {prefix=will, container=broker}, {prefix=$lwt, container=lwt-service}]}
22:30:49.259 [vert.x-eventloop-thread-8] INFO  e.m.endpoints.AmqpReceiverEndpoint - Received Message{properties=Properties{messageId=null, userId=null, to='null', subject='subscriptions', replyTo='null', correlationId=null, contentType=null, contentEncoding=null, absoluteExpiryTime=null, creationTime=null, groupId='null', groupSequence=null, replyToGroupId='null'}body=AmqpValue{{}}}
22:30:49.259 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - Session present: false
22:30:49.259 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - AmqpSubscriptionsMessage{topicSubscriptions=[]}
22:30:49.260 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Closing receiver on $mqtt.to.my_subscriber_id.control
22:30:49.270 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - CONNACK to MQTT client my_subscriber_id [accepted]
22:30:49.271 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.MqttGateway - Opened AMQP bridge for client my_subscriber_id
22:30:49.273 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Adding sender with address $mqtt.to.my_subscriber_id.publish
22:30:49.273 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Table: {senders=[$subctrl, $mqtt.to.my_subscriber_id.control]},{receivers=[$subctrl, $mqtt.to.my_subscriber_id.control]},{linkRoutes=[{prefix=mytopic, container=broker}, {prefix=will, container=broker}, {prefix=$lwt, container=lwt-service}]}
22:30:49.277 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - SUBSCRIBE [1] from MQTT client my_subscriber_id
22:30:49.282 [vert.x-eventloop-thread-8] INFO  e.m.e.AmqpSubscriptionServiceEndpoint - AMQP subscribe delivery Accepted{}
22:30:49.283 [vert.x-eventloop-thread-6] INFO  e.mqtt.mocks.MockSubscriptionService - Received Message{properties=Properties{messageId=1, userId=null, to='null', subject='subscribe', replyTo='null', correlationId=$mqtt.to.my_subscriber_id.publish, contentType=null, contentEncoding=null, absoluteExpiryTime=null, creationTime=null, groupId='null', groupSequence=null, replyToGroupId='null'}body=AmqpValue{{mytopic=0}}}
22:30:49.290 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Adding receiver with address $mqtt.to.my_subscriber_id.publish
22:30:49.290 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Table: {senders=[$subctrl, $mqtt.to.my_subscriber_id.control, $mqtt.to.my_subscriber_id.publish]},{receivers=[$subctrl, $mqtt.to.my_subscriber_id.control]},{linkRoutes=[{prefix=mytopic, container=broker}, {prefix=will, container=broker}, {prefix=$lwt, container=lwt-service}]}
22:30:49.290 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - SUBACK [1] to MQTT client my_subscriber_id
22:30:49.292 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Adding sender with address $mqtt.my_subscriber_id.pubrel
22:30:49.292 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Table: {senders=[$subctrl, $mqtt.to.my_subscriber_id.control, $mqtt.to.my_subscriber_id.publish]},{receivers=[$subctrl, $mqtt.to.my_subscriber_id.control, $mqtt.to.my_subscriber_id.publish]},{linkRoutes=[{prefix=mytopic, container=broker}, {prefix=will, container=broker}, {prefix=$lwt, container=lwt-service}]}
22:30:49.293 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - DISCONNECT from MQTT client my_subscriber_id
22:30:49.296 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - Close from MQTT client my_subscriber_id
22:30:49.311 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Closing receiver on $subctrl
22:30:49.311 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.MqttGateway - Closed AMQP bridge for client my_subscriber_id
22:30:49.312 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Closing sender on $mqtt.to.my_subscriber_id.control
22:30:49.312 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Closing sender on $mqtt.to.my_subscriber_id.publish
22:30:49.313 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Connection closing!
22:30:49.313 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.MqttGateway - CONNECT from MQTT client my_subscriber_id
22:30:49.314 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Connection disconnected!
22:30:49.314 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - AMQP connection closed with dispatch-router-j
22:30:49.314 [vert.x-eventloop-thread-8] WARN  enmasse.mqtt.AmqpBridge - MQTT endpoint for client my_subscriber_id already closed
22:30:49.316 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - AMQP disconnection with dispatch-router-j
22:30:49.316 [vert.x-eventloop-thread-8] WARN  enmasse.mqtt.AmqpBridge - MQTT endpoint for client my_subscriber_id already closed
22:30:49.324 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Adding sender with address $mqtt.to.my_subscriber_id.control
22:30:49.324 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Table: {senders=[$subctrl, $mqtt.to.my_subscriber_id.control, $mqtt.my_subscriber_id.pubrel, $mqtt.to.my_subscriber_id.publish]},{receivers=[$subctrl, $mqtt.to.my_subscriber_id.control, $mqtt.to.my_subscriber_id.publish]},{linkRoutes=[{prefix=mytopic, container=broker}, {prefix=will, container=broker}, {prefix=$lwt, container=lwt-service}]}
22:30:49.325 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Adding receiver with address $subctrl
22:30:49.325 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Table: {senders=[$subctrl, $mqtt.to.my_subscriber_id.control, $mqtt.my_subscriber_id.pubrel, $mqtt.to.my_subscriber_id.publish]},{receivers=[$subctrl, $mqtt.to.my_subscriber_id.control, $mqtt.to.my_subscriber_id.publish]},{linkRoutes=[{prefix=mytopic, container=broker}, {prefix=will, container=broker}, {prefix=$lwt, container=lwt-service}]}
22:30:49.328 [vert.x-eventloop-thread-8] INFO  e.m.e.AmqpSubscriptionServiceEndpoint - AMQP list delivery Accepted{}
22:30:49.329 [vert.x-eventloop-thread-6] INFO  e.mqtt.mocks.MockSubscriptionService - Received Message{properties=Properties{messageId=null, userId=null, to='null', subject='list', replyTo='$mqtt.to.my_subscriber_id.control', correlationId=$mqtt.to.my_subscriber_id.publish, contentType=null, contentEncoding=null, absoluteExpiryTime=null, creationTime=null, groupId='null', groupSequence=null, replyToGroupId='null'}}
22:30:49.472 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Adding receiver with address $mqtt.to.my_subscriber_id.control
22:30:49.472 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Table: {senders=[$subctrl, $mqtt.to.my_subscriber_id.control, $mqtt.my_subscriber_id.pubrel, $mqtt.to.my_subscriber_id.publish]},{receivers=[$subctrl, $mqtt.to.my_subscriber_id.control, $mqtt.to.my_subscriber_id.publish]},{linkRoutes=[{prefix=mytopic, container=broker}, {prefix=will, container=broker}, {prefix=$lwt, container=lwt-service}]}
22:30:49.475 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Closing receiver on $mqtt.to.my_subscriber_id.control
22:30:49.475 [vert.x-eventloop-thread-8] INFO  e.m.endpoints.AmqpReceiverEndpoint - Received Message{properties=Properties{messageId=null, userId=null, to='null', subject='subscriptions', replyTo='null', correlationId=null, contentType=null, contentEncoding=null, absoluteExpiryTime=null, creationTime=null, groupId='null', groupSequence=null, replyToGroupId='null'}body=AmqpValue{{mytopic=0}}}
22:30:49.475 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - Session present: true
22:30:49.475 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - AmqpSubscriptionsMessage{topicSubscriptions=[AmqpTopicSubscription{topic=mytopic, qos=AT_MOST_ONCE}]}
22:30:49.476 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - CONNACK to MQTT client my_subscriber_id [accepted]
22:30:49.477 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.MqttGateway - Opened AMQP bridge for client my_subscriber_id
22:30:49.479 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Adding sender with address $mqtt.to.my_subscriber_id.publish
22:30:49.479 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Table: {senders=[$subctrl, $mqtt.to.my_subscriber_id.control, $mqtt.my_subscriber_id.pubrel, $mqtt.to.my_subscriber_id.publish]},{receivers=[$subctrl, $mqtt.to.my_subscriber_id.control, $mqtt.to.my_subscriber_id.publish]},{linkRoutes=[{prefix=mytopic, container=broker}, {prefix=will, container=broker}, {prefix=$lwt, container=lwt-service}]}
22:30:49.480 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.MqttGateway - CONNECT from MQTT client my_publisher_id
22:30:49.492 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Adding sender with address $mqtt.to.my_publisher_id.control
22:30:49.492 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Table: {senders=[$subctrl, $mqtt.to.my_subscriber_id.control, $mqtt.my_subscriber_id.pubrel, $mqtt.to.my_subscriber_id.publish]},{receivers=[$subctrl, $mqtt.to.my_subscriber_id.control, $mqtt.to.my_subscriber_id.publish]},{linkRoutes=[{prefix=mytopic, container=broker}, {prefix=will, container=broker}, {prefix=$lwt, container=lwt-service}]}
22:30:49.493 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Adding receiver with address $subctrl
22:30:49.493 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Table: {senders=[$subctrl, $mqtt.to.my_publisher_id.control, $mqtt.to.my_subscriber_id.control, $mqtt.my_subscriber_id.pubrel, $mqtt.to.my_subscriber_id.publish]},{receivers=[$subctrl, $mqtt.to.my_subscriber_id.control, $mqtt.to.my_subscriber_id.publish]},{linkRoutes=[{prefix=mytopic, container=broker}, {prefix=will, container=broker}, {prefix=$lwt, container=lwt-service}]}
22:30:49.496 [vert.x-eventloop-thread-8] INFO  e.m.e.AmqpSubscriptionServiceEndpoint - AMQP close delivery Accepted{}
22:30:49.496 [vert.x-eventloop-thread-6] INFO  e.mqtt.mocks.MockSubscriptionService - Received Message{properties=Properties{messageId=null, userId=null, to='null', subject='close', replyTo='null', correlationId=$mqtt.to.my_publisher_id.publish, contentType=null, contentEncoding=null, absoluteExpiryTime=null, creationTime=null, groupId='null', groupSequence=null, replyToGroupId='null'}}
22:30:49.496 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - CONNACK to MQTT client my_publisher_id [accepted]
22:30:49.497 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.MqttGateway - Opened AMQP bridge for client my_publisher_id
22:30:49.499 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Adding sender with address $mqtt.to.my_publisher_id.publish
22:30:49.499 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Table: {senders=[$subctrl, $mqtt.to.my_publisher_id.control, $mqtt.to.my_subscriber_id.control, $mqtt.my_subscriber_id.pubrel, $mqtt.to.my_subscriber_id.publish]},{receivers=[$subctrl, $mqtt.to.my_subscriber_id.control, $mqtt.to.my_subscriber_id.publish]},{linkRoutes=[{prefix=mytopic, container=broker}, {prefix=will, container=broker}, {prefix=$lwt, container=lwt-service}]}
22:30:49.506 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - PUBLISH [-1] from MQTT client my_publisher_id
22:30:49.508 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Activating receiver link route for mytopic on broker
22:30:49.509 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - DISCONNECT from MQTT client my_publisher_id
22:30:49.510 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - Close from MQTT client my_publisher_id
22:30:49.519 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.MqttGateway - Closed AMQP bridge for client my_publisher_id
22:30:49.522 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Closing receiver on $subctrl
22:30:49.522 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Closing sender on $mqtt.to.my_publisher_id.control
22:30:49.522 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Closing sender on $mqtt.to.my_publisher_id.publish
22:30:49.529 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Connection closing!
22:30:49.530 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - AMQP connection closed with dispatch-router-j
22:30:49.530 [vert.x-eventloop-thread-8] WARN  enmasse.mqtt.AmqpBridge - MQTT endpoint for client my_publisher_id already closed
22:30:49.530 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - AMQP disconnection with dispatch-router-j
22:30:49.530 [vert.x-eventloop-thread-8] WARN  enmasse.mqtt.AmqpBridge - MQTT endpoint for client my_publisher_id already closed
22:30:49.531 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Connection disconnected!
22:30:49.534 [vert.x-eventloop-thread-8] INFO  e.m.endpoints.AmqpReceiverEndpoint - Received Message{header=Header{durable=false, priority=null, ttl=null, firstAcquirer=null, deliveryCount=0}properties=Properties{messageId=-1, userId=null, to='mytopic', subject='null', replyTo='null', correlationId=null, contentType=null, contentEncoding=null, absoluteExpiryTime=null, creationTime=null, groupId='null', groupSequence=null, replyToGroupId='null'}message_annotations=MessageAnnotations{{x-opt-retain-message=true, x-opt-mqtt-qos=0}}body=Data{Hello MQTT on EnMasse}}
22:30:49.536 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - PUBLISH [1] to MQTT client my_subscriber_id
22:30:49.536 [MQTT Call: my_subscriber_id] INFO  enmasse.mqtt.SubscribeTest - topic: mytopic message: Hello MQTT on EnMasse
22:30:49.545 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.MqttGateway - Stopping MQTT gateway verticle ...
22:30:49.545 [vert.x-eventloop-thread-2] INFO  enmasse.mqtt.mocks.MockBroker - Broker has been shut down successfully
22:30:49.545 [vert.x-eventloop-thread-6] INFO  e.mqtt.mocks.MockSubscriptionService - Subscription Service has been shut down successfully
22:30:49.545 [vert.x-eventloop-thread-4] INFO  enmasse.mqtt.mocks.MockLwtService - Last Will and Testament Service has been shut down successfully
22:30:49.562 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - Close from MQTT client my_subscriber_id
22:30:49.569 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.MqttGateway - Closed AMQP bridge for client my_subscriber_id
22:30:49.570 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Connection disconnected!
22:30:49.570 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Connection disconnected!
22:30:49.571 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Connection disconnected!
22:30:49.571 [vert.x-eventloop-thread-0] INFO  io.enmasse.amqp.DispatchRouterJ - Connection disconnected!
May 12, 2018 10:30:49 PM io.vertx.core.net.impl.ConnectionBase
SEVERE: Unhandled exception
java.io.IOException: Connection reset by peer
	at sun.nio.ch.FileDispatcherImpl.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:39)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)
	at io.netty.buffer.PooledUnsafeDirectByteBuf.setBytes(PooledUnsafeDirectByteBuf.java:288)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1108)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:345)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:126)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:645)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:580)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:497)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:459)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:745)

22:30:49.576 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.MqttGateway - MQTT gateway has been shut down successfully
22:30:49.576 [vert.x-eventloop-thread-8] INFO  enmasse.mqtt.AmqpBridge - AMQP disconnection with dispatch-router-j
22:30:49.576 [vert.x-eventloop-thread-8] WARN  enmasse.mqtt.AmqpBridge - MQTT endpoint for client my_subscriber_id already closed

Time: 1.666

OK (1 test)

