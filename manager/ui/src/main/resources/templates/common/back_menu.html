<nav class="navbar navbar-expand-md navbar-light">
  <span class="navbar-brand menu-label" th:text="#{menu.label}"></span>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#menuCollapse"
          aria-controls="menuCollapse" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="menuCollapse">
    <ul id="menu" class="navbar-nav flex-column">
      <li class="nav-item" th:each="menuItem : ${menuItems}"
          th:classappend="${menuItem.customCssClass}"
          th:if="${currentUser.hasPrivilege(menuItem.privilege)}">
        <a th:if="${(menuItem.subMenuItems.size() > 0)}"
           class="nav-link collapsed"
           data-toggle="collapse"
           th:title="${menuItem.title}"
           th:href="${'#menu_' + menuItem.title}"
        >
          <i th:classappend="${menuItem.iconClass}"></i>
          <span th:text="${menuItem.label}"></span>
          <i class="fa fa-angle-up"></i>
        </a>
        <div th:if="${(menuItem.subMenuItems.size() > 0)}" class="collapse"
             th:id="${'menu_' + menuItem.title}">
          <ul class="navbar-nav flex-column">
            <li class="nav-item" th:each="subMenuItem : ${menuItem.subMenuItems}"
                th:classappend="${subMenuItem.customCssClass}"
                th:if="${currentUser.hasPrivilege(subMenuItem.privilege)}">
              <a class=" nav-link
            " th:title="${subMenuItem.title}" th:href="${subMenuItem.href}">
                <i th:classappend="${subMenuItem.iconClass}"></i>
                <span th:text="${subMenuItem.label}"></span>
              </a>
            </li>
          </ul>
          <hr/>
        </div>
        <a class="nav-link"
           th:if="${!(menuItem.subMenuItems.size() > 0)}"
           th:title="${menuItem.title}"
           th:href="${menuItem.href}"
        >
          <i th:classappend="${menuItem.iconClass}"></i>
          <span th:text="${menuItem.label}"></span>
        </a>
      </li>
    </ul>
  </div>
</nav>

