--- /root/workspace/3redronin/mu-server/413147620/src/main/java/io/muserver/NettyResponseAdaptor.java
+++ /root/workspace/3redronin/mu-server/413147620/src/main/java/io/muserver/NettyResponseAdaptor.java
@@ -196,23 +196,25 @@
             boolean shouldDisconnect = forceDisconnect || !request.isKeepAliveRequested();
-            if (outputState == OutputState.NOTHING) {
-                HttpResponse msg = isHead ?
+            if (true) {
+                if (outputState == OutputState.NOTHING) {
+                    HttpResponse msg = isHead ?
                     new EmptyHttpResponse(httpStatus()) :
                     new DefaultFullHttpResponse(HTTP_1_1, httpStatus(), false);
-                msg.headers().add(this.headers.nettyHeaders());
-                if (!isHead || !(headers().contains(HeaderNames.CONTENT_LENGTH))) {
-                    msg.headers().set(HeaderNames.CONTENT_LENGTH, 0);
+                    msg.headers().add(this.headers.nettyHeaders());
+                    if (!isHead || !(headers().contains(HeaderNames.CONTENT_LENGTH))) {
+                        msg.headers().set(HeaderNames.CONTENT_LENGTH, 0);
+                    }
+                    if (shouldDisconnect) {
+                        msg.headers().set(HeaderNames.CONNECTION, HeaderValues.CLOSE);
+                    }
+                    shouldDisconnect |= writeAndFlushSafely(msg);
+                } else if (outputState == OutputState.STREAMING && !isHead) {
+                    if (writer != null) {
+                        writer.close();
+                    }
+                    if (outputStream != null) {
+                        outputStream.close();
+                    }
+                    outputState = OutputState.STREAMING_COMPLETE;
+                    shouldDisconnect |= writeAndFlushSafely(LastHttpContent.EMPTY_LAST_CONTENT);
                 }
-                if (shouldDisconnect) {
-                    msg.headers().set(HeaderNames.CONNECTION, HeaderValues.CLOSE);
-                }
-                shouldDisconnect |= writeAndFlushSafely(msg);
-            } else if (outputState == OutputState.STREAMING && !isHead) {
-                if (writer != null) {
-                    writer.close();
-                }
-                if (outputStream != null) {
-                    outputStream.close();
-                }
-                outputState = OutputState.STREAMING_COMPLETE;
-                shouldDisconnect |= writeAndFlushSafely(LastHttpContent.EMPTY_LAST_CONTENT);
             }
