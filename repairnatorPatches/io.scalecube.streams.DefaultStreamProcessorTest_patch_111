location: SourceLocation io.scalecube.streams.DefaultStreamProcessor:134
type: PRECONDITION
patch: --- /root/workspace/scalecube/scalecube/358406015/streams/src/main/java/io/scalecube/streams/DefaultStreamProcessor.java
+++ /root/workspace/scalecube/scalecube/358406015/streams/src/main/java/io/scalecube/streams/DefaultStreamProcessor.java
@@ -133,3 +133,5 @@
     // from local stream => no more requests and no more replies
-    channelContext.close();
+    if ((this.observableTerminated != null) && (this.listen() == null)) {
+      channelContext.close();
+    }
   }
