location: SourceLocation org.apache.servicecomb.config.client.MemberDiscovery:69
type: PRECONDITION
patch: --- /root/workspace/apache/incubator-servicecomb-java-chassis/353811022/dynamic-config/config-cc/src/main/java/org/apache/servicecomb/config/client/MemberDiscovery.java
+++ /root/workspace/apache/incubator-servicecomb-java-chassis/353811022/dynamic-config/config-cc/src/main/java/org/apache/servicecomb/config/client/MemberDiscovery.java
@@ -68,11 +68,13 @@
     configServerAddresses.clear();
-    members.getJsonArray("instances").forEach(m -> {
-      JsonObject instance = (JsonObject) m;
-      if ("UP".equals(instance.getString("status", "UP"))) {
-        String endpoint = instance.getJsonArray("endpoints").getString(0);
-        String scheme = instance.getBoolean("isHttps", false) ? "https" : "http";
-        configServerAddresses.add(scheme + SCHEMA_SEPRATOR
-            + endpoint.substring(endpoint.indexOf(SCHEMA_SEPRATOR) + SCHEMA_SEPRATOR.length()));
-      }
-    });
+    if ((members.getMap() == null) == (this.counter == null)) {
+      members.getJsonArray("instances").forEach(m -> {
+        JsonObject instance = (JsonObject) m;
+        if ("UP".equals(instance.getString("status", "UP"))) {
+          String endpoint = instance.getJsonArray("endpoints").getString(0);
+          String scheme = instance.getBoolean("isHttps", false) ? "https" : "http";
+          configServerAddresses.add(scheme + SCHEMA_SEPRATOR
+          + endpoint.substring(endpoint.indexOf(SCHEMA_SEPRATOR) + SCHEMA_SEPRATOR.length()));
+        }
+      });
+    }
     Collections.shuffle(configServerAddresses);
