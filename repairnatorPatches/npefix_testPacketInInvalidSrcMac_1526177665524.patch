--- /DeviceManagerImpl.java
+++ /DeviceManagerImpl.java
@@ -1085,13 +1085,15 @@
 		MacAddress gatewayMac = null;
-		if (gatewayService.getGatewayInstance(npt).isPresent() || gatewayService.getGatewayInstance(sw.getId()).isPresent()) {
-			if (gatewayService.getGatewayInstance(sw.getId()).isPresent()) {
-				instance = gatewayService.getGatewayInstance(sw.getId()).get();
+		if (gatewayService != null) {
+			if (gatewayService.getGatewayInstance(npt).isPresent() || gatewayService.getGatewayInstance(sw.getId()).isPresent()) {
+				if (gatewayService.getGatewayInstance(sw.getId()).isPresent()) {
+					instance = gatewayService.getGatewayInstance(sw.getId()).get();
+				}
+				else {
+					instance = gatewayService.getGatewayInstance(npt).get();
+				}
 			}
 			else {
-				instance = gatewayService.getGatewayInstance(npt).get();
+				logger.info("Could not locate virtual gateway instance for DPID {}, port {}", sw.getId(), inPort);
 			}
 		}
-		else {
-			logger.info("Could not locate virtual gateway instance for DPID {}, port {}", sw.getId(), inPort);
-		}
 
