<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>JsonFieldDefinition.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Eclipse Ditto :: JSON</a> &gt; <a href="index.source.html" class="el_package">org.eclipse.ditto.json</a> &gt; <span class="el_source">JsonFieldDefinition.java</span></div><h1>JsonFieldDefinition.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2017 Bosch Software Innovations GmbH.
 *
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v2.0
 * which accompanies this distribution, and is available at
 * https://www.eclipse.org/org/documents/epl-2.0/index.php
 *
 * Contributors:
 *    Bosch Software Innovations GmbH - initial contribution
 */
package org.eclipse.ditto.json;

import java.util.Set;

import javax.annotation.Nullable;

/**
 * A {@code JsonFieldDefinition} is a formal description of a single {@link JsonField}. A JSON field consists of a key
 * (or name) and a value. A JsonFieldDefinition differs in the way that it consists not only of a simple JSON key but
 * its super type {@link JsonPointer}. With the help of this interface one can explicitly define a schema of a JSON
 * document including all sub documents. &lt;p&gt; The following example shows how a JSON document would be described with the
 * help of JsonFieldDefinition.
 * &lt;p&gt;
 * &lt;pre&gt;
 *      {
 *         &quot;thingId&quot;: &quot;myThing&quot;,
 *         &quot;attributes&quot;: {
 *            &quot;someAttr&quot;: {
 *               &quot;subsel&quot;: 42
 *            },
 *            &quot;anotherAttr&quot;: &quot;baz&quot;
 *         }
 *      }
 * &lt;/pre&gt;
 * &lt;p&gt;
 * Within an according class the structure of this JSON document could be described as follows:
 * &lt;p&gt;
 * &lt;pre&gt;
 *       import static JsonFactory.newFieldDefinition;
 *       ...
 *
 *        public final class Thing {
 *
 *           private static final JsonFieldDefinition THING_ID = newFieldDefinition(&quot;thingId&quot;, String.class);
 *           private static final JsonFieldDefinition SUBSEL = newFieldDefinition(&quot;attributes/someAttr/subsel&quot;,
 * int.class);
 *           private static final JsonFieldDefinition ANOTHER_ATTR = newFieldDefinition(&quot;attributes/anotherAttr&quot;,
 * String.class);
 *
 *           ...
 *
 *        }
 * &lt;/pre&gt;
 * &lt;p&gt;
 * In this case {@code attributes} and {@code someAttr} are implicitly defined with the value type {@link JsonObject}.
 * &lt;p&gt;
 * Additionally, a JSON field definition can be marked with zero to n {@link JsonFieldMarker}s. The semantics of a
 * marker is defined by you rather than Ditto JSON. One possible usage scenario would be to define the fields which
 * belong to a particular schema version with a maker according to that version.
 * &lt;p&gt;
 * &lt;em&gt;Implementations of this interface are required to be immutable!&lt;/em&gt;
 */
public interface JsonFieldDefinition&lt;T&gt; {

    /**
     * Returns a new JSON field definition for a String value.
     *
     * @param pointer a character sequence consisting of either a single JSON key or a slash delimited hierarchy of JSON
     * keys aka JSON pointer.
     * @param markers an optional array of markers which add user defined semantics to the defined JSON field.
     * @return the new JSON field definition.
     * @throws NullPointerException if {@code pointer} is {@code null}.
     * @throws IllegalArgumentException if {@code pointer} is empty.
     * @see JsonFactory#newStringFieldDefinition(CharSequence, JsonFieldMarker...)
     */
    static JsonFieldDefinition&lt;String&gt; ofString(final CharSequence pointer, final JsonFieldMarker ... markers) {
<span class="nc" id="L78">        return JsonFactory.newStringFieldDefinition(pointer, markers);</span>
    }

    /**
     * Returns a new JSON field definition for an {@code int} value.
     *
     * @param pointer a character sequence consisting of either a single JSON key or a slash delimited hierarchy of JSON
     * keys aka JSON pointer.
     * @param markers an optional array of markers which add user defined semantics to the defined JSON field.
     * @return the new JSON field definition.
     * @throws NullPointerException if {@code pointer} is {@code null}.
     * @throws IllegalArgumentException if {@code pointer} is empty.
     * @see JsonFactory#newIntFieldDefinition(CharSequence, JsonFieldMarker...)
     */
    static JsonFieldDefinition&lt;Integer&gt; ofInt(final CharSequence pointer, final JsonFieldMarker ... markers) {
<span class="nc" id="L93">        return JsonFactory.newIntFieldDefinition(pointer, markers);</span>
    }

    /**
     * Returns a new JSON field definition for a {@code long} value.
     *
     * @param pointer a character sequence consisting of either a single JSON key or a slash delimited hierarchy of JSON
     * keys aka JSON pointer.
     * @param markers an optional array of markers which add user defined semantics to the defined JSON field.
     * @return the new JSON field definition.
     * @throws NullPointerException if {@code pointer} is {@code null}.
     * @throws IllegalArgumentException if {@code pointer} is empty.
     * @see JsonFactory#newLongFieldDefinition(CharSequence, JsonFieldMarker...)
     */
    static JsonFieldDefinition&lt;Long&gt; ofLong(final CharSequence pointer, final JsonFieldMarker ... markers) {
<span class="nc" id="L108">        return JsonFactory.newLongFieldDefinition(pointer, markers);</span>
    }

    /**
     * Returns a new JSON field definition for a {@code double} value.
     *
     * @param pointer a character sequence consisting of either a single JSON key or a slash delimited hierarchy of JSON
     * keys aka JSON pointer.
     * @param markers an optional array of markers which add user defined semantics to the defined JSON field.
     * @return the new JSON field definition.
     * @throws NullPointerException if {@code pointer} is {@code null}.
     * @throws IllegalArgumentException if {@code pointer} is empty.
     * @see JsonFactory#newDoubleFieldDefinition(CharSequence, JsonFieldMarker...)
     */
    static JsonFieldDefinition&lt;Double&gt; ofDouble(final CharSequence pointer, final JsonFieldMarker ... markers) {
<span class="nc" id="L123">        return JsonFactory.newDoubleFieldDefinition(pointer, markers);</span>
    }

    /**
     * Returns a new JSON field definition for a {@code boolean} value.
     *
     * @param pointer a character sequence consisting of either a single JSON key or a slash delimited hierarchy of JSON
     * keys aka JSON pointer.
     * @param markers an optional array of markers which add user defined semantics to the defined JSON field.
     * @return the new JSON field definition.
     * @throws NullPointerException if {@code pointer} is {@code null}.
     * @throws IllegalArgumentException if {@code pointer} is empty.
     * @see JsonFactory#newBooleanFieldDefinition(CharSequence, JsonFieldMarker...)
     */
    static JsonFieldDefinition&lt;Boolean&gt; ofBoolean(final CharSequence pointer,
            final JsonFieldMarker ... markers) {

<span class="nc" id="L140">        return JsonFactory.newBooleanFieldDefinition(pointer, markers);</span>
    }

    /**
     * Returns a new JSON field definition for a {@link JsonObject} value.
     *
     * @param pointer a character sequence consisting of either a single JSON key or a slash delimited hierarchy of JSON
     * keys aka JSON pointer.
     * @param markers an optional array of markers which add user defined semantics to the defined JSON field.
     * @return the new JSON field definition.
     * @throws NullPointerException if {@code pointer} is {@code null}.
     * @throws IllegalArgumentException if {@code pointer} is empty.
     * @see JsonFactory#newJsonObjectFieldDefinition(CharSequence, JsonFieldMarker...)
     */
    static JsonFieldDefinition&lt;JsonObject&gt; ofJsonObject(final CharSequence pointer,
            final JsonFieldMarker ... markers) {

<span class="nc" id="L157">        return JsonFactory.newJsonObjectFieldDefinition(pointer, markers);</span>
    }

    /**
     * Returns a new JSON field definition for a {@link JsonArray} value.
     *
     * @param pointer a character sequence consisting of either a single JSON key or a slash delimited hierarchy of JSON
     * keys aka JSON pointer.
     * @param markers an optional array of markers which add user defined semantics to the defined JSON field.
     * @return the new JSON field definition.
     * @throws NullPointerException if {@code pointer} is {@code null}.
     * @throws IllegalArgumentException if {@code pointer} is empty.
     * @see JsonFactory#newJsonArrayFieldDefinition(CharSequence, JsonFieldMarker...)
     */
    static JsonFieldDefinition&lt;JsonArray&gt; ofJsonArray(final CharSequence pointer,
            final JsonFieldMarker ... markers) {

<span class="nc" id="L174">        return JsonFactory.newJsonArrayFieldDefinition(pointer, markers);</span>
    }

    /**
     * Returns a new JSON field definition for a {@link JsonValue} value.
     *
     * @param pointer a character sequence consisting of either a single JSON key or a slash delimited hierarchy of JSON
     * keys aka JSON pointer.
     * @param markers an optional array of markers which add user defined semantics to the defined JSON field.
     * @return the new JSON field definition.
     * @throws NullPointerException if {@code pointer} is {@code null}.
     * @throws IllegalArgumentException if {@code pointer} is empty.
     * @see JsonFactory#newJsonValueFieldDefinition(CharSequence, JsonFieldMarker...)
     */
    static JsonFieldDefinition&lt;JsonValue&gt; ofJsonValue(final CharSequence pointer,
            final JsonFieldMarker ... markers) {

<span class="nc" id="L191">        return JsonFactory.newJsonValueFieldDefinition(pointer, markers);</span>
    }

    /**
     * Returns the JSON pointer which refers to this field.
     *
     * @return the JSON pointer to this field.
     */
    JsonPointer getPointer();

    /**
     * Returns the type of the value of this field.
     *
     * @return the value type of this field.
     */
    Class&lt;T&gt; getValueType();

    /**
     * Returns an unordered and unmodifiable set of markers which provide this field with semantics, e. g. schema
     * version number.
     *
     * @return the markers of this field or an empty set.
     */
    Set&lt;JsonFieldMarker&gt; getMarkers();

    /**
     * Indicates whether this definition is marked with at least all specified markers.
     *
     * @param fieldMarker the mandatory fieldMarker to check this definition for.
     * @param furtherFieldMarkers additional markers to check this definition for.
     * @return true if this definition is marked with at least all specified markers, {@code false} else.
     * @throws NullPointerException if any argument is {@code null}.
     */
    boolean isMarkedAs(JsonFieldMarker fieldMarker, JsonFieldMarker... furtherFieldMarkers);

    /**
     * Maps the specified JsonValue to the value type of this field definition. If the JsonValue cannot be mapped a
     * {@link JsonParseException} is thrown.
     *
     * @param jsonValue the JsonValue to be mapped.
     * @return the JsonValue as the Java type of this field definition.
     * @throws NullPointerException if {@code jsonValue} is {@code null}.
     * @throws JsonParseException if {@code jsonValue} does not represent this definition's expected Java type.
     * @see #getValueType()
     */
    @Nullable
    T mapValue(JsonValue jsonValue);

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.0.201801022044</span></div></body></html>