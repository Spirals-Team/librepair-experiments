!function(a,b){a("*").hover(function(){a(this).data(b,1)},function(){a(this).data(b,0)}).data(b,0),a[b]=function(c){return a(c)[b]()},a.fn[b]=function(c){return c=0,a(this).each(function(){c+=a(this).data(b)}),c>0}}(jQuery,"isHovered"),function(a){a.jMenu={defaults:{ulWidth:"auto",absoluteTop:30,absoluteLeft:0,TimeBeforeOpening:100,TimeBeforeClosing:100,animatedText:!1,paddingLeft:7,openClick:!1,effects:{effectSpeedOpen:150,effectSpeedClose:150,effectTypeOpen:"fade",effectTypeClose:"hide",effectOpen:"linear",effectClose:"linear"}},init:function(b){opts=a.extend({},a.jMenu.defaults,b),a(".jMenu a:not(.fNiv)").each(function(){var b=a(this);a.jMenu._IsParent(b)&&b.addClass("isParent"),opts.animatedText&&a.jMenu._animateText(b),b.bind(opts.openClick?{click:function(){a.jMenu._hide(b),a.jMenu._showNextChild(b)}}:{mouseover:function(){a.jMenu._hide(b),a.jMenu._showNextChild(b)}})}),a(".jMenu li a.fNiv").bind(opts.openClick?{click:function(b){b.preventDefault();var c=a(this),d=c.next();ULWidth=a.jMenu._returnUlWidth(c),a.jMenu._closeList(a(".jMenu ul")),d.is(":hidden")&&a.jMenu._showFirstChild(c)}}:{mouseover:function(){var b=a(this),c=b.next();c.length>0&&0==c.is(":hidden")||(ULWidth=a.jMenu._returnUlWidth(b),a.jMenu._closeList(a(".jMenu ul")),c.is(":hidden")&&a.jMenu._showFirstChild(b))}}),a(".jMenu").bind({mouseleave:function(){setTimeout(function(){a.jMenu._closeAll()},opts.TimeBeforeClosing)}})},_showFirstChild:function(b){if(!a.jMenu._IsParent(b))return!1;var c=b.next();if(c.is(":hidden")){var d=b.position();c.css({top:d.top+opts.absoluteTop,left:d.left+opts.absoluteLeft,width:ULWidth}).children().css({width:ULWidth}),a.jMenu._show(c)}},_showNextChild:function(b){if(!a.jMenu._IsParent(b))return!1;var c=b.next();if(c.is(":hidden")){var d=b.position();c.css({top:d.top,left:d.left+ULWidth,width:ULWidth}).children().css({width:ULWidth}),a.jMenu._show(c)}},_hide:function(b){if(a.jMenu._IsParent(b)&&!b.next().is(":hidden"))a.jMenu._closeList(b.next());else{if(!(a.jMenu._IsParent(b)&&b.next().is(":hidden")||!a.jMenu._IsParent(b)))return!1;a.jMenu._closeList(b.parent().parent().find("ul"))}},_show:function(a){switch(opts.effects.effectTypeOpen){case"slide":a.stop(!0,!0).delay(opts.TimeBeforeOpening).slideDown(opts.effects.effectSpeedOpen,opts.effects.effectOpen);break;case"fade":a.stop(!0,!0).delay(opts.TimeBeforeOpening).fadeIn(opts.effects.effectSpeedOpen,opts.effects.effectOpen);break;default:a.stop(!0,!0).delay(opts.TimeBeforeOpening).show()}},_closeList:function(a){switch(opts.effects.effectTypeClose){case"slide":a.stop(!0,!0).slideUp(opts.effects.effectSpeedClose,opts.effects.effectClose);break;case"fade":a.stop(!0,!0).fadeOut(opts.effects.effectSpeedClose,opts.effects.effectClose);break;default:a.hide()}},_closeAll:function(){a(".jMenu").isHovered()||a(".jMenu ul").each(function(){a.jMenu._closeList(a(this))})},_IsParent:function(a){return a.next().is("ul")?!0:!1},_returnUlWidth:function(a){switch(opts.ulWidth){case"auto":ULWidth=parseInt(a.outerWidth(!0));break;default:ULWidth=parseInt(opts.ulWidth)}return ULWidth},_animateText:function(b){var c=parseInt(b.css("padding-left"));b.hover(function(){a(this).stop(!0,!0).animate({paddingLeft:c+opts.paddingLeft},100)},function(){a(this).stop(!0,!0).animate({paddingLeft:c},100)})},_isReadable:function(){return a("a.fNiv").length>0?!0:!1},_error:function(){alert("Please, check you have the '.fNiv' class on your first level links.")}},jQuery.fn.jMenu=function(b){a(this).addClass("jMenu"),a(this).children("li").children("a").addClass("fNiv"),a.jMenu._isReadable()?a.jMenu.init(b):a.jMenu._error()}}(jQuery);