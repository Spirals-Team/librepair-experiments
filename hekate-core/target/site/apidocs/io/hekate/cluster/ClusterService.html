<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_121) on Fri May 25 13:21:41 CEST 2018 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>ClusterService (Hekate 2.4.0-SNAPSHOT)</title>
<meta name="date" content="2018-05-25">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ClusterService (Hekate 2.4.0-SNAPSHOT)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<link rel="stylesheet" href="../../../highlight/styles/idea.css">                         <link rel="stylesheet" href="../../../jquery/jquery-ui.structure.min.css">                         <link rel="stylesheet" href="../../../jquery/jquery-ui.min.css">                         <link rel="stylesheet" href="../../../jquery/jquery-ui.theme.min.css">                         <link rel="stylesheet" href="../../../style.css">                         <script src="../../../highlight/highlight.pack.js"></script>                         <script src="../../../jquery/jquery.min.js"></script>                         <script src="../../../jquery/jquery-ui.min.js"></script>                         <script>                             hljs.initHighlightingOnLoad();                              $( function() {                                 $(".tabs").tabs();                              });                         </script>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ClusterService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../io/hekate/cluster/ClusterNodeRuntime.html" title="interface in io.hekate.cluster"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../io/hekate/cluster/ClusterServiceFactory.html" title="class in io.hekate.cluster"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?io/hekate/cluster/ClusterService.html" target="_top">Frames</a></li>
<li><a href="ClusterService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">io.hekate.cluster</div>
<h2 title="Interface ClusterService" class="title">Interface ClusterService</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../../io/hekate/cluster/ClusterFilterSupport.html" title="interface in io.hekate.cluster">ClusterFilterSupport</a>&lt;<a href="../../../io/hekate/cluster/ClusterView.html" title="interface in io.hekate.cluster">ClusterView</a>&gt;, <a href="../../../io/hekate/cluster/ClusterTopologySupport.html" title="interface in io.hekate.cluster">ClusterTopologySupport</a>, <a href="../../../io/hekate/cluster/ClusterView.html" title="interface in io.hekate.cluster">ClusterView</a>, <a href="../../../io/hekate/core/service/Service.html" title="interface in io.hekate.core.service">Service</a></dd>
</dl>
<hr>
<br>
<pre><a href="../../../io/hekate/core/service/DefaultServiceFactory.html" title="annotation in io.hekate.core.service">@DefaultServiceFactory</a>(<a href="../../../io/hekate/core/service/DefaultServiceFactory.html#value--">value</a>=<a href="../../../io/hekate/cluster/ClusterServiceFactory.html" title="class in io.hekate.cluster">ClusterServiceFactory.class</a>)
public interface <span class="typeNameLabel">ClusterService</span>
extends <a href="../../../io/hekate/core/service/Service.html" title="interface in io.hekate.core.service">Service</a>, <a href="../../../io/hekate/cluster/ClusterView.html" title="interface in io.hekate.cluster">ClusterView</a></pre>
<div class="block"><span class="startHere">&laquo; start here</span>Main entry point to clustering API.

 <h2>Overview</h2>
 <p>
 Cluster service provides functionality for getting information about the cluster members and keeping track of membership changes.
 It uses an eventually consistent <a href="#gossip_protocol">gossip</a>-based protocol for changes propagation among the cluster nodes.
 Eventual consistency in this context means that node join/leave events are not atomic and can be processed by different
 members at different time. However it is guaranteed that at some point in time all nodes within the cluster will receive such events
 and will become aware of cluster topology changes. The time it takes to propagate such events to all cluster members depend on the
 cluster service configuration options.
 </p>

 <h2>Service configuration</h2>
 <p>
 <a href="../../../io/hekate/cluster/ClusterService.html" title="interface in io.hekate.cluster"><code>ClusterService</code></a> can be configured and registered within the <a href="../../../io/hekate/core/HekateBootstrap.html" title="class in io.hekate.core"><code>HekateBootstrap</code></a> via the <a href="../../../io/hekate/cluster/ClusterServiceFactory.html" title="class in io.hekate.cluster"><code>ClusterServiceFactory</code></a> class as
 in the example below:
 </p>

 <div class="tabs">
 <ul>
 <li><a href="#configure-java">Java</a></li>
 <li><a href="#configure-xsd">Spring XSD</a></li>
 <li><a href="#configure-bean">Spring bean</a></li>
 </ul>
 <div id="configure-java">
<div class="doc_source">
<pre><code class="java">
// Prepare service factory and configure some options.
ClusterServiceFactory factory = new ClusterServiceFactory()
    .withGossipInterval(1000)
    .withSeedNodeProvider(new MulticastSeedNodeProvider(
        new MulticastSeedNodeProviderConfig()
            .withGroup("224.1.2.12")
            .withPort(45454)
            .withInterval(200)
            .withWaitTime(1000)
    ))
    .withFailureDetector(new DefaultFailureDetector(
        new DefaultFailureDetectorConfig()
            .withHeartbeatInterval(500)
            .withHeartbeatLossThreshold(6)
            .withFailureDetectionQuorum(2)
    ));

// ...other options...

// Start node.
Hekate hekate = new HekateBootstrap()
    .withService(factory)
    .join();
</code></pre>
</div>
 </div>
 <div id="configure-xsd">
 <b>Note:</b> This example requires Spring Framework integration
 (see <a href="../../../io/hekate/spring/bean/HekateSpringBootstrap.html">HekateSpringBootstrap</a>).
<div class="doc_source">
<pre><code class="xml">
&lt;beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:h="http://www.hekate.io/spring/hekate-core"
    xmlns="http://www.springframework.org/schema/beans"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.hekate.io/spring/hekate-core
        http://www.hekate.io/spring/hekate-core.xsd"&gt;

    &lt;h:node id="hekate"&gt;
        &lt;!-- Cluster service. --&gt;
        &lt;h:cluster gossip-interval-ms="1000"&gt;
            &lt;h:seed-node-provider&gt;
                &lt;h:multicast group="224.1.2.12" port="45454" interval-ms="200" wait-time-ms="1000" ttl="3"/&gt;
            &lt;/h:seed-node-provider&gt;
            &lt;h:failure-detection&gt;
                &lt;h:heartbeat interval-ms="500" loss-threshold="6" quorum="2"/&gt;
            &lt;/h:failure-detection&gt;

            &lt;!-- ...other options... --&gt;
        &lt;/h:cluster&gt;

        &lt;!-- ...other services... --&gt;
    &lt;/h:node&gt;
&lt;/beans&gt;
</code></pre>
</div>
 </div>
 <div id="configure-bean">
 <b>Note:</b> This example requires Spring Framework integration
 (see <a href="../../../io/hekate/spring/bean/HekateSpringBootstrap.html">HekateSpringBootstrap</a>).
<div class="doc_source">
<pre><code class="xml">
&lt;beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://www.springframework.org/schema/beans"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;

    &lt;bean id="hekate" class="io.hekate.spring.bean.HekateSpringBootstrap"&gt;
        &lt;property name="services"&gt;
            &lt;list&gt;
                &lt;!-- Cluster service. --&gt;
                &lt;bean class="io.hekate.cluster.ClusterServiceFactory"&gt;
                    &lt;property name="gossipInterval" value="1000"/&gt;
                    &lt;property name="seedNodeProvider"&gt;
                        &lt;bean class="io.hekate.cluster.seed.multicast.MulticastSeedNodeProvider"&gt;
                            &lt;constructor-arg&gt;
                                &lt;bean class="io.hekate.cluster.seed.multicast.MulticastSeedNodeProviderConfig"&gt;
                                    &lt;property name="group" value="224.1.2.12"/&gt;
                                    &lt;property name="port" value="45454"/&gt;
                                    &lt;property name="interval" value="200"/&gt;
                                    &lt;property name="waitTime" value="1000"/&gt;
                                    &lt;property name="ttl" value="2"/&gt;
                                &lt;/bean&gt;
                            &lt;/constructor-arg&gt;
                        &lt;/bean&gt;
                    &lt;/property&gt;
                    &lt;property name="failureDetector"&gt;
                        &lt;bean class="io.hekate.cluster.health.DefaultFailureDetector"&gt;
                            &lt;constructor-arg&gt;
                                &lt;bean class="io.hekate.cluster.health.DefaultFailureDetectorConfig"&gt;
                                    &lt;property name="heartbeatInterval" value="500"/&gt;
                                    &lt;property name="heartbeatLossThreshold" value="6"/&gt;
                                    &lt;property name="failureDetectionQuorum" value="2"/&gt;
                                &lt;/bean&gt;
                            &lt;/constructor-arg&gt;
                        &lt;/bean&gt;
                    &lt;/property&gt;

                    &lt;!-- ...other options... --&gt;
                &lt;/bean&gt;

                &lt;!-- ...other services... --&gt;
            &lt;/list&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
&lt;/beans&gt;
</code></pre>
</div>
 </div>
 </div>

 <p>
 Key configuration options that are available in <a href="../../../io/hekate/cluster/ClusterServiceFactory.html" title="class in io.hekate.cluster"><code>ClusterServiceFactory</code></a> are:
 </p>

 <ul>
 <li><a href="#seed_nodes">Seed node provider</a></li>
 <li><a href="#failure_detection">Failure detector</a></li>
 <li><a href="#gossip_protocol">Gossip protocol options</a></li>
 <li><a href="#split_brain_detector">Split-brain detector</a></li>
 <li><a href="#acceptors">Cluster acceptors</a></li>
 </ul>

 <h2>Accessing service</h2>
 <p>
 Instances of <a href="../../../io/hekate/cluster/ClusterService.html" title="interface in io.hekate.cluster"><code>ClusterService</code></a> can be obtained via <a href="../../../io/hekate/core/Hekate.html#cluster--"><code>Hekate.cluster()</code></a> method as in the example below:
<div class="doc_source">
<pre><code class="java">
ClusterService cluster = hekate.cluster();
</code></pre>
</div>
 </p>

 <h2>Cluster topology</h2>
 <p>
 Cluster membership information (aka cluster topology) is represented by the <a href="../../../io/hekate/cluster/ClusterTopology.html" title="interface in io.hekate.cluster"><code>ClusterTopology</code></a> interface. Instances of this
 interface can be obtained via <a href="../../../io/hekate/cluster/ClusterService.html#topology--"><code>topology()</code></a> method. This interface provides various methods for getting information about the
 cluster nodes based on different criteria (f.e. remote nodes, oldest/youngest node, join order, etc).
 </p>

 <p>
 Each node in the cluster topology is represented by the <a href="../../../io/hekate/cluster/ClusterNode.html" title="interface in io.hekate.cluster"><code>ClusterNode</code></a> interface. This interface provides information about the
 node's <a href="../../../io/hekate/cluster/ClusterNode.html#address--"><code>network address</code></a>, <a href="../../../io/hekate/cluster/ClusterNode.html#services--"><code>provided services</code></a>, <a href="../../../io/hekate/cluster/ClusterNode.html#roles--"><code>roles</code></a> and <a href="../../../io/hekate/cluster/ClusterNode.html#properties--"><code>user-defined properties</code></a>.
 </p>

 <p>
 Below is the example of accessing the current cluster topology:
<div class="doc_source">
<pre><code class="java">
// Immutable snapshot of the current cluster topology.
ClusterTopology topology = hekate.cluster().topology();

System.out.println("   Local node: " + topology.localNode());
System.out.println("    All nodes: " + topology.nodes());
System.out.println(" Remote nodes: " + topology.remoteNodes());
System.out.println("   Join order: " + topology.joinOrder());
System.out.println("  Oldest node: " + topology.oldest());
System.out.println("Youngest node: " + topology.youngest());
</code></pre>
</div>
 </p>

 <p>
 Filtering can be applied to <a href="../../../io/hekate/cluster/ClusterTopology.html" title="interface in io.hekate.cluster"><code>ClusterTopology</code></a> by providing an implementation of <a href="../../../io/hekate/cluster/ClusterNodeFilter.html" title="interface in io.hekate.cluster"><code>ClusterNodeFilter</code></a> interface as in
 the example below:
<div class="doc_source">
<pre><code class="java">
// Immutable copy that contains only nodes with the specified role.
ClusterTopology filtered = topology.filter(node -&gt; node.hasRole("my_role"));
</code></pre>
</div>
 </p>

 <p>
 Cluster service supports topology versioning by managing a counter that gets incremented every time whenever nodes join or leave the
 cluster. Value of this counter can be obtained via <a href="../../../io/hekate/cluster/ClusterTopology.html#version--"><code>ClusterTopology.version()</code></a> method and can be used to distinguish which
 topology instance is older and which one is newer.
 </p>

 <p>
 Please note that <b>topology versioning is local to each node</b> and can differ from node to node (i.e. each node maintains its own
 counter).
 </p>

 <h2>Cluster events</h2>
 <p>
 Listening for cluster events can be implemented by registering an instance of <a href="../../../io/hekate/cluster/event/ClusterEventListener.html" title="interface in io.hekate.cluster.event"><code>ClusterEventListener</code></a> interface. This can be done
 at <a href="../../../io/hekate/cluster/ClusterServiceFactory.html#withClusterListener-io.hekate.cluster.event.ClusterEventListener-"><code>configuration time</code></a> or at <a href="../../../io/hekate/cluster/ClusterService.html#addListener-io.hekate.cluster.event.ClusterEventListener-"><code>runtime</code></a>. The key difference between those two methods is that listeners that were added at
 configuration time will be kept registered across multiple restarts while listeners that were added at runtime will be kept registered
 only while node stays in the cluster and will be automatically unregistered when node <a href="../../../io/hekate/core/Hekate.html#leave--"><code>leaves</code></a> the cluster.
 </p>

 <p>
 Listeners are notified when local node joins the cluster, leaves the cluster or if cluster service detects membership changes.
 Multiple concurrent changes are aggregated by the cluster service into a single <a href="../../../io/hekate/cluster/event/ClusterEvent.html" title="interface in io.hekate.cluster.event"><code>ClusterEvent</code></a>, i.e. if multiple nodes joined or
 left at the same time then only a single event will be fired holding all the information about all of those nodes and their
 state.
 </p>

 <p>
 Below is the example of registering a cluster event listener:
<div class="doc_source">
<pre><code class="java">
hekate.cluster().addListener(event -&gt; {
    switch (event.type()) {
        case JOIN: {
            ClusterJoinEvent join = event.asJoin();

            System.out.println("Joined : " + join.topology());

            break;
        }
        case CHANGE: {
            ClusterChangeEvent change = event.asChange();

            System.out.println("Topology change :" + change.topology());
            System.out.println("      added nodes=" + change.added());
            System.out.println("    removed nodes=" + change.removed());

            break;
        }
        case LEAVE: {
            ClusterLeaveEvent leave = event.asLeave();

            System.out.println("Left : " + leave.topology());

            break;
        }
        default: {
            throw new IllegalArgumentException("Unsupported event type: " + event);
        }
    }
});
</code></pre>
</div>
 </p>

 <p>For more details of cluster events processing please see the documentation of <a href="../../../io/hekate/cluster/event/ClusterEventListener.html" title="interface in io.hekate.cluster.event"><code>ClusterEventListener</code></a> interface.</p>

 <a name="seed_nodes"></a>
 <h2>Seed nodes discovery</h2>
 <p>
 Whenever local node starts joining the cluster it tries to discover nodes that are already running. If none of such nodes could be
 found then local node assumes that it is the first node in the cluster and switches to <a href="../../../io/hekate/core/Hekate.State.html#UP"><code>UP</code></a> state. If some
 existing nodes could be discovered then local node chooses one of them as a contact node and starts cluster join negotiations
 with that node.
 </p>

 <p>
 Cluster service uses the <a href="../../../io/hekate/cluster/seed/SeedNodeProvider.html" title="interface in io.hekate.cluster.seed"><code>SeedNodeProvider</code></a> interface for the purpose of existing nodes discovery. Instances of this interface can
 be registered via <a href="../../../io/hekate/cluster/ClusterServiceFactory.html#setSeedNodeProvider-io.hekate.cluster.seed.SeedNodeProvider-"><code>ClusterServiceFactory.setSeedNodeProvider(SeedNodeProvider)</code></a> method.
 </p>

 <p>
 The following implementations of this interface are available out of the box:
 </p>
 <ul>
 <li><a href="../../../io/hekate/cluster/seed/multicast/MulticastSeedNodeProvider.html" title="class in io.hekate.cluster.seed.multicast"><code>MulticastSeedNodeProvider</code></a> - uses <a href="https://en.wikipedia.org/wiki/IP_multicast" target="_blank">IP multicasting</a>
 for periodic sending of discovery messages and listening for responses from existing nodes</li>
 <li><a href="../../../io/hekate/cluster/seed/jdbc/JdbcSeedNodeProvider.html" title="class in io.hekate.cluster.seed.jdbc"><code>JdbcSeedNodeProvider</code></a> - uses a shared RDBMS table as a central repository of running nodes</li>
 <li><a href="../../../io/hekate/cluster/seed/fs/FsSeedNodeProvider.html" title="class in io.hekate.cluster.seed.fs"><code>FsSeedNodeProvider</code></a> - uses a shared file system folder as a central repository of running nodes</li>
 <li><a href="../../../io/hekate/cluster/seed/StaticSeedNodeProvider.html" title="class in io.hekate.cluster.seed"><code>StaticSeedNodeProvider</code></a> - uses a pre-configured list of network addresses</li>
 </ul>

 <p>Please see the documentation of <a href="../../../io/hekate/cluster/seed/SeedNodeProvider.html" title="interface in io.hekate.cluster.seed"><code>SeedNodeProvider</code></a> for more details on providing custom implementations of this interface.</p>

 <a name="failure_detection"></a>
 <h2>Failure detection</h2>
 <p>
 Cluster service relies on <a href="../../../io/hekate/cluster/health/FailureDetector.html" title="interface in io.hekate.cluster.health"><code>FailureDetector</code></a> interface for node failure detection. Implementations of this interface are typically
 using a heartbeat-based approach for failure detection, however other algorithms can also be implemented.
 </p>

 <p>
 Failure detector can be specified via <a href="../../../io/hekate/cluster/ClusterServiceFactory.html#setFailureDetector-io.hekate.cluster.health.FailureDetector-"><code>ClusterServiceFactory.setFailureDetector(FailureDetector)</code></a> method.
 </p>

 <p>
 Default implementation of this interface is provided by the <a href="../../../io/hekate/cluster/health/DefaultFailureDetector.html" title="class in io.hekate.cluster.health"><code>DefaultFailureDetector</code></a> class. This class organizes all nodes into a
 monitoring ring with fixed heartbeat interval and loss threshold. Please see its javadoc for implementation details and configuration
 options.
 </p>

 <p>
 Please see the documentation of <a href="../../../io/hekate/cluster/health/FailureDetector.html" title="interface in io.hekate.cluster.health"><code>FailureDetector</code></a> interface for more details on implementing  custom failure detection logic.
 </p>

 <a name="gossip_protocol"></a>
 <h2>Gossip protocol</h2>
 <p>
 Cluster service uses a push-pull <a href="https://en.wikipedia.org/wiki/Gossip_protocol" target="_blank">gossip protocol</a> for
 membership state management. At high level this protocol can be described as follows:
 </p>

 <p>
 Time to time (based on the configurable interval) each node in the cluster sends a message with its membership information to a
 number of randomly selected nodes. Every node that receives such a message compares it with its local membership state information.
 If the received information is more up to date then node updates its local membership view. If local information is more up to date then
 it is sent back to the originator node (so that it could update its local view with the latest one).
 </p>

 <p>
 Note that when cluster is in convergent state (i.e. membership view is consistent across all cluster nodes) then nodes do not send the
 whole membership information over the network. In such cases only small membership digests are exchanged.
 </p>

 <p>
 Cluster service supports the concept of speeding up the gossip protocol by using a reactive approach instead of the periodic approach
 during the membership information exchange. With reactive approach when particular node receives a membership exchange message it
 immediately forwards such message to a node that haven't seen this membership information yet. Such approach helps to achieve the
 cluster convergence much faster than with periodic approach, however it requires a much higher network resources utilization.
 </p>

 <p>
 Key configuration options of gossip protocol are:
 </p>
 <ul>
 <li><a href="../../../io/hekate/cluster/ClusterServiceFactory.html#setGossipInterval-long-"><code>Gossip interval</code></a> - time interval in milliseconds between gossip rounds</li>
 <li><a href="../../../io/hekate/cluster/ClusterServiceFactory.html#setSpeedUpGossipSize-int-"><code>Speed up size</code></a> - the maximum amount of nodes in the cluster when gossip
 protocol can be speeded up by using the reactive approach during messages exchange</li>
 </ul>

 <a name="split_brain_detector"></a>
 <h2>Split-brain detection</h2>
 <p>
 Cluster service can be configured to automatically detect and perform appropriate actions in case if
 <a href="https://en.wikipedia.org/wiki/Split-brain_(computing)"target="_blank">split-brain</a> problem arises. Detection is controlled
 by an implementation of <a href="../../../io/hekate/cluster/split/SplitBrainDetector.html" title="interface in io.hekate.cluster.split"><code>SplitBrainDetector</code></a> interface that can be registered within the cluster service via <a href="../../../io/hekate/cluster/ClusterServiceFactory.html#setSplitBrainDetector-io.hekate.cluster.split.SplitBrainDetector-"><code>ClusterServiceFactory.setSplitBrainDetector(SplitBrainDetector)</code></a> method.
 </p>

 <p>
 The following implementations of this interface are available out of the box:
 </p>
 <ul>
 <li><a href="../../../io/hekate/cluster/split/AddressReachabilityDetector.html" title="class in io.hekate.cluster.split"><code>AddressReachabilityDetector</code></a> - checks connectivity with a pre-configured socket address</li>
 <li><a href="../../../io/hekate/cluster/split/HostReachabilityDetector.html" title="class in io.hekate.cluster.split"><code>HostReachabilityDetector</code></a> - detector that checks reachability of a pre-configured host address</li>
 <li><a href="../../../io/hekate/cluster/split/JdbcConnectivityDetector.html" title="class in io.hekate.cluster.split"><code>JdbcConnectivityDetector</code></a> - detector that checks reachability of a JDBC database</li>
 </ul>

 <p>
 Multiple detectors can be combined with the help of <a href="../../../io/hekate/cluster/split/SplitBrainDetectorGroup.html" title="class in io.hekate.cluster.split"><code>SplitBrainDetectorGroup</code></a> class.
 </p>

 <p>
 Actions that should be performed by the cluster service in case of split-brain problem is controlled by the <a href="../../../io/hekate/cluster/split/SplitBrainAction.html" title="enum in io.hekate.cluster.split"><code>SplitBrainAction</code></a>
 enumeration that can be configured via <a href="../../../io/hekate/cluster/ClusterServiceFactory.html#setSplitBrainAction-io.hekate.cluster.split.SplitBrainAction-"><code>ClusterServiceFactory.setSplitBrainAction(SplitBrainAction)</code></a> method. Please see the
 documentation of <a href="../../../io/hekate/cluster/split/SplitBrainAction.html" title="enum in io.hekate.cluster.split"><code>SplitBrainAction</code></a> for details about the available options.
 </p>

 <a name="acceptors"></a>
 <h2>Cluster acceptors</h2>
 <p>
 Whenever a new node tries joins the cluster it can be verified based on some custom application-specific rules (f.e. authorization and
 permissions checking) and rejected in case of a verification failure.
 </p>

 <p>
 Such verification can be implemented by <a href="../../../io/hekate/cluster/ClusterServiceFactory.html#setAcceptors-java.util.List-"><code>configuring</code></a> an implementation of
 <a href="../../../io/hekate/cluster/ClusterAcceptor.html" title="interface in io.hekate.cluster"><code>ClusterAcceptor</code></a> interface within the cluster service. This interface is used by an existing cluster node when a join
 request is received from a new node that tries to join the cluster. Implementation of this interface can use the joining node
 information in order to decide whether the new node should be accepted or it should be rejected. If node gets rejected then it will fail
 with <a href="../../../io/hekate/cluster/ClusterJoinRejectedException.html" title="class in io.hekate.cluster"><code>ClusterJoinRejectedException</code></a>.
 </p>

 <p>
 Please see the documentation of <a href="../../../io/hekate/cluster/ClusterAcceptor.html" title="interface in io.hekate.cluster"><code>ClusterAcceptor</code></a> interface for mode details.
 </p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../io/hekate/cluster/ClusterService.html#addListener-io.hekate.cluster.event.ClusterEventListener-">addListener</a></span>(<a href="../../../io/hekate/cluster/event/ClusterEventListener.html" title="interface in io.hekate.cluster.event">ClusterEventListener</a>&nbsp;listener)</code>
<div class="block">Registers the cluster event listener.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../io/hekate/cluster/ClusterService.html#addListener-io.hekate.cluster.event.ClusterEventListener-io.hekate.cluster.event.ClusterEventType...-">addListener</a></span>(<a href="../../../io/hekate/cluster/event/ClusterEventListener.html" title="interface in io.hekate.cluster.event">ClusterEventListener</a>&nbsp;listener,
           <a href="../../../io/hekate/cluster/event/ClusterEventType.html" title="enum in io.hekate.cluster.event">ClusterEventType</a>...&nbsp;eventTypes)</code>
<div class="block">Registers the cluster event listener that will be notified only on events of the specified event types.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../io/hekate/cluster/ClusterService.html#clusterName--">clusterName</a></span>()</code>
<div class="block">Returns the cluster name.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../io/hekate/cluster/ClusterTopology.html" title="interface in io.hekate.cluster">ClusterTopology</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../io/hekate/cluster/ClusterService.html#futureOf-java.util.function.Predicate-">futureOf</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/util/function/Predicate.html?is-external=true" title="class or interface in java.util.function">Predicate</a>&lt;<a href="../../../io/hekate/cluster/ClusterTopology.html" title="interface in io.hekate.cluster">ClusterTopology</a>&gt;&nbsp;predicate)</code>
<div class="block">Returns a future object that will be completed once the cluster topology matches the specified predicate.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../io/hekate/cluster/ClusterNode.html" title="interface in io.hekate.cluster">ClusterNode</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../io/hekate/cluster/ClusterService.html#localNode--">localNode</a></span>()</code>
<div class="block">Returns the local cluster node.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../io/hekate/cluster/ClusterService.html#removeListener-io.hekate.cluster.event.ClusterEventListener-">removeListener</a></span>(<a href="../../../io/hekate/cluster/event/ClusterEventListener.html" title="interface in io.hekate.cluster.event">ClusterEventListener</a>&nbsp;listener)</code>
<div class="block">Unregisters the cluster event listener.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../../../io/hekate/cluster/ClusterTopology.html" title="interface in io.hekate.cluster">ClusterTopology</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../io/hekate/cluster/ClusterService.html#topology--">topology</a></span>()</code>
<div class="block">Returns the cluster topology.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.io.hekate.cluster.ClusterView">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;io.hekate.cluster.<a href="../../../io/hekate/cluster/ClusterView.html" title="interface in io.hekate.cluster">ClusterView</a></h3>
<code><a href="../../../io/hekate/cluster/ClusterView.html#awaitFor-java.util.function.Predicate-">awaitFor</a>, <a href="../../../io/hekate/cluster/ClusterView.html#awaitFor-java.util.function.Predicate-long-java.util.concurrent.TimeUnit-">awaitFor</a>, <a href="../../../io/hekate/cluster/ClusterView.html#awaitForNodes--">awaitForNodes</a>, <a href="../../../io/hekate/cluster/ClusterView.html#awaitForNodes-long-java.util.concurrent.TimeUnit-">awaitForNodes</a>, <a href="../../../io/hekate/cluster/ClusterView.html#forEach-java.util.function.Consumer-">forEach</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.io.hekate.cluster.ClusterFilterSupport">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;io.hekate.cluster.<a href="../../../io/hekate/cluster/ClusterFilterSupport.html" title="interface in io.hekate.cluster">ClusterFilterSupport</a></h3>
<code><a href="../../../io/hekate/cluster/ClusterFilterSupport.html#filter-io.hekate.cluster.ClusterNodeFilter-">filter</a>, <a href="../../../io/hekate/cluster/ClusterFilterSupport.html#filterAll-io.hekate.cluster.ClusterFilter-">filterAll</a>, <a href="../../../io/hekate/cluster/ClusterFilterSupport.html#forNode-io.hekate.cluster.ClusterNode-">forNode</a>, <a href="../../../io/hekate/cluster/ClusterFilterSupport.html#forNode-io.hekate.cluster.ClusterNodeId-">forNode</a>, <a href="../../../io/hekate/cluster/ClusterFilterSupport.html#forOldest--">forOldest</a>, <a href="../../../io/hekate/cluster/ClusterFilterSupport.html#forProperty-java.lang.String-">forProperty</a>, <a href="../../../io/hekate/cluster/ClusterFilterSupport.html#forProperty-java.lang.String-java.lang.String-">forProperty</a>, <a href="../../../io/hekate/cluster/ClusterFilterSupport.html#forRemotes--">forRemotes</a>, <a href="../../../io/hekate/cluster/ClusterFilterSupport.html#forRole-java.lang.String-">forRole</a>, <a href="../../../io/hekate/cluster/ClusterFilterSupport.html#forService-java.lang.Class-">forService</a>, <a href="../../../io/hekate/cluster/ClusterFilterSupport.html#forYoungest--">forYoungest</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="clusterName--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clusterName</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;clusterName()</pre>
<div class="block">Returns the cluster name.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Cluster name.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../io/hekate/core/HekateBootstrap.html#setClusterName-java.lang.String-"><code>HekateBootstrap.setClusterName(String)</code></a></dd>
</dl>
</li>
</ul>
<a name="localNode--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>localNode</h4>
<pre><a href="../../../io/hekate/cluster/ClusterNode.html" title="interface in io.hekate.cluster">ClusterNode</a>&nbsp;localNode()</pre>
<div class="block">Returns the local cluster node.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Local cluster node.</dd>
</dl>
</li>
</ul>
<a name="topology--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>topology</h4>
<pre><a href="../../../io/hekate/cluster/ClusterTopology.html" title="interface in io.hekate.cluster">ClusterTopology</a>&nbsp;topology()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../io/hekate/cluster/ClusterTopologySupport.html#topology--">ClusterTopologySupport</a></code></span></div>
<div class="block">Returns the cluster topology.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../io/hekate/cluster/ClusterTopologySupport.html#topology--">topology</a></code>&nbsp;in interface&nbsp;<code><a href="../../../io/hekate/cluster/ClusterTopologySupport.html" title="interface in io.hekate.cluster">ClusterTopologySupport</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Cluster topology.</dd>
</dl>
</li>
</ul>
<a name="addListener-io.hekate.cluster.event.ClusterEventListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addListener</h4>
<pre>void&nbsp;addListener(<a href="../../../io/hekate/cluster/event/ClusterEventListener.html" title="interface in io.hekate.cluster.event">ClusterEventListener</a>&nbsp;listener)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../io/hekate/cluster/ClusterView.html#addListener-io.hekate.cluster.event.ClusterEventListener-">ClusterView</a></code></span></div>
<div class="block">Registers the cluster event listener.

 <p>
 Please see <a href="../../../io/hekate/cluster/event/ClusterEventListener.html" title="interface in io.hekate.cluster.event"><code>ClusterEventListener</code></a> javadocs for more details about cluster events handling.
 </p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../io/hekate/cluster/ClusterView.html#addListener-io.hekate.cluster.event.ClusterEventListener-">addListener</a></code>&nbsp;in interface&nbsp;<code><a href="../../../io/hekate/cluster/ClusterView.html" title="interface in io.hekate.cluster">ClusterView</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>listener</code> - Listener.</dd>
</dl>
</li>
</ul>
<a name="addListener-io.hekate.cluster.event.ClusterEventListener-io.hekate.cluster.event.ClusterEventType...-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addListener</h4>
<pre>void&nbsp;addListener(<a href="../../../io/hekate/cluster/event/ClusterEventListener.html" title="interface in io.hekate.cluster.event">ClusterEventListener</a>&nbsp;listener,
                 <a href="../../../io/hekate/cluster/event/ClusterEventType.html" title="enum in io.hekate.cluster.event">ClusterEventType</a>...&nbsp;eventTypes)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../io/hekate/cluster/ClusterView.html#addListener-io.hekate.cluster.event.ClusterEventListener-io.hekate.cluster.event.ClusterEventType...-">ClusterView</a></code></span></div>
<div class="block">Registers the cluster event listener that will be notified only on events of the specified event types.

 <p>
 Please see <a href="../../../io/hekate/cluster/event/ClusterEventListener.html" title="interface in io.hekate.cluster.event"><code>ClusterEventListener</code></a> javadocs for more details about cluster events handling.
 </p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../io/hekate/cluster/ClusterView.html#addListener-io.hekate.cluster.event.ClusterEventListener-io.hekate.cluster.event.ClusterEventType...-">addListener</a></code>&nbsp;in interface&nbsp;<code><a href="../../../io/hekate/cluster/ClusterView.html" title="interface in io.hekate.cluster">ClusterView</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>listener</code> - Listener.</dd>
<dd><code>eventTypes</code> - Types of cluster events that this listener should be notified on.</dd>
</dl>
</li>
</ul>
<a name="removeListener-io.hekate.cluster.event.ClusterEventListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeListener</h4>
<pre>void&nbsp;removeListener(<a href="../../../io/hekate/cluster/event/ClusterEventListener.html" title="interface in io.hekate.cluster.event">ClusterEventListener</a>&nbsp;listener)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../io/hekate/cluster/ClusterView.html#removeListener-io.hekate.cluster.event.ClusterEventListener-">ClusterView</a></code></span></div>
<div class="block">Unregisters the cluster event listener.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../io/hekate/cluster/ClusterView.html#removeListener-io.hekate.cluster.event.ClusterEventListener-">removeListener</a></code>&nbsp;in interface&nbsp;<code><a href="../../../io/hekate/cluster/ClusterView.html" title="interface in io.hekate.cluster">ClusterView</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>listener</code> - Listener.</dd>
</dl>
</li>
</ul>
<a name="futureOf-java.util.function.Predicate-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>futureOf</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../io/hekate/cluster/ClusterTopology.html" title="interface in io.hekate.cluster">ClusterTopology</a>&gt;&nbsp;futureOf(<a href="http://docs.oracle.com/javase/8/docs/api/java/util/function/Predicate.html?is-external=true" title="class or interface in java.util.function">Predicate</a>&lt;<a href="../../../io/hekate/cluster/ClusterTopology.html" title="interface in io.hekate.cluster">ClusterTopology</a>&gt;&nbsp;predicate)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../io/hekate/cluster/ClusterView.html#futureOf-java.util.function.Predicate-">ClusterView</a></code></span></div>
<div class="block">Returns a future object that will be completed once the cluster topology matches the specified predicate. If this cluster node
 leaves the cluster before the specified condition is met then the future object will be <a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true#cancel-boolean-" title="class or interface in java.util.concurrent"><code>cancelled</code></a>.

 <p>
 <b>Important:</b> Future object can be completed on the same thread that performs cluster events processing and hence all of its
 associated <a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true" title="class or interface in java.util.concurrent"><code>CompletionStage</code></a>s will be notified on the same thread. If completion stage contains some long running computations
 then please consider moving them to an asynchronous completion stage
 (f.e. <a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true#whenCompleteAsync-java.util.function.BiConsumer-java.util.concurrent.Executor-" title="class or interface in java.util.concurrent"><code>CompletableFuture.whenCompleteAsync(BiConsumer, Executor)</code></a>).
 </p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../io/hekate/cluster/ClusterView.html#futureOf-java.util.function.Predicate-">futureOf</a></code>&nbsp;in interface&nbsp;<code><a href="../../../io/hekate/cluster/ClusterView.html" title="interface in io.hekate.cluster">ClusterView</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>predicate</code> - Topology predicate.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Topology future.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ClusterService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../io/hekate/cluster/ClusterNodeRuntime.html" title="interface in io.hekate.cluster"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../io/hekate/cluster/ClusterServiceFactory.html" title="class in io.hekate.cluster"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?io/hekate/cluster/ClusterService.html" target="_top">Frames</a></li>
<li><a href="ClusterService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2018 <a href="http://hekate.io/">The Hekate Project</a>. All rights reserved.</small></p>
</body>
</html>
