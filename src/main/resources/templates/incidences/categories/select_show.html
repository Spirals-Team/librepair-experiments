<!DOCTYPE html>
<html lang="en">
<head th:replace="fragments/head"/>
<body>
<nav th:replace="fragments/nav"/>

<div class="container">
  <h2>Todas las categorias</h2>
  <p>Existen las siguientes categorias:</p>                                                                                      
  <div class="table-responsive">          
  <table class="table table-hover" th:fragment="tableCategorys" id="tableCategorys">
    <thead>
      <tr>
        <th>Categoria</th>
		<th class="col-md-1"> </th>
      </tr>
    </thead>
	<tbody>
	  <tr th:each="category : ${categorys}">
	    <td th:text="${category.name}">Categoria1</td>
	    <td> 
 			<button type="button" th:id="${'categoryButton' + category.id}"
 				class="btn btn-info">Ver incidencias</button>
 				<script th:inline="javascript">
 				/*<![CDATA[*/
 		 		$("#categoryButton[[${category.id}]]").click(function() {
 		 			  var urlUpdate = '/incidences/categories/show/[[${category.id}]]';
					  $("#tableIncidences").load(urlUpdate);
 		 		});
 		 		/*]]>*/
 				</script> 
	    </td>
	  </tr>
	</tbody>
  </table>
  </div>

                                                                                     
  <div class="table-responsive" th:fragment="tableIncidences" id="tableIncidences">
  
  <h2 th:text="${'Incidencias de la categoría: ' + selectCategory.name}">Incidencias de la categoría: xxxxx</h2>
       
  <table class="table table-hover">
  	    	
    	<thead>    
      <tr>
        <th>Nombre</th>
        <th>Descripcion</th>
        <th>Estado</th>
        <th>¿Peligrosa?</th>
        <th>Comentarios del operario</th>
		<th class="col-md-1"> </th>
		<th class="col-md-1"> </th>
		<th class="col-md-1"> </th>
		<th class="col-md-1"> </th>
      </tr>
    </thead>
	<tbody>
	  <tr th:each="incidence : ${incidencesOfCategory}">
	   <td th:text="${incidence.name}"> Incidencia1</td>
	    <td th:text="${incidence.description}">Descripcion</td>
	    <td th:text="${incidence.status}">Estado1</td>
	    <td th:text="${incidence.dangerous}">true</td> 
	   	<td th:text="${incidence.operatorComments}">Comentarios</td>
	  </tr>
	</tbody>
    
  </table>
  </div>
  
</div>

<footer th:replace="fragments/footer"/>
</body>
</html>