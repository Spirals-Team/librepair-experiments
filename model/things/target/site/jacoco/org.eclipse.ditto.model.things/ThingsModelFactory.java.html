<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ThingsModelFactory.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Eclipse Ditto :: Model :: Things</a> &gt; <a href="index.source.html" class="el_package">org.eclipse.ditto.model.things</a> &gt; <span class="el_source">ThingsModelFactory.java</span></div><h1>ThingsModelFactory.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2017 Bosch Software Innovations GmbH.
 *
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v2.0
 * which accompanies this distribution, and is available at
 * https://www.eclipse.org/org/documents/epl-2.0/index.php
 *
 * Contributors:
 *    Bosch Software Innovations GmbH - initial contribution
 */
package org.eclipse.ditto.model.things;

import static org.eclipse.ditto.model.base.common.ConditionChecker.checkNotNull;

import java.text.MessageFormat;
import java.util.Collection;
import java.util.Objects;
import java.util.Optional;
import java.util.Set;
import java.util.stream.Collectors;

import javax.annotation.Nullable;
import javax.annotation.concurrent.Immutable;

import org.eclipse.ditto.json.JsonArray;
import org.eclipse.ditto.json.JsonFactory;
import org.eclipse.ditto.json.JsonObject;
import org.eclipse.ditto.json.JsonParseException;
import org.eclipse.ditto.json.JsonValue;
import org.eclipse.ditto.model.base.auth.AuthorizationSubject;
import org.eclipse.ditto.model.base.exceptions.DittoJsonException;
import org.eclipse.ditto.model.base.json.JsonSchemaVersion;

/**
 * Factory that creates new {@code things} objects.
 */
@Immutable
public final class ThingsModelFactory {

    /*
     * Inhibit instantiation of this utility class.
     */
<span class="nc" id="L44">    private ThingsModelFactory() {</span>
<span class="nc" id="L45">        throw new AssertionError();</span>
    }

    /**
     * Returns a new immutable empty {@link Attributes}.
     *
     * @return the new immutable empty {@code Attributes}.
     */
    public static Attributes emptyAttributes() {
<span class="fc" id="L54">        return AttributesModelFactory.emptyAttributes();</span>
    }

    /**
     * Returns a new immutable {@link Attributes} which represents {@code null}.
     *
     * @return the new {@code null}-like {@code Attributes}.
     */
    public static Attributes nullAttributes() {
<span class="fc" id="L63">        return AttributesModelFactory.nullAttributes();</span>
    }

    /**
     * Returns a new immutable {@link Attributes} which is initialised with the values of the given JSON object.
     *
     * @param jsonObject provides the initial values of the result.
     * @return the new immutable initialised {@code Attributes}.
     * @throws NullPointerException if {@code jsonObject} is {@code null}.
     */
    public static Attributes newAttributes(final JsonObject jsonObject) {
<span class="fc" id="L74">        return AttributesModelFactory.newAttributes(jsonObject);</span>
    }

    /**
     * Returns a new immutable {@link Attributes} which is initialised with the values of the given JSON string. This
     * string is required to be a valid {@link JsonObject}.
     *
     * @param jsonString provides the initial values of the result;
     * @return the new immutable initialised {@code Attributes}.
     * @throws DittoJsonException if {@code jsonString} cannot be parsed to {@code Attributes}.
     */
    public static Attributes newAttributes(final String jsonString) {
<span class="fc" id="L86">        return AttributesModelFactory.newAttributes(jsonString);</span>
    }

    /**
     * Returns a new empty builder for a {@link Attributes}.
     *
     * @return the builder.
     */
    public static AttributesBuilder newAttributesBuilder() {
<span class="fc" id="L95">        return AttributesModelFactory.newAttributesBuilder();</span>
    }

    /**
     * Returns a new builder for a {@link Attributes} which is initialised with the values of the given JSON object.
     *
     * @param jsonObject provides the initial values of the result.
     * @return the builder.
     * @throws NullPointerException if {@code jsonObject} is {@code null}.
     */
    public static AttributesBuilder newAttributesBuilder(final JsonObject jsonObject) {
<span class="nc" id="L106">        return AttributesModelFactory.newAttributesBuilder(jsonObject);</span>
    }

    /**
     * Returns an immutable instance of {@link FeatureDefinition.Identifier}.
     *
     * @param namespace the namespace of the returned Identifier.
     * @param name the name of the returned Identifier.
     * @param version the version of the returned Identifier.
     * @return the instance.
     * @throws NullPointerException if any argument is {@code null}.
     * @throws IllegalArgumentException if any argument is empty.
     */
    public static FeatureDefinition.Identifier newFeatureDefinitionIdentifier(final CharSequence namespace,
            final CharSequence name, final CharSequence version) {

<span class="nc" id="L122">        return ImmutableFeatureDefinitionIdentifier.getInstance(namespace, name, version);</span>
    }

    /**
     * Parses the specified CharSequence and returns an immutable instance of {@link FeatureDefinition.Identifier}.
     *
     * @param featureIdentifierAsCharSequence CharSequence-representation of a FeatureDefinition Identifier.
     * @return the instance.
     * @throws NullPointerException if {@code featureIdentifierAsCharSequence} is {@code null}.
     * @throws FeatureDefinitionIdentifierInvalidException if {@code featureIdentifierAsCharSequence} is invalid.
     */
    public static FeatureDefinition.Identifier newFeatureDefinitionIdentifier(
            final CharSequence featureIdentifierAsCharSequence) {

<span class="fc bfc" id="L136" title="All 2 branches covered.">        if (featureIdentifierAsCharSequence instanceof FeatureDefinition.Identifier) {</span>
<span class="fc" id="L137">            return (FeatureDefinition.Identifier) featureIdentifierAsCharSequence;</span>
        }
<span class="fc" id="L139">        return ImmutableFeatureDefinitionIdentifier.ofParsed(featureIdentifierAsCharSequence);</span>
    }

    /**
     * Parses the specified JsonArray and returns an immutable instance of {@code FeatureDefinition} which is
     * initialised with the values of the given JSON array.
     *
     * @param jsonArray JSON array containing the identifiers of the FeatureDefinition to be returned. Non-string values
     * are ignored.
     * @return the instance.
     * @throws NullPointerException if {@code jsonArray} is {@code null}.
     * @throws FeatureDefinitionEmptyException if {@code jsonArray} is empty.
     * @throws FeatureDefinitionIdentifierInvalidException if any Identifier string of the array is invalid.
     */
    public static FeatureDefinition newFeatureDefinition(final JsonArray jsonArray) {
<span class="fc" id="L154">        checkNotNull(jsonArray, &quot;JSON array&quot;);</span>
<span class="pc bpc" id="L155" title="1 of 2 branches missed.">        if (!jsonArray.isNull()) {</span>
<span class="fc" id="L156">            return ImmutableFeatureDefinition.fromJson(jsonArray);</span>
        }
<span class="nc" id="L158">        return nullFeatureDefinition();</span>
    }

    /**
     * Returns a new immutable {@link FeatureDefinition} which is initialised with the values of the given JSON string.
     * This string is required to be a valid {@link JsonArray}.
     *
     * @param jsonString provides the initial values of the result;
     * @return the new immutable initialised {@code FeatureDefinition}.
     * @throws DittoJsonException if {@code jsonString} cannot be parsed to {@code FeatureDefinition}.
     * @throws FeatureDefinitionEmptyException if the JSON array is empty.
     * @throws FeatureDefinitionIdentifierInvalidException if any Identifier of the JSON array is invalid.
     */
    public static FeatureDefinition newFeatureDefinition(final String jsonString) {
<span class="fc" id="L172">        final JsonArray jsonArray =</span>
<span class="fc" id="L173">                DittoJsonException.wrapJsonRuntimeException(() -&gt; JsonFactory.newArray(jsonString));</span>

<span class="nc" id="L175">        return newFeatureDefinition(jsonArray);</span>
    }

    /**
     * Returns a new immutable {@link FeatureDefinition} which represents {@code null}.
     *
     * @return the new {@code null}-like {@code FeatureDefinition}.
     */
    public static FeatureDefinition nullFeatureDefinition() {
<span class="nc" id="L184">        return NullFeatureDefinition.getInstance();</span>
    }

    /**
     * Parses the specified CharSequence and returns a mutable builder with a fluent API for an immutable {@code
     * FeatureDefinition}. The returned builder is initialised with the parsed Identifier as its first one.
     *
     * @param firstIdentifier CharSequence-representation of the first FeatureDefinition Identifier.
     * @return the instance.
     * @throws NullPointerException if {@code firstIdentifier} is {@code null}.
     * @throws FeatureDefinitionIdentifierInvalidException if {@code firstIdentifier} is invalid.
     */
    public static FeatureDefinitionBuilder newFeatureDefinitionBuilder(final CharSequence firstIdentifier) {
<span class="fc" id="L197">        return ImmutableFeatureDefinition.getBuilder(newFeatureDefinitionIdentifier(firstIdentifier));</span>
    }

    /**
     * Returns a new builder for an immutable {@link FeatureDefinition} which is initialised with the values of the
     * given JSON array.
     *
     * @param jsonArray provides the initial values of the result.
     * @return the builder.
     * @throws NullPointerException if {@code jsonArray} is {@code null}.
     * @throws FeatureDefinitionIdentifierInvalidException if any Identifier of the array is invalid.
     */
    public static FeatureDefinitionBuilder newFeatureDefinitionBuilder(final JsonArray jsonArray) {
<span class="nc" id="L210">        return ImmutableFeatureDefinition.Builder.getInstance().addAll(newFeatureDefinition(jsonArray));</span>
    }

    /**
     * Returns a new immutable empty {@link FeatureProperties}.
     *
     * @return the new immutable empty {@code FeatureProperties}.
     */
    public static FeatureProperties emptyFeatureProperties() {
<span class="fc" id="L219">        return ImmutableFeatureProperties.empty();</span>
    }

    /**
     * Returns a new immutable {@link FeatureProperties} which represents {@code null}.
     *
     * @return the new {@code null}-like {@code FeatureProperties}.
     */
    public static FeatureProperties nullFeatureProperties() {
<span class="fc" id="L228">        return NullFeatureProperties.newInstance();</span>
    }

    /**
     * Returns a new immutable {@link FeatureProperties} which is initialised with the values of the given JSON object.
     *
     * @param jsonObject provides the initial values of the result.
     * @return the new immutable initialised {@code FeatureProperties}.
     * @throws NullPointerException if {@code jsonObject} is {@code null}.
     */
    public static FeatureProperties newFeatureProperties(final JsonObject jsonObject) {
<span class="fc" id="L239">        checkNotNull(jsonObject, &quot;JSON object for initialization&quot;);</span>

<span class="fc bfc" id="L241" title="All 2 branches covered.">        if (!jsonObject.isNull()) {</span>
<span class="fc" id="L242">            return ImmutableFeatureProperties.of(jsonObject);</span>
        } else {
<span class="fc" id="L244">            return nullFeatureProperties();</span>
        }
    }

    /**
     * Returns a new immutable {@link FeatureProperties} which is initialised with the values of the given JSON string.
     * This string is required to be a valid {@link JsonObject}.
     *
     * @param jsonString provides the initial values of the result;
     * @return the new immutable initialised {@code FeatureProperties}.
     * @throws DittoJsonException if {@code jsonString} cannot be parsed to {@code FeatureProperties}.
     */
    public static FeatureProperties newFeatureProperties(final String jsonString) {
<span class="nc" id="L257">        final JsonObject jsonObject =</span>
<span class="nc" id="L258">                DittoJsonException.wrapJsonRuntimeException(() -&gt; JsonFactory.newObject(jsonString));</span>
<span class="nc" id="L259">        return newFeatureProperties(jsonObject);</span>
    }

    /**
     * Returns a new empty builder for an immutable {@link FeatureProperties}.
     *
     * @return the builder.
     */
    public static FeaturePropertiesBuilder newFeaturePropertiesBuilder() {
<span class="fc" id="L268">        return ImmutableFeaturePropertiesBuilder.empty();</span>
    }

    /**
     * Returns a new builder for an immutable {@link FeatureProperties} which is initialised with the values of the
     * given JSON object.
     *
     * @param jsonObject provides the initial values of the result.
     * @return the builder.
     * @throws NullPointerException if {@code jsonObject} is {@code null}.
     */
    public static FeaturePropertiesBuilder newFeaturePropertiesBuilder(final JsonObject jsonObject) {
<span class="fc" id="L280">        return ImmutableFeaturePropertiesBuilder.of(jsonObject);</span>
    }

    /**
     * Returns a new immutable {@link Feature} which represents {@code null}.
     *
     * @param featureId the ID of the new Feature.
     * @return the new {@code null}-like {@code Feature}.
     * @throws NullPointerException if {@code featureId} is {@code null}.
     */
    public static Feature nullFeature(final String featureId) {
<span class="fc" id="L291">        return NullFeature.of(featureId);</span>
    }

    /**
     * Returns a new immutable {@link Feature} with the given ID.
     *
     * @param featureId the ID of the new Feature.
     * @return the new immutable {@code Feature}.
     * @throws NullPointerException if {@code featureId} is {@code null}.
     */
    public static Feature newFeature(final String featureId) {
<span class="fc" id="L302">        return ImmutableFeature.of(featureId);</span>
    }

    /**
     * Returns a new immutable {@link Feature} with the given ID and properties.
     *
     * @param featureId the ID of the new feature.
     * @param featureProperties the properties of the new Feature or {@code null}.
     * @return the new immutable {@code Feature}.
     * @throws NullPointerException if {@code featureId} is {@code null}.
     */
    public static Feature newFeature(final String featureId, @Nullable final FeatureProperties featureProperties) {
<span class="fc" id="L314">        return ImmutableFeature.of(featureId, featureProperties);</span>
    }

    /**
     * Returns a new immutable {@link Feature} with the given ID, properties and Definition.
     *
     * @param featureId the ID of the new feature.
     * @param featureDefinition the Definition of the new Feature or {@code null}.
     * @return the new immutable {@code Feature}.
     * @throws NullPointerException if {@code featureId} is {@code null}.
     */
    public static Feature newFeature(final String featureId, @Nullable final FeatureDefinition featureDefinition) {
<span class="fc" id="L326">        return ImmutableFeature.of(featureId, featureDefinition, null);</span>
    }

    /**
     * Returns a new immutable {@link Feature} with the given ID, properties and Definition.
     *
     * @param featureId the ID of the new feature.
     * @param featureDefinition the Definition of the new Feature or {@code null}.
     * @param featureProperties the properties of the new Feature or {@code null}.
     * @return the new immutable {@code Feature}.
     * @throws NullPointerException if {@code featureId} is {@code null}.
     */
    public static Feature newFeature(final String featureId, @Nullable final FeatureDefinition featureDefinition,
            @Nullable final FeatureProperties featureProperties) {

<span class="fc" id="L341">        return ImmutableFeature.of(featureId, featureDefinition, featureProperties);</span>
    }

    /**
     * Returns a new builder for an immutable {@link Feature} from scratch with a fluent API.
     *
     * @return the builder.
     */
    public static FeatureBuilder.FromScratchBuildable newFeatureBuilder() {
<span class="fc" id="L350">        return ImmutableFeatureFromScratchBuilder.newFeatureFromScratch();</span>
    }

    /**
     * Returns a new builder for an immutable {@link Feature} which is initialised with the values of the given Feature.
     *
     * @param feature provides the initial values for the result.
     * @return the builder.
     * @throws NullPointerException if {@code feature} is {@code null}.
     */
    public static FeatureBuilder.FromCopyBuildable newFeatureBuilder(final Feature feature) {
<span class="fc" id="L361">        return ImmutableFeatureFromCopyBuilder.of(feature);</span>
    }

    /**
     * Returns a new builder for an immutable {@link Feature} which is initialised with the values of the given JSON
     * object.
     *
     * @param jsonObject provides the initial values for the result.
     * @return the builder.
     * @throws NullPointerException if {@code jsonObject} is {@code null}.
     */
    public static FeatureBuilder.FromJsonBuildable newFeatureBuilder(final JsonObject jsonObject) {
<span class="nc" id="L373">        return ImmutableFeatureFromScratchBuilder.newFeatureFromJson(jsonObject);</span>
    }

    /**
     * Returns a new builder for an immutable {@link Feature} which is initialised with the values of the given JSON
     * string. The JSON string is parsed in a fault tolerant way. I. e. all properties which cannot be deserialized are
     * supposed to not exist.
     *
     * @param jsonString string the JSON string representation of a Feature.
     * @return the builder.
     * @throws DittoJsonException if {@code jsonString} cannot be parsed to {@code Feature}.
     * @see #newFeatureBuilder(JsonObject)
     */
    public static FeatureBuilder.FromJsonBuildable newFeatureBuilder(final String jsonString) {
<span class="nc" id="L387">        final JsonObject jsonObject =</span>
<span class="nc" id="L388">                DittoJsonException.wrapJsonRuntimeException(() -&gt; JsonFactory.newObject(jsonString));</span>
<span class="nc" id="L389">        return newFeatureBuilder(jsonObject);</span>
    }

    /**
     * Returns a new immutable empty {@link Features}.
     *
     * @return the new immutable empty {@code Features}.
     */
    public static Features emptyFeatures() {
<span class="fc" id="L398">        return ImmutableFeatures.empty();</span>
    }

    /**
     * Returns a new immutable {@link Features} which represents {@code null}.
     *
     * @return the new {@code null}-like {@code Features}.
     */
    public static Features nullFeatures() {
<span class="fc" id="L407">        return NullFeatures.newInstance();</span>
    }

    /**
     * Returns a new immutable {@link Features} which is initialised with the features of the given Iterable.
     *
     * @param features the features to initialise the result with.
     * @return the new immutable {@code Features} which is initialised with {@code features}.
     * @throws NullPointerException if {@code features} is {@code null}.
     */
    public static Features newFeatures(final Iterable&lt;Feature&gt; features) {
<span class="nc" id="L418">        return ImmutableFeatures.of(features);</span>
    }

    /**
     * Returns a new immutable {@link Features} based on the given JSON object.
     *
     * @param jsonObject provides the initial values for the result.
     * @return the new immutable {@code Features} which is initialised by the data of {@code jsonObject}.
     * @throws NullPointerException if {@code jsonObject} is {@code null}.
     * @throws DittoJsonException if any JSON field which is supposed to represent a Feature is not a JSON object.
     */
    public static Features newFeatures(final JsonObject jsonObject) {
<span class="fc" id="L430">        checkNotNull(jsonObject, &quot;Features JSON object&quot;);</span>

        final Features result;

<span class="fc bfc" id="L434" title="All 2 branches covered.">        if (!jsonObject.isNull()) {</span>
<span class="fc" id="L435">            final Set&lt;Feature&gt; features = jsonObject.stream()</span>
<span class="pc bpc" id="L436" title="1 of 2 branches missed.">                    .filter(field -&gt; !Objects.equals(field.getKey(), JsonSchemaVersion.getJsonKey()))</span>
<span class="fc" id="L437">                    .peek(field -&gt; {</span>
<span class="fc bfc" id="L438" title="All 2 branches covered.">                        if (!(field.getValue().isObject())) {</span>
<span class="fc" id="L439">                            final String errorMsgTemplate =</span>
                                    &quot;The Feature value is not an object for Feature with ID ''{0}'': {1}&quot;;
<span class="fc" id="L441">                            final String errorMsg =</span>
<span class="fc" id="L442">                                    MessageFormat.format(errorMsgTemplate, field.getKey(), field.getValue());</span>
<span class="fc" id="L443">                            throw new DittoJsonException(new JsonParseException(errorMsg));</span>
                        }
<span class="fc" id="L445">                    })</span>
<span class="fc" id="L446">                    .map(field -&gt; ImmutableFeatureFromScratchBuilder.newFeatureFromJson(field.getValue().asObject())</span>
<span class="fc" id="L447">                            .useId(field.getKeyName())</span>
<span class="fc" id="L448">                            .build())</span>
<span class="fc" id="L449">                    .collect(Collectors.toSet());</span>

<span class="fc" id="L451">            result = ImmutableFeatures.of(features);</span>
<span class="fc" id="L452">        } else {</span>
<span class="fc" id="L453">            result = nullFeatures();</span>
        }

<span class="fc" id="L456">        return result;</span>
    }

    /**
     * Returns a new immutable {@link Features} based on the given JSON string.
     *
     * @param jsonString provides the initial values of the result.
     * @return the new immutable initialised {@code Features}.
     * @throws DittoJsonException if {@code jsonString} cannot be parsed to {@code Features}.
     */
    public static Features newFeatures(final String jsonString) {
<span class="fc" id="L467">        final JsonObject featuresJsonObject =</span>
<span class="fc" id="L468">                DittoJsonException.wrapJsonRuntimeException(() -&gt; JsonFactory.newObject(jsonString));</span>
<span class="fc" id="L469">        return newFeatures(featuresJsonObject);</span>
    }

    /**
     * Returns a new immutable {@link Features} which is initialised with the given features.
     *
     * @param feature the initial Feature of the result.
     * @param additionalFeatures additional features of the result.
     * @return the new immutable {@code Features} which is initialised with {@code feature} and potentially with {@code
     * additionalFeatures}.
     * @throws NullPointerException if any argument is {@code null}.
     */
    public static Features newFeatures(final Feature feature, final Feature... additionalFeatures) {
<span class="fc" id="L482">        return ImmutableFeatures.of(feature, additionalFeatures);</span>
    }

    /**
     * Returns a new mutable builder with a fluent API for an immutable {@link Features}.
     *
     * @return the builder.
     */
    public static FeaturesBuilder newFeaturesBuilder() {
<span class="fc" id="L491">        return ImmutableFeaturesBuilder.newInstance();</span>
    }

    /**
     * Returns a new mutable builder with a fluent API for an immutable {@link Features}. The builder is initialised
     * with the given features.
     *
     * @param features the initial features of the new builder.
     * @return the builder.
     * @throws NullPointerException if {@code features} is {@code null}.
     */
    public static FeaturesBuilder newFeaturesBuilder(final Iterable&lt;Feature&gt; features) {
<span class="fc" id="L503">        final FeaturesBuilder result = ImmutableFeaturesBuilder.newInstance();</span>
<span class="fc" id="L504">        result.setAll(features);</span>
<span class="fc" id="L505">        return result;</span>
    }

    /**
     * Returns a new immutable {@link ThingRevision} which is initialised with the given revision number.
     *
     * @param revisionNumber the {@code long} value of the revision.
     * @return the new immutable {@code ThingRevision}.
     */
    public static ThingRevision newThingRevision(final long revisionNumber) {
<span class="fc" id="L515">        return ImmutableThingRevision.of(revisionNumber);</span>
    }

    /**
     * Returns a new empty &lt;em&gt;mutable&lt;/em&gt; {@link Permissions}.
     *
     * @return the new {@code Permissions}.
     */
    public static Permissions noPermissions() {
<span class="fc" id="L524">        return AccessControlListModelFactory.noPermissions();</span>
    }

    /**
     * Returns a new &lt;em&gt;mutable&lt;/em&gt; {@link Permissions} containing all available permissions.
     *
     * @return the new {@code Permissions}.
     * @see Permission#values()
     */
    public static Permissions allPermissions() {
<span class="fc" id="L534">        return AccessControlListModelFactory.allPermissions();</span>
    }

    /**
     * Returns a new &lt;em&gt;mutable&lt;/em&gt; {@link Permissions} containing the given permissions.
     *
     * @param permissions the permissions to initialise the result with.
     * @return the new {@code Permissions}.
     * @throws NullPointerException if {@code permissions} is {@code null};
     */
    public static Permissions newPermissions(final Collection&lt;Permission&gt; permissions) {
<span class="nc" id="L545">        return AccessControlListModelFactory.newPermissions(permissions);</span>
    }

    /**
     * Returns a new &lt;em&gt;mutable&lt;/em&gt; {@link Permissions} containing the given permissions.
     *
     * @param permission the mandatory permission to be contained in the result.
     * @param furtherPermissions additional permissions to be contained in the result.
     * @return the new {@code Permissions}.
     * @throws NullPointerException if any argument is {@code null}.
     */
    public static Permissions newPermissions(final Permission permission, final Permission... furtherPermissions) {
<span class="fc" id="L557">        return AccessControlListModelFactory.newPermissions(permission, furtherPermissions);</span>
    }

    /**
     * Returns a new unmodifiable {@link Permissions} containing the given permissions.
     *
     * @param permission the mandatory permission to be contained in the result.
     * @param furtherPermissions additional permissions to be contained in the result.
     * @return the new {@code Permissions}.
     * @throws NullPointerException if any argument is {@code null}.
     */
    public static Permissions newUnmodifiablePermissions(final Permission permission,
            final Permission... furtherPermissions) {
<span class="fc" id="L570">        return AccessControlListModelFactory.newUnmodifiablePermissions(permission, furtherPermissions);</span>
    }

    /**
     * Returns a new immutable {@link AclEntry} with the given authorization subject and permissions.
     *
     * @param authorizationSubject the authorization subject of the new ACL entry.
     * @param permission the permission of the new ACL entry.
     * @param furtherPermissions additional permission of the new ACL entry.
     * @return the new ACL entry.
     * @throws NullPointerException if any argument is {@code null}.
     */
    public static AclEntry newAclEntry(final AuthorizationSubject authorizationSubject, final Permission permission,
            final Permission... furtherPermissions) {
<span class="fc" id="L584">        return AccessControlListModelFactory.newAclEntry(authorizationSubject, permission, furtherPermissions);</span>
    }

    /**
     * Returns a new immutable {@link AclEntry} with the given authorization subject and permissions.
     *
     * @param authorizationSubject the authorization subject of the new ACL entry.
     * @param permissions the permissions of the new ACL entry.
     * @return the new ACL entry.
     * @throws NullPointerException if any argument is {@code null}.
     */
    public static AclEntry newAclEntry(final AuthorizationSubject authorizationSubject,
            final Iterable&lt;Permission&gt; permissions) {
<span class="fc" id="L597">        return AccessControlListModelFactory.newAclEntry(authorizationSubject, permissions);</span>
    }

    /**
     * Returns a new immutable {@link AclEntry} based on the given JSON object.
     *
     * @param jsonObject provides the initial values for the result.
     * @return the new ACL entry.
     * @throws NullPointerException if {@code jsonObject} is {@code null}.
     * @throws DittoJsonException if {@code jsonObject} cannot be parsed.
     */
    public static AclEntry newAclEntry(final JsonObject jsonObject) {
<span class="nc" id="L609">        return AccessControlListModelFactory.newAclEntry(jsonObject);</span>
    }

    /**
     * Returns a new immutable {@link AclEntry} with the given authorization subject ID and the given JSON value
     * which provides the permissions.
     *
     * @param authorizationSubjectId the ID of the authorization subject of the new ACL entry.
     * @param permissionsValue a JSON value which represents the permissions of the authorization subject of the new ACL
     * entry. This value is supposed to be a JSON object.
     * @return the new ACL entry.
     * @throws NullPointerException if any argument is {@code null}.
     * @throws DittoJsonException if {@code permissionsValue} is not a JSON object.
     * @throws AclEntryInvalidException if {@code permissionsValue} does not contain a
     * {@code boolean} value for the required permissions.
     */
    public static AclEntry newAclEntry(final CharSequence authorizationSubjectId, final JsonValue permissionsValue) {
<span class="nc" id="L626">        return AccessControlListModelFactory.newAclEntry(authorizationSubjectId, permissionsValue);</span>
    }

    /**
     * Returns a mutable builder with a fluent API for an immutable {@link AccessControlList}.
     *
     * @return the new builder.
     */
    public static AccessControlListBuilder newAclBuilder() {
<span class="fc" id="L635">        return AccessControlListModelFactory.newAclBuilder();</span>
    }

    /**
     * Returns a mutable builder with a fluent API for an immutable {@link AccessControlList}. The builder is
     * initialised with the given ACL entries.
     *
     * @param aclEntries the initial entries of the new builder.
     * @return the new builder.
     * @throws NullPointerException if {@code aclEntries} is {@code null}.
     */
    public static AccessControlListBuilder newAclBuilder(final Iterable&lt;AclEntry&gt; aclEntries) {
<span class="fc" id="L647">        return AccessControlListModelFactory.newAclBuilder(aclEntries);</span>
    }

    /**
     * Returns a mutable builder with a fluent API for an immutable {@link AccessControlList}. The builder is
     * initialised with the given ACL entries.
     *
     * @param aclEntries the initial entries of the new builder.
     * @return the new builder.
     * @throws NullPointerException if {@code aclEntries} is {@code null}.
     */
    public static AccessControlListBuilder newAclBuilder(final Optional&lt;? extends Iterable&lt;AclEntry&gt;&gt; aclEntries) {
<span class="nc" id="L659">        return AccessControlListModelFactory.newAclBuilder(aclEntries);</span>
    }

    /**
     * Returns a new empty immutable {@link AccessControlList}.
     *
     * @return the new ACL.
     */
    public static AccessControlList emptyAcl() {
<span class="fc" id="L668">        return AccessControlListModelFactory.emptyAcl();</span>
    }

    /**
     * Returns a new immutable Access Control List (ACL) which is initialised with the specified entries.
     *
     * @param entry the mandatory entry of the ACL.
     * @param furtherEntries additional entries of the ACL.
     * @return the new initialised Access Control List.
     * @throws NullPointerException if any argument is {@code null}.
     */
    public static AccessControlList newAcl(final AclEntry entry, final AclEntry... furtherEntries) {
<span class="fc" id="L680">        return AccessControlListModelFactory.newAcl(entry, furtherEntries);</span>
    }

    /**
     * Returns a new immutable Access Control List (ACL) which is initialised with the specified entries.
     *
     * @param entries the entries of the ACL.
     * @return the new initialised Access Control List.
     * @throws NullPointerException if any argument is {@code null}.
     */
    public static AccessControlList newAcl(final Iterable&lt;AclEntry&gt; entries) {
<span class="nc" id="L691">        return AccessControlListModelFactory.newAcl(entries);</span>
    }

    /**
     * Returns a new immutable Access Control List (ACL) based on the given JSON object.
     *
     * @param jsonObject the JSON object representation of an ACL.
     * @return the new initialised {@code AccessControlList}.
     * @throws NullPointerException if {@code jsonObject} is {@code null}.
     * @throws DittoJsonException if {@code jsonObject} cannot be parsed to {@link AccessControlList}.
     */
    public static AccessControlList newAcl(final JsonObject jsonObject) {
<span class="fc" id="L703">        return AccessControlListModelFactory.newAcl(jsonObject);</span>
    }

    /**
     * Returns a new immutable Access Control List (ACL) based on the given JSON string.
     *
     * @param jsonString the JSON object representation of an ACL.
     * @return the new initialised {@code AccessControlList}.
     * @throws DittoJsonException if {@code jsonString} cannot be parsed to {@link AccessControlList}.
     */
    public static AccessControlList newAcl(final String jsonString) {
<span class="nc" id="L714">        return AccessControlListModelFactory.newAcl(jsonString);</span>
    }

    /**
     * Returns a new immutable {@link Thing} based on the given JSON object.
     *
     * @param jsonObject the JSON object representation of a Thing.
     * @return the new Thing.
     * @throws NullPointerException if {@code jsonObject} is {@code null}.
     * @throws DittoJsonException if {@code jsonObject} cannot be parsed to {@code Thing}.
     */
    public static Thing newThing(final JsonObject jsonObject) {
<span class="nc" id="L726">        return newThingBuilder(jsonObject).build();</span>
    }

    /**
     * Returns a new immutable {@link Thing} based on the given JSON string.
     *
     * @param jsonString the JSON string representation of a Thing.
     * @return the new Thing.
     * @throws NullPointerException if {@code jsonString} is {@code null}.
     * @throws DittoJsonException if {@code jsonString} cannot be parsed to {@code Thing}.
     */
    public static Thing newThing(final String jsonString) {
<span class="fc" id="L738">        final JsonObject jsonObject =</span>
<span class="fc" id="L739">                DittoJsonException.wrapJsonRuntimeException(() -&gt; JsonFactory.newObject(jsonString));</span>
<span class="fc" id="L740">        return newThingBuilder(jsonObject).build();</span>
    }

    /**
     * Returns a mutable builder with a fluent API for an immutable {@link Thing} from scratch.
     *
     * @return the new builder.
     */
    public static ThingBuilder.FromScratch newThingBuilder() {
<span class="fc" id="L749">        return ImmutableThingFromScratchBuilder.newInstance();</span>
    }

    /**
     * Returns a mutable builder with a fluent API for an immutable {@link Thing} based on the given JSON object. The
     * JSON object is parsed in a fault tolerant way. I. e. all properties which cannot be deserialized are supposed to
     * not exist.
     *
     * @param jsonObject the JSON object representation of a Thing.
     * @return the new builder.
     * @throws NullPointerException if {@code jsonObject} is {@code null}.
     * @throws DittoJsonException if {@code jsonObject} cannot be parsed to {@code Thing}.
     */
    public static ThingBuilder.FromCopy newThingBuilder(final JsonObject jsonObject) {
<span class="fc" id="L763">        return DittoJsonException.wrapJsonRuntimeException(() -&gt; ImmutableThingFromCopyBuilder.of(jsonObject));</span>
    }

    /**
     * Returns a mutable builder with a fluent API for an immutable {@link Thing} based on the given JSON string. The
     * JSON string is parsed in a fault tolerant way. I. e. all properties which cannot be deserialized are supposed to
     * not exist.
     *
     * @param jsonString string the JSON string representation of a Thing.
     * @return the new builder.
     * @throws DittoJsonException if {@code jsonString} cannot be parsed to {@code Thing}.
     * @see #newThingBuilder(JsonObject)
     */
    public static ThingBuilder.FromCopy newThingBuilder(final String jsonString) {
<span class="nc" id="L777">        final JsonObject jsonObject =</span>
<span class="nc" id="L778">                DittoJsonException.wrapJsonRuntimeException(() -&gt; JsonFactory.newObject(jsonString));</span>
<span class="nc" id="L779">        return newThingBuilder(jsonObject);</span>
    }

    /**
     * Returns a mutable builder with a fluent API for an immutable {@link Thing}. The builder is initialised with the
     * properties of the given Thing.
     *
     * @param thing the Thing which provides the initial properties of the builder.
     * @return the new builder.
     * @throws NullPointerException if {@code thing} is {@code null}.
     */
    public static ThingBuilder.FromCopy newThingBuilder(final Thing thing) {
<span class="fc" id="L791">        return ImmutableThingFromCopyBuilder.of(thing);</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.0.201801022044</span></div></body></html>