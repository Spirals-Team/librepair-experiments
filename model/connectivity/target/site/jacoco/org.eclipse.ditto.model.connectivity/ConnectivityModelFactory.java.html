<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ConnectivityModelFactory.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Eclipse Ditto :: Model :: Connectivity</a> &gt; <a href="index.source.html" class="el_package">org.eclipse.ditto.model.connectivity</a> &gt; <span class="el_source">ConnectivityModelFactory.java</span></div><h1>ConnectivityModelFactory.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2017 Bosch Software Innovations GmbH.
 *
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v2.0
 * which accompanies this distribution, and is available at
 * https://www.eclipse.org/org/documents/epl-2.0/index.php
 *
 * Contributors:
 *    Bosch Software Innovations GmbH - initial contribution
 */
package org.eclipse.ditto.model.connectivity;

import java.time.Instant;
import java.util.List;
import java.util.Map;
import java.util.Set;

import javax.annotation.Nullable;
import javax.annotation.concurrent.Immutable;

import org.eclipse.ditto.json.JsonObject;
import org.eclipse.ditto.model.base.auth.AuthorizationContext;

/**
 * Factory to create new {@link Connection} instances.
 */
@Immutable
public final class ConnectivityModelFactory {

<span class="nc" id="L31">    private ConnectivityModelFactory() {</span>
<span class="nc" id="L32">        throw new AssertionError();</span>
    }

    /**
     * Returns a new {@code ConnectionBuilder} with the required fields set.
     *
     * @param id the connection identifier.
     * @param connectionType the connection type.
     * @param connectionStatus the connection status.
     * @param uri the connection uri.
     * @param authorizationContext the connection authorization context.
     * @return the ConnectionBuilder.
     * @throws NullPointerException if any argument is {@code null}.
     */
    public static ConnectionBuilder newConnectionBuilder(final String id,
            final ConnectionType connectionType, final ConnectionStatus connectionStatus, final String uri,
            final AuthorizationContext authorizationContext) {
<span class="fc" id="L49">        return ImmutableConnectionBuilder.of(id, connectionType, connectionStatus, uri, authorizationContext);</span>
    }

    /**
     * Returns a mutable builder with a fluent API for an immutable {@link Connection}. The builder is initialised with the
     * values of the given Connection.
     *
     * @param connection the Connection which provides the initial values of the builder.
     * @return the new builder.
     * @throws NullPointerException if {@code connection} is {@code null}.
     */
    public static ConnectionBuilder newConnectionBuilder(final Connection connection) {
<span class="nc" id="L61">        return ImmutableConnectionBuilder.of(connection);</span>
    }

    /**
     * Creates a new {@code Connection} object from the specified JSON object.
     *
     * @param jsonObject a JSON object which provides the data for the Connection to be created.
     * @return a new Connection which is initialised with the extracted data from {@code jsonObject}.
     * @throws NullPointerException if {@code jsonObject} is {@code null}.
     * @throws org.eclipse.ditto.json.JsonParseException if {@code jsonObject} is not an appropriate JSON object.
     */
    public static Connection connectionFromJson(final JsonObject jsonObject) {
<span class="nc" id="L73">        return ImmutableConnection.fromJson(jsonObject);</span>
    }

    /**
     * Creates a new {@code ConnectionMetrics} object from the specified JSON object.
     *
     * @param jsonObject a JSON object which provides the data for the Connection to be created.
     * @return a new ConnectionMetrics which is initialised with the extracted data from {@code jsonObject}.
     * @throws NullPointerException if {@code jsonObject} is {@code null}.
     * @throws org.eclipse.ditto.json.JsonParseException if {@code jsonObject} is not an appropriate JSON object.
     */
    public static ConnectionMetrics connectionMetricsFromJson(final JsonObject jsonObject) {
<span class="nc" id="L85">        return ImmutableConnectionMetrics.fromJson(jsonObject);</span>
    }

    /**
     * Returns a new {@code ConnectionMetrics}.
     *
     * @param connectionStatus the ConnectionStatus of the metrics to create
     * @param connectionStatusDetails the optional details about the connection status
     * @param inConnectionStatusSince the instant since when the Client is in its current ConnectionStatus
     * @param clientState the current state of the Client performing the connection
     * @param sourcesMetrics the metrics of all sources of the Connection
     * @param targetsMetrics the metrics of all targets of the Connection
     * @return a new ConnectionMetrics which is initialised with the extracted data from {@code jsonObject}.
     * @throws NullPointerException if {@code connectionStatus} is {@code null}.
     */
    public static ConnectionMetrics newConnectionMetrics(final ConnectionStatus connectionStatus,
            final @Nullable String connectionStatusDetails, final Instant inConnectionStatusSince,
            final String clientState,
            final List&lt;SourceMetrics&gt; sourcesMetrics, final List&lt;TargetMetrics&gt; targetsMetrics) {
<span class="nc" id="L104">        return ImmutableConnectionMetrics.of(connectionStatus, connectionStatusDetails, inConnectionStatusSince,</span>
                clientState, sourcesMetrics, targetsMetrics);
    }

    /**
     * Returns a new {@code SourceMetrics}.
     *
     * @param addressMetrics the AddressMetrics of all addresses in the source
     * @param consumedMessages the amount of consumed messages
     * @return a new SourceMetrics which is initialised with the extracted data from {@code jsonObject}.
     * @throws NullPointerException if {@code connectionStatus} is {@code null}.
     */
    public static SourceMetrics newSourceMetrics(final Map&lt;String, AddressMetric&gt; addressMetrics,
            final long consumedMessages) {
<span class="nc" id="L118">        return ImmutableSourceMetrics.of(addressMetrics, consumedMessages);</span>
    }

    /**
     * Creates a new {@code SourceMetrics} object from the specified JSON object.
     *
     * @param jsonObject a JSON object which provides the data for the Connection to be created.
     * @return a new SourceMetrics which is initialised with the extracted data from {@code jsonObject}.
     * @throws NullPointerException if {@code jsonObject} is {@code null}.
     * @throws org.eclipse.ditto.json.JsonParseException if {@code jsonObject} is not an appropriate JSON object.
     */
    public static SourceMetrics sourceMetricsFromJson(final JsonObject jsonObject) {
<span class="nc" id="L130">        return ImmutableSourceMetrics.fromJson(jsonObject);</span>
    }

    /**
     * Returns a new {@code TargetMetrics}.
     *
     * @param addressMetrics the AddressMetrics of all addresses in the target
     * @param publishedMessages the amount of published messages
     * @return a new SourceMetrics which is initialised with the extracted data from {@code jsonObject}.
     * @throws NullPointerException if {@code connectionStatus} is {@code null}.
     */
    public static TargetMetrics newTargetMetrics(final Map&lt;String, AddressMetric&gt; addressMetrics,
            final long publishedMessages) {
<span class="nc" id="L143">        return ImmutableTargetMetrics.of(addressMetrics, publishedMessages);</span>
    }

    /**
     * Creates a new {@code TargetMetrics} object from the specified JSON object.
     *
     * @param jsonObject a JSON object which provides the data for the Connection to be created.
     * @return a new TargetMetrics which is initialised with the extracted data from {@code jsonObject}.
     * @throws NullPointerException if {@code jsonObject} is {@code null}.
     * @throws org.eclipse.ditto.json.JsonParseException if {@code jsonObject} is not an appropriate JSON object.
     */
    public static TargetMetrics targetMetricsFromJson(final JsonObject jsonObject) {
<span class="nc" id="L155">        return ImmutableTargetMetrics.fromJson(jsonObject);</span>
    }

    /**
     * Returns a new {@code AddressMetric}.
     *
     * @param status the ConnectionStatus of the source metrics to create
     * @param statusDetails the optional details about the connection status
     * @param messageCount the amount of totally consumed/published messages
     * @param lastMessageAt the timestamp when the last message was consumed/published
     * @return a new AddressMetric which is initialised with the extracted data from {@code jsonObject}.
     * @throws NullPointerException if any parameter is {@code null}.
     */
    public static AddressMetric newAddressMetric(final ConnectionStatus status, @Nullable final String statusDetails,
            final long messageCount, @Nullable final Instant lastMessageAt) {
<span class="nc" id="L170">        return ImmutableAddressMetric.of(status, statusDetails, messageCount, lastMessageAt);</span>
    }

    /**
     * Creates a new {@code AddressMetric} object from the specified JSON object.
     *
     * @param jsonObject a JSON object which provides the data for the Connection to be created.
     * @return a new AddressMetric which is initialised with the extracted data from {@code jsonObject}.
     * @throws NullPointerException if {@code jsonObject} is {@code null}.
     * @throws org.eclipse.ditto.json.JsonParseException if {@code jsonObject} is not an appropriate JSON object.
     */
    public static AddressMetric addressMetricFromJson(final JsonObject jsonObject) {
<span class="nc" id="L182">        return ImmutableAddressMetric.fromJson(jsonObject);</span>
    }

    /**
     * Returns a new {@code MappingContext}.
     *
     * @return the created MappingContext.
     * @throws NullPointerException if any argument is {@code null}.
     */
    public static MappingContext newMappingContext(final String mappingEngine, final Map&lt;String, String&gt; options) {
<span class="fc" id="L192">        return ImmutableMappingContext.of(mappingEngine, options);</span>
    }

    /**
     * Creates a new {@code MappingContext} object from the specified JSON object.
     *
     * @param jsonObject a JSON object which provides the data for the MappingContext to be created.
     * @return a new MappingContext which is initialised with the extracted data from {@code jsonObject}.
     * @throws NullPointerException if {@code jsonObject} is {@code null}.
     * @throws org.eclipse.ditto.json.JsonParseException if {@code jsonObject} is not an appropriate JSON object.
     */
    public static MappingContext mappingContextFromJson(final JsonObject jsonObject) {
<span class="fc" id="L204">        return ImmutableMappingContext.fromJson(jsonObject);</span>
    }

    /**
     * Creates a new ExternalMessageBuilder initialized with the passed {@code headers}.
     *
     * @param headers the headers to initialize the builder with.
     * @return the builder.
     */
    public static ExternalMessageBuilder newExternalMessageBuilder(final Map&lt;String, String&gt; headers) {
<span class="nc" id="L214">        return new MutableExternalMessageBuilder(headers);</span>
    }

    /**
     * Creates a new ExternalMessageBuilder for the passed {@code messageType} initialized with the passed
     * {@code headers}.
     *
     * @param headers the headers to initialize the builder with.
     * @param topicPath the topicPath to initialize the builder with.
     * @return the builder.
     */
    public static ExternalMessageBuilder newExternalMessageBuilder(final Map&lt;String, String&gt; headers,
            final String topicPath) {
<span class="nc" id="L227">        return new MutableExternalMessageBuilder(headers, topicPath);</span>
    }

    /**
     * Creates a new ExternalMessageBuilder based on the passed existing {@code externalMessage}.
     *
     * @param externalMessage the ExternalMessage initialize the builder with.
     * @return the builder.
     */
    public static ExternalMessageBuilder newExternalMessageBuilder(final ExternalMessage externalMessage) {
<span class="nc" id="L237">        return new MutableExternalMessageBuilder(externalMessage);</span>
    }

    public static Source newSource(final Set&lt;String&gt; addresses, final int consumerCount) {
<span class="nc" id="L241">        return ImmutableSource.of(addresses, consumerCount);</span>
    }

    public static Source newSource(final int consumerCount, final String... sources) {
<span class="nc" id="L245">        return ImmutableSource.of(consumerCount, sources);</span>
    }

    public static Target newTarget(final String address, final Set&lt;String&gt; topics) {
<span class="nc" id="L249">        return ImmutableTarget.of(address, topics);</span>
    }

    public static Target newTarget(final String address, final String requiredTopic, final String... topics) {
<span class="nc" id="L253">        return ImmutableTarget.of(address, requiredTopic, topics);</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.0.201801022044</span></div></body></html>