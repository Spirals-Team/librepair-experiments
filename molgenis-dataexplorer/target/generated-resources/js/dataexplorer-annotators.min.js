(function(e,g){g.dataexplorer=g.dataexplorer||{};var k;var c;var j=g.dataexplorer.annotators=g.dataexplorer.annotators||{};j.getAnnotatorSelectBoxes=a;var b=new g.RestClient();function a(){var l=i();var m=e("#enabled-annotator-selection-container");var n=e("#disabled-annotator-selection-container");b.getAsync(l.href,null,function(o){e.ajax({type:"POST",url:"/annotators/get-available-annotators",data:JSON.stringify(o.name),contentType:"application/json",success:function(p){for(var y in p){var v=p[y]["canAnnotate"];var u=p[y]["description"].toString();var w=p[y]["inputAttributes"];var r=p[y]["inputAttributeTypes"];var q=p[y]["outputAttributes"];var s=p[y]["outputAttributeTypes"];var x=p[y]["showSettingsButton"];var t=d(w,r);var z=d(q,s);if(v==="true"){m.append(k({enabled:v,annotatorName:y,description:u,inputMetaData:t,outputMetaData:z,showSettingsButton:x}))}else{n.append(k({enabled:v,annotatorName:y,description:u,inputMetaData:t,outputMetaData:z,showSettingsButton:x}))}(function(A){e(document).on("click","#"+A+"-settings-btn",function(){React.unmountComponentAtNode(e("#"+A+"-settings-container")[0]);React.render(g.ui.Form({entity:"sys"+g.packageSeparator+"set"+g.packageSeparator+A,entityInstance:A,mode:"edit",modal:true,enableOptionalFilter:false,enableFormIndex:false,onSubmitSuccess:function(){location.reload()}}),e("#"+A+"-settings-container")[0])})})(y)}e("#selected-dataset-name").html(o.name);e("#dataset-identifier").val(o.name);e(".darktooltip").tooltip({placement:"right"})}})})}function d(m,p){var o=[];for(var l in m){var n=new Object();n.name=m[l].name;n.type=p[n.name];n.desc=m[l].description;o.push(n)}return c({inputParams:o})}function h(){var l=g.dataexplorer.getSelectedAttributes();return g.getAtomicAttributes(l,b)}function i(){return g.dataexplorer.getSelectedEntityMeta()}function f(){return g.dataexplorer.getEntityQuery().q}e(function(){var l=e("#annotate-dataset-button");var m=e("#annotate-dataset-form");e("#disabled-tooltip").tooltip();e("#annotate-dataset-form").click(function(){if(e("#annotate-dataset-form input:checkbox[name=annotatorNames]:checked").size()>0){l.removeAttr("disabled","disabled")}else{l.attr("disabled","disabled")}});k=Handlebars.compile(e("#annotator-template").html());c=Handlebars.compile(e("#attributes-template").html());l.click(function(n){n.preventDefault();n.stopPropagation();m.submit()});m.submit(function(n){n.preventDefault();n.stopPropagation();if(m.valid()){e.ajax({type:"POST",url:"/annotators/annotate-data/",data:m.serialize(),contentType:"application/x-www-form-urlencoded",success:function(o){window.location.replace("?mod=annotators&entity="+o)}})}});l.attr("disabled","disabled")})}($,window.top.molgenis=window.top.molgenis||{}));